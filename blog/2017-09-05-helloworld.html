<!DOCTYPE html>
<html lang="pt_BR">
<head>
<!-- 2017-09-15 sex 23:36 -->
<meta charset="utf-8">
<title>Alô Mundo</title>
<meta name="generator" content="Org mode">
<meta name="author" content="Guaracy Monteiro">
    <!-- inicio extra-head -->
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <!-- fonts -->
    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css' />
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Roboto'/>
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Roboto+Mono'/>
    <!-- css -->
    <!--link rel='stylesheet' href='../res/css/code.css' /-->
    <link rel='stylesheet' href='../res/css/htmlize.css' />
    <link rel='stylesheet' href='../res/css/w3.css' />
    <link rel='stylesheet' href='../res/css/w3-theme.css' />
    <link rel='stylesheet' href='../res/css/main.css'>
    <!-- js -->
    <script src='../res/js/main.js'></script>
    <!-- fim extra-head -->
</head>
<body>
<div id="preamble" class="status">
      <!-- início header.html -->
    </div>
    <nav class="w3-sidebar w3-bar-block w3-collapse w3-animate-left w3-card-4" style="z-index:3;width:250px;" id="mySidebar">
      <br/>
      <a class="w3-bar-item w3-button w3-hover-theme w3-hide-large w3-large" href="javascript:void(0)" onclick="w3_close()">Close <i class="fa fa-remove"></i></a>
      <a class="w3-bar-item w3-button w3-hover-theme" href="/"><i class="fa fa-home"></i> Blog</a>
      <a class="w3-bar-item w3-button w3-hover-theme" href="/index.xml"><i class="fa fa-rss"></i> RSS</a>
      <br/>
      <a class="w3-bar-item w3-button w3-hover-theme" href="/documentos.html"><i class="fa fa-book"></i> Documentos</a>
      <a class="w3-bar-item w3-button w3-hover-theme" href="/changelog.html"><i class="fa fa-sliders"></i> Alterações</a>
      <a class="w3-bar-item w3-button w3-hover-theme" href="/contato.html"><i class="fa fa-user-secret"></i> Contato</a>
      <a class="w3-bar-item w3-button w3-hover-theme" href="https://github.com/guaracy"><i class="fa fa-github"></i> GitHub</a>
      <a class="w3-bar-item w3-button w3-hover-theme" href="https://twitter.com/guaracybm"><i class="fa fa-twitter"></i> Twitter</a>
      <form class="w3-bar-item" method="get" id="search" action="https://duckduckgo.com/" class="navbar-form pull-left">
        <input type="hidden" name="sites" value="{{site-domain}}">
        <input type="hidden" name="k8" value="#444444">
        <input type="hidden" name="k9" value="#D51920">
        <input type="hidden" name="kt" value="h">
        <input class="w3-input w3-border w3-border-theme" type="text" name="q" maxlength="200"
               placeholder="Procurar&hellip;" class="span2" style="margin-top: 4px;">
        <input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
      </form>
    </nav>

    <div class="w3-main" style="margin-left:250px;">
      <div id="myTop" class="w3-container w3-top w3-theme w3-large" style="opacity: 0.95;">
        <p>
          <i class="fa fa-bars w3-button w3-theme w3-hide-large w3-xlarge" title="Menu" onclick="w3_open()"></i>
          <span id="myIntro" class="w3-hide"><a href="#"><i class="fa fa-chevron-circle-up w3-xlarge w3-button" title="Top"></i></a> Cadafalso</span>
        </p>
      </div>

      <div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" id="myOverlay"></div>
      <header class="w3-theme w3-center" style="padding: 64px">
        <h1><b>Cadafalso</b><br></h1>Apenas mais um blog
      </header>
      <div class="w3-container" style="padding:16px">
        <div>

    
<!-- fim header.html -->
</div>
<div id="content">
<h1 class="title">Alô Mundo</h1>
<div id="table-of-contents">
<h2>&Iacute;ndice</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org9ce43a1">Exemplo de código fonte</a></li>
<li><a href="#org7ff1645">Exemplo de configuração do Emacs</a></li>
<li><a href="#org31c177c">Problemas de um blog estático</a></li>
<li><a href="#org3a0f017">Gerando documentação</a></li>
<li><a href="#org199bc9b">Palavras finais</a></li>
<li><a href="#org8d18975">Atualização</a></li>
<li><a href="#orgb119cde">Referências</a></li>
</ul>
</div>
</div>
<div class="PREVIEW">
<p>
Apresentação de um novo blog (que não é novo) &#x2026;
</p>

</div>
<p>
apenas para começar certinho.
</p>

<p>
A ideia principal é ter um blog estático para hospedar no GitHub ou em outro servidor qualquer sem a necessidade de programas adicionais. Já testei alguns geradores de blog estático como Hugo, Nikola. Apesar de ótimas opções (entre outros que não testei) em algum ponto eles falharam em integrar o <a href="https://www.gnu.org/software/emacs/">Emacs</a> com o <a href="http://orgmode.org/">org-mode</a>. Não miseravelmente, mas o resultado não foi o que eu desejava. Olhei algumas opções de blog escritas em emacs-lisp como org2web que se demonstraram eficientes mas achei que seria mais uma camada desnecessária entre o texto e o blog. Acabou prevalecendo a opção de exportar diretamente o texto para o blog, opção que não necessita muita coisa além de uma pequena configuração e uma estrutura de diretórios para facilitar a exportação.
</p>

<p>
É possível, com o org-mode, desde a criação de listas de tarefas até livros, passando por agenda, pesquisas reproduzíveis, <a href="https://en.wikipedia.org/wiki/Literate_programming">programação letrada</a> e mais um milhão de coisas. Pode-se dizer que é uma linguagem de marcação como Markdown, ReStruturedText, etc., mas turbinada. Assim como o Emacs é mais do que um editor de textos, o org-mode é mais do que uma linguagem de marcação. Vejamos um exemplo de código fonte utilizando a linguagem <a href="http://www.red-lang.org/">Red</a>:
</p>

<div id="outline-container-org9ce43a1" class="outline-2">
<h2 id="org9ce43a1">Exemplo de código fonte</h2>
<div class="outline-text-2" id="text-org9ce43a1">
<p>
Na linha <a href="#coderef-red-read" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-red-read');" onmouseout="CodeHighlightOff(this, 'coderef-red-read');">3</a> podemos ver como é feita a leitura de uma página em Red. 
</p>

<div class="org-src-container">
<pre class="src src-red"><span class="linenr">1: </span><span class="org-variable-name">site:</span> <span class="org-string">"http://red-lang.org"</span>
<span class="linenr">2: </span><span class="org-function-name">print</span> <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-string">"Lendo a p&#225;gina:"</span> site<span class="org-rainbow-delimiters-depth-1">]</span> 
<span id="coderef-red-read" class="coderef-off"><span class="linenr">3: </span><span class="org-variable-name">page:</span> <span class="org-function-name">read</span> to-url site</span>
<span class="linenr">4: </span><span class="org-function-name">print</span> <span class="org-string">"Recuperando o t&#237;tulo da p&#225;gina."</span>
<span id="coderef-red-parse" class="coderef-off"><span class="linenr">5: </span><span class="org-function-name">parse</span> page <span class="org-rainbow-delimiters-depth-1">[</span>thru &lt;title&gt; <span class="org-function-name">copy</span> tit <span class="org-function-name">to</span> &lt;/title&gt; <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-function-name">print</span> <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-string">"Titulo:"</span> tit<span class="org-rainbow-delimiters-depth-1">]</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">]</span></span>
<span class="linenr">6: </span><span class="org-function-name">print</span> <span class="org-string">"Feito o carreto."</span>
</pre>
</div>

<pre class="example">
Lendo a página: http://red-lang.org
Recuperando o título da página.
Titulo: Red Programming Language
Feito o carreto.

</pre>

<p>
O <a href="#coderef-red-parse" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-red-parse');" onmouseout="CodeHighlightOff(this, 'coderef-red-parse');">parse</a> aceita tags já que é um dos muitos tipos de dados de Red.
</p>

<p>
O que acontece no exemplo anterior?
</p>
<ul class="org-ul">
<li>Temos um trecho de um determinado código em uma determinada linguagem (no caso com as linhas numeradas) e a sintaxe salientada. Por si só, não é nenhuma novidade, mas &#x2026;</li>
<li>Posso referenciar as linhas no texto sem me preocupar se tiver que incluir ou excluir linhas do programa.</li>
<li>Colocando o cursor no trecho de código e digitando <code>C-c C-c</code>, o código será executado e o resultado mostrado no bloco seguinte. Qualquer alteração no código irá se refletir no resultado sem a necessidade do tedioso processo de executar externamente e copiar/color o resultado a cada alteração, diminuindo a possibilidade de erros. O resultado pode ser um gráfico gerado por <b>R</b> ou outro programa e, se for uma linguagem compilada com <b>C</b> ele será compilado e executado para mostrar o resultado.</li>
<li>Posso gerar um arquivo com o código para ser executado externamente (o arquivo pode ser composto por diversos trechos de código e ainda posso ter diversas linguagens gerando diversos arquivos).</li>
<li>E, como sempre, mais um monte de coisas.</li>
</ul>

<p>
Mas, voltemos ao blog. Supondo-se que eu coloque os artigos do meu blog na pasta <code>~/org/blog/</code>, poderia ter o seguinte trecho no meu arquivo de configuração do Emacs:
</p>
</div>
</div>

<div id="outline-container-org7ff1645" class="outline-2">
<h2 id="org7ff1645">Exemplo de configuração do Emacs</h2>
<div class="outline-text-2" id="text-org7ff1645">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">setq</span> org-publish-project-alist
      '<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"blog"</span>
         <span class="org-builtin">:components</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"artigos"</span>, <span class="org-string">"rss"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"artigos"</span>
         <span class="org-builtin">:base-directory</span> <span class="org-string">"~/org/blog/"</span>
         <span class="org-builtin">:html-extension</span> <span class="org-string">"html"</span>
         <span class="org-builtin">:base-extension</span> <span class="org-string">"org"</span>
         <span class="org-builtin">:publishing-directory</span> <span class="org-string">"~/public_html/"</span>
         <span class="org-builtin">:publishing-function</span> org-html-publish-to-html
         <span class="org-builtin">:html-preamble</span> nil
         <span class="org-builtin">:html-postamble</span> nil<span class="org-rainbow-delimiters-depth-1">)</span>
        <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"rss"</span>
         <span class="org-builtin">:base-directory</span> <span class="org-string">"~/org/blog/"</span>
         <span class="org-builtin">:base-extension</span> <span class="org-string">"org"</span>
         <span class="org-builtin">:publishing-directory</span> <span class="org-string">"~/public_html/"</span>
         <span class="org-builtin">:publishing-function</span> org-rss-publish-to-rss
         <span class="org-builtin">:html-link-home</span> <span class="org-string">"http://mydomain.org/"</span>
         <span class="org-builtin">:html-link-use-abs-url</span> t<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
No exemplo acima, se for dado o comando para publicar os <code>artigos</code>, o org-mode irá verificar todos os arquivos com a extensão org do diretório <code>~/org/blog</code> que foram alterados desde a última publicação, aplicar a função <code>org-html-publish-to-html</code> e gravá-los no diretório <code>~/public_html/</code> com a extensão .html. Existem diversos ganchos que permitem adicionar algum código específico durante a conversão. No exemplo estão mostrados apenas <code>:html-preamble</code> para incluir algum código logo após <code class="src src-html">&lt;<span class="org-function-name">body</span>&gt;</code> e o <code>html-postamble</code> para incluir logo antes de <code class="src src-html">&lt;/<span class="org-function-name">body</span>&gt;</code>. Para atualizar o <i>feed</i> do site, basta executar o componente <code>rss</code> que será aplicada a função <code>org-rss-publish-to-rss</code>. Se for uma atualização geral, executamos <code>blog</code> que os dois componentes serão processados.
</p>

<p>
Você pode ver informações completas para a publicação no <a href="http://orgmode.org/manual/Publishing.html#Publishing">site</a> do org-mode e nas <a href="#org16f9f81">referências</a>.
</p>

<div class="error">
<p>
Estava com a versão <code>9.0</code> do org-mode com <code>Emacs 25.2</code>. Após uma atualização do org-mode para (<code>9.1</code>), algumas funções foram alteradas, retornando erro e impossibilitando a criação do blog. Para não postergar mais a publicação do blog, voltei para a versão anterior. Apaguei a versão nova do org-mode, baixei o arquivo <a href="http://orgmode.org/elpa/org-plus-contrib-20170828.tar">org-plus-contrib-20170828.tar</a> do <a href="http://orgmode.org/elpa/">site</a>, e descompactei no local. Depois eu verifico as incompatibilidades no <a href="http://orgmode.org/Changes.html">changelog</a>.
</p>

</div>
</div>
</div>

<div id="outline-container-org31c177c" class="outline-2">
<h2 id="org31c177c">Problemas de um blog estático</h2>
<div class="outline-text-2" id="text-org31c177c">
<p>
Um dos "problemas" de um blog estático é o sistema de comentários. Nada que um e-mail não resolva mas a comunicação fica restrita quando poderia ser útil para outros usuários. Existem diversas opções para contornar este problema. Por enquanto escolhi o sistema de comentários disponibilizado pelo Facebook.
</p>

<p>
Ainda não decidi se coloco um sistema de tags. Incluí a opção de busca pelo Google e já resolve a maioria das pesquisas.  
</p>
</div>
</div>

<div id="outline-container-org3a0f017" class="outline-2">
<h2 id="org3a0f017">Gerando documentação</h2>
<div class="outline-text-2" id="text-org3a0f017">
<p>
O mesmo arquivo que gerou esta entrada para o blog também poderia gerar um arquivo de documentação (veja <a href="#org16f9f81">referẽncias</a>). Gerei um .html pois já possuo uma formatação adequada para ele e, em diversos casos, uma documentação em .html pode ser mais adequada que um .epub, .pdf ou outro. Em alguns formatos podemos perder algumas funcionalidades como no caso do .pdf que perdemos a indicação da linha do trecho quando passamos o mouse sobre a mesma.
</p>
</div>
</div>

<div id="outline-container-org199bc9b" class="outline-2">
<h2 id="org199bc9b">Palavras finais</h2>
<div class="outline-text-2" id="text-org199bc9b">
<p>
Agora é só escrever um texto utilizando .org como marcação e o artigo do blog está pronto. Para publicá-lo basta digitar <code>M-x org-publish</code> e escolher qual o item que deverá ser gerado e publicado. Se escolher artigos, serão gerados os arquivos .html de todos os arquivos .org novos ou alterados e enviados para a pasta <code>~/public_html</code> ou posso criar uma entrada <code>blog</code> com todos os componentes necessários para a geração do blog. É possível ainda ter um componentes para a geração de manuais que irão gerar .pdf, ou para livros, etc.. A configuração aqui está um pouco mais complexa do qua a apresentada mas já é possível ter uma ideia.
</p>

<p>
Alguns detalhes para a formatação da página ainda não estão como eu gostaria (como o menu, por exemplo) e outros podem estar faltando. Também preciso melhorar a responsividade do site como incluir uma tabela entre <code>&lt;div style</code>"overflow-x:auto;"&gt;&#x2026;&lt;/div&gt;= automaticamente para a visualização em dispositivos com tela pequena.
</p>


<div class="figure">
<p><a href="../img/blog-emacs.png"><img src="../img/blog-emacs-small.png" alt="blog-emacs-small.png"></a>
</p>
<p><span class="figure-number">Figura 1: </span>Editando esta entrada</p>
</div>
</div>
</div>


<div id="outline-container-org8d18975" class="outline-2">
<h2 id="org8d18975">Atualização</h2>
<div class="outline-text-2" id="text-org8d18975">
<ul class="org-ul">
<li><b>2017-09-11</b> : Sistema de comentários alterado do Facebook para o Disqus. Só para sair das garras do Zuckerberg: Dica do <a href="http://www.eustaquiorangel.com/">Taq</a>.</li>
</ul>

<p>
Até o próximo.
</p>
</div>
</div>


<div id="outline-container-orgb119cde" class="outline-2">
<h2 id="orgb119cde">Referências<a id="org16f9f81"></a></h2>
<div class="outline-text-2" id="text-orgb119cde">
<ul class="org-ul">
<li><a href="https://emacs-doctor.com/blogging-from-emacs.html">Blogging from GNU Emacs</a></li>
<li><a href="https://ogbe.net/blog/blogging_with_org.html">Blogging using org-mode (and nothing else)</a></li>
<li>O fonte desta entrada no formato <a href="../dl/2017-09-05-helloworld.txt">texto</a> gerou a mesma fonte em <a href="../dl/2017-09-05-helloworld.html">html</a>, uma entrada para o <a href="./2017-09-05-helloworld.html">blog</a>, uma <a href="../docs/2017-09-05-helloworld.html">documentação</a> um programa em <a href="../dl/hello.red">Red</a> e um <a href="../dl/conf.el">emacs lisp</a>.</li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<!-- inicio comentarios -->
    <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
        this.page.url = 'https://guaracy.github.io/blog/2017-09-05-helloworld.html';
        this.page.identifier = '2017-09-05-helloworld.html';
    };
    (function() {
        var d = document, s = d.createElement('script');   
        s.src = 'https://cadafalso-gbm.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<!-- fim comentarios -->
<center><a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.2.1 (<a href="http://orgmode.org">Org</a> mode 9.0.10)</center><!-- início footer -->
<center>
Licença: <a href= 'https://creativecommons.org/licenses/by-sa/4.0/deed.pt_BR'>CC BY-SA 4.0</a></center></p>
</center>
<!-- fim footer -->
<!-- início google analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-92986383-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- fim google analytics -->
</div>
</body>
</html>
