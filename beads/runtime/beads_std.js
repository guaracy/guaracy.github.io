import*as str from"./beads_str.js";import*as k from"./beads_k.js";export const CHECKS=!0;export const TRACE_IMPLIED=!1;export const TRACE_INIT=!1;export const TRACE_TIME=!1;const TRACE_ANIMATION=!0,TRACE_BITMAP=!1,TRACE_BLACKBOX=!0,TRACE_BOOT=!1,TRACE_DEBUG=!0,TRACE_CACHE=!1,TRACE_CHAN=!1,TRACE_CHUNK=!1,TRACE_CLICK=!1,TRACE_CLIENT=!1,TRACE_COLLATE=!1,TRACE_CURVE=!1,TRACE_DECODE=!1,TRACE_DINPUT=!1,TRACE_ENCODE=!1,TRACE_ENCOD_LOW=!1,TRACE_FILE=!1,TRACE_IMG=!1,TRACE_INPUT=!1,TRACE_INSERT=!1,TRACE_JUMP=!0,TRACE_KEYS=!1,TRACE_LOG=!1,TRACE_LOGG=!1,TRACE_LOGW=!1,TRACE_LOW=!1,TRACE_LOOM=!1,TRACE_MAJOR=!1,TRACE_MICRO=!1,TRACE_MOVE=!1,TRACE_PICKER=!1,TRACE_SEARCH=!1,TRACE_SEQ=!1,TRACE_SETVAL=!1,TRACE_SOUND=!1,TRACE_SPRITE=!1,TRACE_TEXT=!1,TRACE_TOUCH=!1,TRACE_TO_VAL_PTR=!1,TRACE_UNITX=!1,TRACE_XY=!1,TRACE_WRITE=!1,USES_VIDEO=!1,TRAP_BAD_SUBSCRIPTS=!0,TRAP_ERR=!0,TRAP_TYPE_MISMATCH=!0,TRAP_U=!0,SKIP_ANIMATION=!1,FIELD_EMPTY_SYMBOL="‚úΩ",FIELD_EMPTY_COLOR=14423100,FIELD_BAD_SYMBOL="‚ö†Ô∏è";TRACE_INIT&&logg("--- INIT A of std");var g_curr_cursor=0,g_svg_id=0;export const IS_NODE=!1;const _M="std";export const SVG_NS="http://www.w3.org/2000/svg";export const XLINK_NS="http://www.w3.org/1999/xlink";export var FIELDS={};export var FUNCS={};export var TREES={};export var runtime;export var debug_runtime;export var default_pic_host;export var loom_history;let gg_buf;export let SCREEN_H;export let SCREEN_V;export let SCREEN_DPI;export let g_currseq=1e3;export let g_code={};var g_overlay=null;export const g_hardware_id=305419896;export let g_active_framerate=60;export let g_inactive_framerate=2;export let g_inverse_hash={};export let g_id_to_websocket={};let g_subscript_found,g_val_found,g_next_bid=21e3;export const SCROLLBAR_WIDTH=IS_NODE?0:js_scrollbar_width();export const MAX_LEVELS=14;export let g_socket_to_sub_client=[];export let g_id_to_sub_server={};export let g_id_to_sub_client={};export const FIRST_ENUM=900719e10;export const FIRST_META=90071943e8;export const LAST_ENUM=9007198599999998;export const N=FIRST_ENUM+0;export const Y=FIRST_ENUM+1111111111;export const U=LAST_ENUM+1;export const ERR=NaN;export const INFINITY=1/0;export const NEG_INFINITY=-1/0;export const U_STR=void 0;export const U_PATH=void 0;export const U_PHOTO=void 0;export const U_MEAS=void 0;export const U_FUNC=void 0;export const U_SOUND=void 0;export const U_TREE=void 0;export const U_COLOR=3758096384;export const U_DATE=U;export const ERR_STR="ERR";export const ERR_PATH=new a_path;export const ERR_IMAGE=new a_image(null,"err");export const ERR_MEAS=new a_meas;export const ERR_FUNC=new a_function(_M,"halt",halt);export const ERR_GRAD=new a_gradient;export const ERR_SOUND=new a_sound;export const ERR_BITS=ERR;export const ERR_BYTES=ERR;export let ERR_TREE;export const ERR_COLOR=3919157657;export const ERR_DATE=ERR;export const GRAD_TO_RIGHT=0;export const GRAD_TO_BOTTOM=90;export const GRAD_TO_LEFT=180;export const GRAD_TO_TOP=270;export const FIRST=1;export const CR="\r";export const LF="\n";export const TAB="\t";export const ESC="";export const BS="\b";export const SANS_SERIF="_sans";export const SERIF="_serif";export const MONOSPACE="_typewriter";export const TOP_LEFT=1;export const TOP_CENTER=2;export const TOP_RIGHT=3;export const MID_LEFT=4;export const MID_CENTER=5;export const MID_RIGHT=6;export const BOT_LEFT=7;export const BOT_CENTER=8;export const BOT_RIGHT=9;export const LOOM_OP_SKIP=" ";export const LOOM_OP_SETV="S";export const LOOM_OP_CLEAR="C";export const LOOM_OP_RENUM="N";export const PI=Math.PI;export const TAU=2*Math.PI;export const E=Math.E;export const GOLDEN_RATIO=(1+Math.sqrt(5))/2;export const SECONDS_PER_MIN=60;export const SECONDS_PER_HOUR=3600;export const SECONDS_PER_DAY=86400;export const SECONDS_PER_YEAR=31557600;export const SECONDS_PER_MONTH=2629800;export const KEYCODE_LEFT=37;export const KEYCODE_RIGHT=39;export const KEYCODE_UP=38;export const KEYCODE_DOWN=40;export const KEYCODE_PAGE_UP=33;export const KEYCODE_PAGE_DOWN=34;export const KEYCODE_HOME=36;export const KEYCODE_END=35;export const KEYCODE_SPACE=32;export const KEYCODE_BS=8;export const KEYCODE_DEL=46;export const KEYCODE_ENTER=13;export const KEYCODE_ESC=27;export const KEYCODE_INS=45;export const KEYCODE_TAB=9;export const KEYCODE_SCROLL_LOCK=145;export const KEYCODE_PRINT_SCREEN=124;export const KEYCODE_F1=112;export const KEYCODE_F2=113;export const KEYCODE_F3=114;export const KEYCODE_F4=115;export const KEYCODE_F5=116;export const KEYCODE_F6=117;export const KEYCODE_F7=118;export const KEYCODE_F8=119;export const KEYCODE_F9=120;export const KEYCODE_F10=121;export const KEYCODE_F11=122;export const KEYCODE_F12=123;export const KEYCODE_F13=124;export const KEYCODE_ANDROID_BACK=16777238;export const KEYCODE_ANDROID_SEARCH=16777247;export const KEYCODE_ANDROID_MENU=16777234;export const ALICE_BLUE=15792383;export const ANTIQUE_WHITE=16444375;export const AQUA=65535;export const AQUAMARINE=8388564;export const AZURE=15794175;export const BEIGE=16119260;export const BISQUE=16770244;export const BLACK=0;export const BLANCHED_ALMOND=16772045;export const BLUE=255;export const BLUE_VIOLET=9055202;export const BROWN=10824234;export const BURLY_WOOD=14596231;export const CADET_BLUE=6266528;export const CHARTREUSE=8388352;export const CHOCOLATE=13789470;export const CORAL=16744272;export const CORNFLOWER_BLUE=6591981;export const CORNSILK=16775388;export const CRIMSON=14423100;export const CYAN=65535;export const DARK_BLUE=139;export const DARK_CYAN=35723;export const DARK_GOLDENROD=12092939;export const DARK_GRAY=11119017;export const DARK_GREEN=25600;export const DARK_KHAKI=12433259;export const DARK_MAGENTA=9109643;export const DARK_OLIVE_GREEN=5597999;export const DARK_ORANGE=16747520;export const DARK_ORCHID=10040012;export const DARK_RED=9109504;export const DARK_SALMON=15308410;export const DARK_SEA_GREEN=9419919;export const DARK_SLATE_BLUE=4734347;export const DARK_SLATE_GRAY=3100495;export const DARK_TURQUOISE=52945;export const DARK_VIOLET=9699539;export const DEEP_PINK=16716947;export const DEEP_SKY_BLUE=49151;export const DIM_GRAY=6908265;export const DODGER_BLUE=2003199;export const FIREBRICK=11674146;export const FLORAL_WHITE=16775920;export const FOREST_GREEN=2263842;export const FUCHSIA=16711935;export const GAINSBORO=14474460;export const GHOST_WHITE=16316671;export const GOLD=16766720;export const GOLDENROD=14329120;export const GRAY=8421504;export const GRAY9=1710618;export const GRAY8=3355443;export const GRAY7=5000268;export const GRAY6=6710886;export const GRAY5=8355711;export const GRAY4=10066329;export const GRAY3=11711154;export const GRAY2=13421772;export const GRAY1=15066597;export const GREEN=32768;export const GREEN_YELLOW=11403055;export const HONEYDEW=15794160;export const HOT_PINK=16738740;export const INDIAN_RED=13458524;export const INDIGO=4915330;export const IVORY=16777200;export const KHAKI=15787660;export const LAVENDER=15132410;export const LAVENDER_BLUSH=16773365;export const LAWN_GREEN=8190976;export const LEMON_CHIFFON=16775885;export const LIGHT_BLUE=11393254;export const LIGHT_CORAL=15761536;export const LIGHT_CYAN=14745599;export const LIGHT_GOLDENROD=16448210;export const LIGHT_GREEN=9498256;export const LIGHT_GREY=13882323;export const LIGHT_PINK=16758465;export const LIGHT_SALMON=16752762;export const LIGHT_SEA_GREEN=2142890;export const LIGHT_SKY_BLUE=8900346;export const LIGHT_SLATE_GRAY=7833753;export const LIGHT_STEEL_BLUE=11584734;export const LIGHT_YELLOW=16777184;export const LIME=65280;export const LIME_GREEN=3329330;export const LINEN=16445670;export const MAGENTA=16711935;export const MAROON=8388608;export const MEDIUM_AQUAMARINE=6737322;export const MEDIUM_BLUE=205;export const MEDIUM_ORCHID=12211667;export const MEDIUM_PURPLE=9662683;export const MEDIUM_SEA_GREEN=3978097;export const MEDIUM_SLATE_BLUE=8087790;export const MEDIUM_SPRING_GREEN=64154;export const MEDIUM_TURQUOISE=4772300;export const MEDIUM_VIOLET_RED=13047173;export const MIDNIGHT_BLUE=1644912;export const MINT_CREAM=16121850;export const MISTY_ROSE=16770273;export const MOCCASIN=16770229;export const NAVAJO_WHITE=16768685;export const NAVY=128;export const OLD_LACE=16643558;export const OLIVE=8421376;export const OLIVE_DRAB=7048739;export const ORANGE=16753920;export const ORANGE_RED=16729344;export const ORCHID=14315734;export const PALE_GOLDENROD=15657130;export const PALE_GREEN=10025880;export const PALE_TURQUOISE=11529966;export const PALE_VIOLET_RED=14381203;export const PAPAYA_WHIP=16773077;export const PEACH_PUFF=16767673;export const PERU=13468991;export const PINK=16761035;export const PLUM=14524637;export const POWDER_BLUE=11591910;export const PURPLE=8388736;export const REBECCA_PURPLE=6697881;export const RED=16711680;export const ROSY_BROWN=12357519;export const ROYAL_BLUE=4286945;export const SADDLE_BROWN=9127187;export const SALMON=16416882;export const SANDY_BROWN=16032864;export const SEA_GREEN=3050327;export const SEASHELL=16774638;export const SIENNA=10506797;export const SILVER=12632256;export const SKY_BLUE=8900331;export const SLATE_BLUE=6970061;export const SLATE_GRAY=7372944;export const SNOW=16775930;export const SPRING_GREEN=65407;export const STEEL_BLUE=4620980;export const TAN=13808780;export const TEAL=32896;export const THISTLE=14204888;export const TOMATO=16737095;export const TURQUOISE=4251856;export const VIOLET=15631086;export const WHEAT=16113331;export const WHITE=16777215;export const WHITE_SMOKE=16119285;export const YELLOW=16776960;export const YELLOW_GREEN=10145074;export const SOP_NOP=0;export const SOP_FIRST=1;export const SOP_UPDATE=2;export const SOP_NODE=3;export const SOP_CALL=4;export const SOP_QUIT=5;export const SOP_END_DELTA=6;export const SOP_CHUNK_START=7;export const SOP_CHUNK_END=8;export const SOP_LOG=9;export const SOP_BAD_REQ=18;export const SOP_BAD_AUTH=19;export const GIANT_WIDTH=2e4;export const EF_VAL_IS_U=1;export const EF_VAL_IS_ERR=2;export const EF_VAL_IS_NUM=4;export const EF_VAL_IS_STR=8;export const EF_VAL_IS_IMAGE=16;export const EF_VAL_IS_FUNC=32;export const EF_VAL_IS_PATH=64;export const EF_VAL_IS_MEAS=128;export const EF_VAL_IS_SOUND=256;export const EF_VAL_IS_GRAD=512;export const EF_VAL_IS_BITS=1024;export const EF_VAL_IS_BYTES=2048;export const EF_VAL_IS_COLOR=4096;export const EF_VAL_IS_DATE=8192;export const EF_VAL_IS_VIDEO=16384;export const EF_VAL_IS_OBJECT=32768;export const EF_IS_DIRTY=65536;export const EF_IS_DERIVED=131072;export const EF_FLAG=262144;export const NF_STATEFUL=524288;export const NF_READONLY=1048576;export const NF_LOGGED=2097152;export const NF_SERVER=4194304;export const NF_TOPLEVEL=8388608;export const NF_UNSORTED=16777216;export const EF_DIRTY_OR_DERIVED=131072|EF_IS_DIRTY;export const TYPES_WHERE_U_NUM=EF_VAL_IS_NUM;export const EF_NUM_TYPES=EF_VAL_IS_U|EF_VAL_IS_ERR|EF_VAL_IS_NUM;export const EF_MASK_TYPE=65535;export const EF_CLEAR_TYPE=4294901760;export const WINDOW_BORDER=2.5;export const COLOR_WIN_BORDER=11776947;export const ONE_72=1/72;export const ONE_25=1/25.4;export const EMPTY_RECT=new Rectangle(-1e3,-1e3,0,0);export var g_enum_ss=[];export const al=FIRST_ENUM+1;g_enum_ss[FIRST_ENUM+1]="al";export const pt=FIRST_ENUM+2;g_enum_ss[FIRST_ENUM+2]="pt";export const px=FIRST_ENUM+3;g_enum_ss[FIRST_ENUM+3]="px",g_enum_ss[9007194157790523]="a_find",g_enum_ss[9007191603303728]="find_start",g_enum_ss[9007192689371859]="find_len",FIELDS[9007191603303728]=!0,FIELDS[9007192689371859]=!0,g_enum_ss[9007192534696881]="a_find_repl",g_enum_ss[9007193956346111]="find_patt",g_enum_ss[9007194250103617]="repl_patt",FIELDS[9007193956346111]=!0,FIELDS[9007193956346111]=!0;export let time_launched;export let now;export let now_raw;export let elapsed;export let elapsed_raw;export let g_time_scale=1;export let g_era_dilated;export let g_era_raw;export let monitored_draw_F=new a_function(_M,"fallback_drawer",fallback_drawer);export const BIG_END=9007190873765313;g_enum_ss[9007190873765313]="BIG_END";export const BLENDMODE_ADD=9007193208486009;g_enum_ss[9007193208486009]="BLENDMODE_ADD";export const BLENDMODE_ALPHA=9007190010329114;g_enum_ss[9007190010329114]="BLENDMODE_ALPHA";export const BLENDMODE_DARKEN=9007190800059581;g_enum_ss[9007190800059581]="BLENDMODE_DARKEN";export const BLENDMODE_DIFFERENCE=9007191076336153;g_enum_ss[9007191076336153]="BLENDMODE_DIFFERENCE";export const BLENDMODE_ERASE=9007192198043080;g_enum_ss[9007192198043080]="BLENDMODE_ERASE";export const BLENDMODE_HARDLIGHT=9007190801031541;g_enum_ss[9007190801031541]="BLENDMODE_HARDLIGHT";export const BLENDMODE_INVERT=9007194240042666;g_enum_ss[9007194240042666]="BLENDMODE_INVERT";export const BLENDMODE_LAYER=9007191933818223;g_enum_ss[9007191933818223]="BLENDMODE_LAYER";export const BLENDMODE_LIGHTEN=9007190296892853;g_enum_ss[9007190296892853]="BLENDMODE_LIGHTEN";export const BLENDMODE_MULTIPLY=9007194046246514;g_enum_ss[9007194046246514]="BLENDMODE_MULTIPLY";export const BLENDMODE_NORMAL=9007193065834577;g_enum_ss[9007193065834577]="BLENDMODE_NORMAL";export const BLENDMODE_OVERLAY=9007190118029762;g_enum_ss[9007190118029762]="BLENDMODE_OVERLAY";export const BLENDMODE_SCREEN=9007191051024702;g_enum_ss[9007191051024702]="BLENDMODE_SCREEN";export const BLENDMODE_SHADER=9007190653012907;g_enum_ss[9007190653012907]="BLENDMODE_SHADER";export const BLENDMODE_SUBTRACT=9007191223567846;g_enum_ss[9007191223567846]="BLENDMODE_SUBTRACT";export const BODY_BINARY=9007190977491561;g_enum_ss[9007190977491561]="BODY_BINARY";export const BODY_HTML=9007192304658121;g_enum_ss[9007192304658121]="BODY_HTML";export const BODY_JSON=9007193587149102;g_enum_ss[9007193587149102]="BODY_JSON";export const BODY_PLAIN=9007194200689272;g_enum_ss[9007194200689272]="BODY_PLAIN";export const CAP_BUTT=9007192063538927;g_enum_ss[9007192063538927]="CAP_BUTT";export const CAP_ROUND=9007191671167298;g_enum_ss[9007191671167298]="CAP_ROUND";export const CAP_SQUARE=9007190564166513;g_enum_ss[9007190564166513]="CAP_SQUARE";export const CENTER=9007192241868086;g_enum_ss[9007192241868086]="CENTER";export const CPU_ARM=9007190976469578;g_enum_ss[9007190976469578]="CPU_ARM";export const CPU_INTEL=9007193832875584;g_enum_ss[9007193832875584]="CPU_INTEL";export const CSTATUS_CONNECTED=9007191710958010;g_enum_ss[9007191710958010]="CSTATUS_CONNECTED";export const CSTATUS_NO_ANSWER=9007194263818523;g_enum_ss[9007194263818523]="CSTATUS_NO_ANSWER";export const CSTATUS_NO_AUTH=9007190790542995;g_enum_ss[9007190790542995]="CSTATUS_NO_AUTH";export const CSTATUS_WAITING=9007191192687714;g_enum_ss[9007191192687714]="CSTATUS_WAITING";export const CURRENCY_AUD=9007192475718373;g_enum_ss[9007192475718373]="AUD";export const CURRENCY_BGN=9007193705641312;g_enum_ss[9007193705641312]="BGN";export const CURRENCY_BRL=9007193167036291;g_enum_ss[9007193167036291]="BRL";export const CURRENCY_CAD=9007191208151055;g_enum_ss[9007191208151055]="CAD";export const CURRENCY_CHF=9007191743607840;g_enum_ss[9007191743607840]="CHF";export const CURRENCY_CNY=9007191123130127;g_enum_ss[9007191123130127]="CNY";export const CURRENCY_CZK=9007192366645409;g_enum_ss[9007192366645409]="CZK";export const CURRENCY_DKK=9007191281604017;g_enum_ss[9007191281604017]="DKK";export const CURRENCY_EUR=9007194034713791;g_enum_ss[9007194034713791]="‚Ç¨";export const CURRENCY_GBP=9007193328217132;g_enum_ss[9007193328217132]="¬£";export const CURRENCY_HKD=9007193272004328;g_enum_ss[9007193272004328]="HKD";export const CURRENCY_HRK=9007193254093876;g_enum_ss[9007193254093876]="HRK";export const CURRENCY_HUF=9007193303882280;g_enum_ss[9007193303882280]="HUF";export const CURRENCY_IDR=9007190070295358;g_enum_ss[9007190070295358]="IDR";export const CURRENCY_ILS=9007194112318441;g_enum_ss[9007194112318441]="ILS";export const CURRENCY_INR=9007191008856284;g_enum_ss[9007191008856284]="INR";export const CURRENCY_JPY=9007191289355106;g_enum_ss[9007191289355106]="¬•";export const CURRENCY_KRW=9007190316430293;g_enum_ss[9007190316430293]="KRW";export const CURRENCY_MXN=9007191000215538;g_enum_ss[9007191000215538]="MXN";export const CURRENCY_MYR=9007191369470251;g_enum_ss[9007191369470251]="MYR";export const CURRENCY_NOK=9007192131762283;g_enum_ss[9007192131762283]="NOK";export const CURRENCY_NZD=9007192850095591;g_enum_ss[9007192850095591]="NZD";export const CURRENCY_PHP=9007193986204375;g_enum_ss[9007193986204375]="PHP";export const CURRENCY_PLN=9007194086281709;g_enum_ss[9007194086281709]="PLN";export const CURRENCY_RON=9007192893301880;g_enum_ss[9007192893301880]="RON";export const CURRENCY_RUB=9007191890293502;g_enum_ss[9007191890293502]="RUB";export const CURRENCY_SEK=9007191131987602;g_enum_ss[9007191131987602]="SEK";export const CURRENCY_SGD=9007194201894521;g_enum_ss[9007194201894521]="SGD";export const CURRENCY_THB=9007190622087537;g_enum_ss[9007190622087537]="THB";export const CURRENCY_TRY=9007190771408822;g_enum_ss[9007190771408822]="TRY";export const CURRENCY_USD=9007191785707743;g_enum_ss[9007191785707743]="$";export const CURRENCY_ZAR=9007190538585226;g_enum_ss[9007190538585226]="ZAR";export const CURS_ALIAS=9007190207080347;g_enum_ss[9007190207080347]="CURS_ALIAS";export const CURS_ARROW=9007193647841682;g_enum_ss[9007193647841682]="CURS_ARROW";export const CURS_CELL=9007193083265441;g_enum_ss[9007193083265441]="CURS_CELL";export const CURS_CONTEXT=9007191905619856;g_enum_ss[9007191905619856]="CURS_CONTEXT";export const CURS_COPY=9007191552930064;g_enum_ss[9007191552930064]="CURS_COPY";export const CURS_CROSSHAIR=9007193274530039;g_enum_ss[9007193274530039]="CURS_CROSSHAIR";export const CURS_CUSTOM=9007190161810882;g_enum_ss[9007190161810882]="CURS_CUSTOM";export const CURS_DIAG_LEFT=9007190666559294;g_enum_ss[9007190666559294]="CURS_DIAG_LEFT";export const CURS_DIAG_RIGHT=9007193324379315;g_enum_ss[9007193324379315]="CURS_DIAG_RIGHT";export const CURS_FINGER=9007192070383776;g_enum_ss[9007192070383776]="CURS_FINGER";export const CURS_GRABBING=9007193359110701;g_enum_ss[9007193359110701]="CURS_GRABBING";export const CURS_HAND=9007191510587780;g_enum_ss[9007191510587780]="CURS_HAND";export const CURS_HIDE=9007193882670433;g_enum_ss[9007193882670433]="CURS_HIDE";export const CURS_IBEAM=9007192946793023;g_enum_ss[9007192946793023]="CURS_IBEAM";export const CURS_MOVE=9007192417875656;g_enum_ss[9007192417875656]="CURS_MOVE";export const CURS_NOT=9007190841203262;g_enum_ss[9007190841203262]="CURS_NOT";export const CURS_QUESTION=9007190982721729;g_enum_ss[9007190982721729]="CURS_QUESTION";export const CURS_RESIZE_COL=9007192794129356;g_enum_ss[9007192794129356]="CURS_RESIZE_COL";export const CURS_RESIZE_E=9007190282529329;g_enum_ss[9007190282529329]="CURS_RESIZE_E";export const CURS_RESIZE_N=9007190097975520;g_enum_ss[9007190097975520]="CURS_RESIZE_N";export const CURS_RESIZE_NE=9007193597645759;g_enum_ss[9007193597645759]="CURS_RESIZE_NE";export const CURS_RESIZE_NW=9007193899642901;g_enum_ss[9007193899642901]="CURS_RESIZE_NW";export const CURS_RESIZE_ROW=9007191394511618;g_enum_ss[9007191394511618]="CURS_RESIZE_ROW";export const CURS_RESIZE_S=9007190584526471;g_enum_ss[9007190584526471]="CURS_RESIZE_S";export const CURS_RESIZE_SE=9007192595770214;g_enum_ss[9007192595770214]="CURS_RESIZE_SE";export const CURS_RESIZE_SW=9007192830656880;g_enum_ss[9007192830656880]="CURS_RESIZE_SW";export const CURS_RESIZE_W=9007190517415995;g_enum_ss[9007190517415995]="CURS_RESIZE_W";export const CURS_WAIT=9007192831767908;g_enum_ss[9007192831767908]="CURS_WAIT";export const CURS_ZOOM_IN=9007193787378752;g_enum_ss[9007193787378752]="CURS_ZOOM_IN";export const CURS_ZOOM_OUT=9007192468555045;g_enum_ss[9007192468555045]="CURS_ZOOM_OUT";export const DRAW_ROW_BACK=9007191892658772;g_enum_ss[9007191892658772]="DRAW_ROW_BACK";export const ENCODE_BINARY=9007192110016779;g_enum_ss[9007192110016779]="ENCODE_BINARY";export const ENCODE_FORM_URL=9007190865080266;g_enum_ss[9007190865080266]="ENCODE_FORM_URL";export const ENCODE_MULTIPART=9007192496651046;g_enum_ss[9007192496651046]="ENCODE_MULTIPART";export const ENCODE_PLAIN=9007194097808478;g_enum_ss[9007194097808478]="ENCODE_PLAIN";export const EV_ALT_TAP=9007194105015026;g_enum_ss[9007194105015026]="EV_ALT_TAP";export const EV_ANIM_BLOCK=9007191727908086;g_enum_ss[9007191727908086]="EV_ANIM_BLOCK";export const EV_ANIM_CURVE=9007194023992688;g_enum_ss[9007194023992688]="EV_ANIM_CURVE";export const EV_ANIM_SPRITE=9007193000576696;g_enum_ss[9007193000576696]="EV_ANIM_SPRITE";export const EV_ANIM_VAL=9007190546483344;g_enum_ss[9007190546483344]="EV_ANIM_VAL";export const EV_DOUBLE_TAP=9007193618146078;g_enum_ss[9007193618146078]="EV_DOUBLE_TAP";export const EV_DRAG_BEGIN=9007193246022061;g_enum_ss[9007193246022061]="EV_DRAG_BEGIN";export const EV_DRAG_END=9007193849965437;g_enum_ss[9007193849965437]="EV_DRAG_END";export const EV_DRAG_MOVE=9007192330010565;g_enum_ss[9007192330010565]="EV_DRAG_MOVE";export const EV_DRAW=9007191483458599;g_enum_ss[9007191483458599]="EV_DRAW";export const EV_GAMECTRL=9007192618363074;g_enum_ss[9007192618363074]="EV_GAMECTRL";export const EV_GEST_BEGIN=9007194179688080;g_enum_ss[9007194179688080]="EV_GEST_BEGIN";export const EV_GEST_END=9007192253491484;g_enum_ss[9007192253491484]="EV_GEST_END";export const EV_HOLD=9007192309436500;g_enum_ss[9007192309436500]="EV_HOLD";export const EV_HOVER=9007191105955681;g_enum_ss[9007191105955681]="EV_HOVER";export const EV_INIT=9007193810427111;g_enum_ss[9007193810427111]="EV_INIT";export const EV_INPUT=9007190575294431;g_enum_ss[9007190575294431]="EV_INPUT";export const EV_KEYBOARD=9007192323348144;g_enum_ss[9007192323348144]="EV_KEYBOARD";export const EV_MID_TAP=9007190942575011;g_enum_ss[9007190942575011]="EV_MID_TAP";export const EV_NOP=9007194138818458;g_enum_ss[9007194138818458]="EV_NOP";export const EV_RESIZE=9007191878931189;g_enum_ss[9007191878931189]="EV_RESIZE";export const EV_ROTATE=9007192337726958;g_enum_ss[9007192337726958]="EV_ROTATE";export const EV_STOP=9007191063356489;g_enum_ss[9007191063356489]="EV_STOP";export const EV_SWIPE=9007194294477221;g_enum_ss[9007194294477221]="EV_SWIPE";export const EV_TAP=9007192665263286;g_enum_ss[9007192665263286]="EV_TAP";export const EV_TCP_CLOSE=9007192646676527;g_enum_ss[9007192646676527]="EV_TCP_CLOSE";export const EV_TCP_CONNECTED=9007190110803356;g_enum_ss[9007190110803356]="EV_TCP_CONNECTED";export const EV_TCP_DATA=9007193000086769;g_enum_ss[9007193000086769]="EV_TCP_DATA";export const EV_TCP_ERR=9007191025146552;g_enum_ss[9007191025146552]="EV_TCP_ERR";export const EV_TIMER=9007190083598342;g_enum_ss[9007190083598342]="EV_TIMER";export const EV_TRACK_GRID=9007193638870201;g_enum_ss[9007193638870201]="EV_TRACK_GRID";export const EV_TRACK_PLAIN=9007192772190303;g_enum_ss[9007192772190303]="EV_TRACK_PLAIN";export const EV_TRACK_TABLE=9007194034012919;g_enum_ss[9007194034012919]="EV_TRACK_TABLE";export const EV_ZOOM=9007191052370350;g_enum_ss[9007191052370350]="EV_ZOOM";export const F_air_version=9007192398224747;g_enum_ss[9007192398224747]="air_version";export const F_app_version=9007193701356128;g_enum_ss[9007193701356128]="app_version";export const F_args=9007190339627053;g_enum_ss[9007190339627053]="args";export const F_base_to_unit=9007191635159450;g_enum_ss[9007191635159450]="base_to_unit";export const F_bchildren=9007191524061537;g_enum_ss[9007191524061537]="bchildren";export const F_bdepth=9007192705851919;g_enum_ss[9007192705851919]="bdepth";export const F_bexpanded=9007191727747299;g_enum_ss[9007191727747299]="bexpanded";export const F_bkind=9007194173052024;g_enum_ss[9007194173052024]="bkind";export const F_bname=9007192768869493;g_enum_ss[9007192768869493]="bname";export const F_bobject=9007194017393109;g_enum_ss[9007194017393109]="bobject";export const F_box=9007190237722809;g_enum_ss[9007190237722809]="box";export const F_boxtot=9007193642230068;g_enum_ss[9007193642230068]="boxtot";export const F_btracks=9007191843782978;g_enum_ss[9007191843782978]="btracks";export const F_callback=9007193913055147;g_enum_ss[9007193913055147]="callback";export const F_cell_id=9007191930494972;g_enum_ss[9007191930494972]="cell_id";export const F_cell_seq=9007190189818832;g_enum_ss[9007190189818832]="cell_seq";export const F_cell=9007192739192540;g_enum_ss[9007192739192540]="cell";export const F_client_bytes_in=9007192330024275;g_enum_ss[9007192330024275]="client_bytes_in";export const F_client_bytes_out=9007193907169216;g_enum_ss[9007193907169216]="client_bytes_out";export const F_client_channel=9007190900478027;g_enum_ss[9007190900478027]="client_channel";export const F_client_status=9007191092912066;g_enum_ss[9007191092912066]="client_status";export const F_code_coverage=9007192968571124;g_enum_ss[9007192968571124]="code_coverage";export const F_cpu_kind=9007192696949221;g_enum_ss[9007192696949221]="cpu_kind";export const F_cursor_changed=9007191768871061;g_enum_ss[9007191768871061]="cursor_changed";export const F_date_city=9007190344604278;g_enum_ss[9007190344604278]="date_city";export const F_date_day=9007193811616089;g_enum_ss[9007193811616089]="date_day";export const F_date_hour=9007191709337003;g_enum_ss[9007191709337003]="date_hour";export const F_date_minute=9007190784173965;g_enum_ss[9007190784173965]="date_minute";export const F_date_month=9007193351461641;g_enum_ss[9007193351461641]="date_month";export const F_date_second=9007192615114217;g_enum_ss[9007192615114217]="date_second";export const F_date_year=9007190473901776;g_enum_ss[9007190473901776]="date_year";export const F_db_name=9007192007664828;g_enum_ss[9007192007664828]="db_name";export const F_db_stores=9007190878152881;g_enum_ss[9007190878152881]="db_stores";export const F_db_ver=9007192803634664;g_enum_ss[9007192803634664]="db_ver";export const F_evkind=9007193830023889;g_enum_ss[9007193830023889]="evkind";export const F_fam_base=9007192510327428;g_enum_ss[9007192510327428]="fam_base";export const F_fam_dim=9007191144904389;g_enum_ss[9007191144904389]="fam_dim";export const F_fam_nonlinear=9007192973195881;g_enum_ss[9007192973195881]="fam_nonlinear";export const F_fam_units=9007193864233088;g_enum_ss[9007193864233088]="fam_units";export const F_fsm_state=9007191932088960;g_enum_ss[9007191932088960]="fsm_state";export const F_full_screen=9007193702789330;g_enum_ss[9007193702789330]="full_screen";export const F_gamec_butt_down=9007192019487062;g_enum_ss[9007192019487062]="gamec_butt_down";export const F_gamec_butt_ix=9007190617414951;g_enum_ss[9007190617414951]="gamec_butt_ix";export const F_gamec_id=9007192957591353;g_enum_ss[9007192957591353]="gamec_id";export const F_gamec_joystick_l=9007190685355017;g_enum_ss[9007190685355017]="gamec_joystick_l";export const F_gamec_joystick_r=9007190584689303;g_enum_ss[9007190584689303]="gamec_joystick_r";export const F_gamec_trigger_l=9007191407266315;g_enum_ss[9007191407266315]="gamec_trigger_l";export const F_gamec_trigger_r=9007191642152981;g_enum_ss[9007191642152981]="gamec_trigger_r";export const F_global_x=9007193122768448;g_enum_ss[9007193122768448]="global_x";export const F_global_y=9007193139546067;g_enum_ss[9007193139546067]="global_y";export const F_grad_angle=9007191342121240;g_enum_ss[9007191342121240]="grad_angle";export const F_grad_centerx=9007192703286708;g_enum_ss[9007192703286708]="grad_centerx";export const F_grad_centery=9007192720064327;g_enum_ss[9007192720064327]="grad_centery";export const F_grad_focusx=9007190751560561;g_enum_ss[9007190751560561]="grad_focusx";export const F_grad_focusy=9007190734782942;g_enum_ss[9007190734782942]="grad_focusy";export const F_grad_radius_inner=9007192092005572;g_enum_ss[9007192092005572]="grad_radius_inner";export const F_grad_radius_outer=9007192096884511;g_enum_ss[9007192096884511]="grad_radius_outer";export const F_grad_shape=9007191080998438;g_enum_ss[9007191080998438]="grad_shape";export const F_grad_stops=9007191284959010;g_enum_ss[9007191284959010]="grad_stops";export const F_grad_sysobj=9007190591095843;g_enum_ss[9007190591095843]="grad_sysobj";export const F_hardware_id=9007194078519856;g_enum_ss[9007194078519856]="hardware_id";export const F_height=9007191065112171;g_enum_ss[9007191065112171]="height";export const F_hist_absorber=9007190177249779;g_enum_ss[9007190177249779]="hist_absorber";export const F_hist_cell_cum=9007192177330549;g_enum_ss[9007192177330549]="hist_cell_cum";export const F_hist_cell_id=9007192249155495;g_enum_ss[9007192249155495]="hist_cell_id";export const F_hist_cell=9007193573752369;g_enum_ss[9007193573752369]="hist_cell";export const F_hist_rawx=9007190242492711;g_enum_ss[9007190242492711]="hist_rawx";export const F_http_body_type=9007193353932454;g_enum_ss[9007193353932454]="http_body_type";export const F_http_body=9007191020361357;g_enum_ss[9007191020361357]="http_body";export const F_http_bytes_now=9007192005332123;g_enum_ss[9007192005332123]="http_bytes_now";export const F_http_bytes_total=9007193563310425;g_enum_ss[9007193563310425]="http_bytes_total";export const F_http_headers=9007192406940129;g_enum_ss[9007192406940129]="http_headers";export const F_http_phase=9007190574098480;g_enum_ss[9007190574098480]="http_phase";export const F_http_status=9007193847231911;g_enum_ss[9007193847231911]="http_status";export const F_http_sysobj=9007192115372715;g_enum_ss[9007192115372715]="http_sysobj";export const F_hue=9007192260774534;g_enum_ss[9007192260774534]="hue";export const F_in_autofill=9007192741706158;g_enum_ss[9007192741706158]="in_autofill";export const F_in_disabled=9007191391531352;g_enum_ss[9007191391531352]="in_disabled";export const F_in_errmsg=9007192770646744;g_enum_ss[9007192770646744]="in_errmsg";export const F_in_form_ready=9007191837187538;g_enum_ss[9007191837187538]="in_form_ready";export const F_in_hint=9007193269270537;g_enum_ss[9007193269270537]="in_hint";export const F_in_keyboard=9007193098511693;g_enum_ss[9007193098511693]="in_keyboard";export const F_in_kind=9007191640276818;g_enum_ss[9007191640276818]="in_kind";export const F_in_label=9007194015078766;g_enum_ss[9007194015078766]="in_label";export const F_in_maxlen=9007192681926341;g_enum_ss[9007192681926341]="in_maxlen";export const F_in_maxval=9007192141470485;g_enum_ss[9007192141470485]="in_maxval";export const F_in_minlen=9007191103869283;g_enum_ss[9007191103869283]="in_minlen";export const F_in_minval=9007191338915331;g_enum_ss[9007191338915331]="in_minval";export const F_in_name=9007192892602323;g_enum_ss[9007192892602323]="in_name";export const F_in_ok=9007193455944754;g_enum_ss[9007193455944754]="in_ok";export const F_in_pattern=9007190727149130;g_enum_ss[9007190727149130]="in_pattern";export const F_in_required=9007193554326105;g_enum_ss[9007193554326105]="in_required";export const F_in_spellcheck=9007191526894282;g_enum_ss[9007191526894282]="in_spellcheck";export const F_in_step=9007192575167474;g_enum_ss[9007192575167474]="in_step";export const F_in_tab=9007190601653327;g_enum_ss[9007190601653327]="in_tab";export const F_in_tip=9007190633928637;g_enum_ss[9007190633928637]="in_tip";export const F_in_validator=9007194273742238;g_enum_ss[9007194273742238]="in_validator";export const F_in_value=9007190252935937;g_enum_ss[9007190252935937]="in_value";export const F_index_multi=9007193267331694;g_enum_ss[9007193267331694]="index_multi";export const F_index_name=9007191391597730;g_enum_ss[9007191391597730]="index_name";export const F_index_unique=9007193945027562;g_enum_ss[9007193945027562]="index_unique";export const F_is_alt=9007190005667004;g_enum_ss[9007190005667004]="is_alt";export const F_is_cmd=9007193687020619;g_enum_ss[9007193687020619]="is_cmd";export const F_is_connected=9007193609258288;g_enum_ss[9007193609258288]="is_connected";export const F_is_ctrl=9007191919774788;g_enum_ss[9007191919774788]="is_ctrl";export const F_is_shift=9007193510209703;g_enum_ss[9007193510209703]="is_shift";export const F_keycode=9007192424042526;g_enum_ss[9007192424042526]="keycode";export const F_left=9007191706667889;g_enum_ss[9007191706667889]="left";export const F_link_data=9007193149612877;g_enum_ss[9007193149612877]="link_data";export const F_link_local_port=9007191183148878;g_enum_ss[9007191183148878]="link_local_port";export const F_link_remote_port=9007192625502279;g_enum_ss[9007192625502279]="link_remote_port";export const F_link_socket=9007191260533300;g_enum_ss[9007191260533300]="link_socket";export const F_link_state=9007194263281102;g_enum_ss[9007194263281102]="link_state";export const F_link_timeout=9007193503325680;g_enum_ss[9007193503325680]="link_timeout";export const F_link_url=9007190416315206;g_enum_ss[9007190416315206]="link_url";export const F_major_firstx=9007193711993708;g_enum_ss[9007193711993708]="major_firstx";export const F_major_steps=9007193823541613;g_enum_ss[9007193823541613]="major_steps";export const F_major_stepx=9007193638987804;g_enum_ss[9007193638987804]="major_stepx";export const F_micro_steps=9007191607397904;g_enum_ss[9007191607397904]="micro_steps";export const F_mod_const=9007190778220416;g_enum_ss[9007190778220416]="mod_const";export const F_mod_enums=9007193473944509;g_enum_ss[9007193473944509]="mod_enums";export const F_mod_funcs=9007191395250568;g_enum_ss[9007191395250568]="mod_funcs";export const F_mod_recs=9007191878925458;g_enum_ss[9007191878925458]="mod_recs";export const F_mod_ufams=9007193162351625;g_enum_ss[9007193162351625]="mod_ufams";export const F_mod_vars=9007193863432299;g_enum_ss[9007193863432299]="mod_vars";export const F_monitor_active=9007191310033365;g_enum_ss[9007191310033365]="monitor_active";export const F_ms_dest=9007192790335809;g_enum_ss[9007192790335809]="ms_dest";export const F_ms_funcname=9007191172220904;g_enum_ss[9007191172220904]="ms_funcname";export const F_ms_kind=9007191809881671;g_enum_ss[9007191809881671]="ms_kind";export const F_ms_module=9007192387639201;g_enum_ss[9007192387639201]="ms_module";export const F_ms_oldval=9007194171088921;g_enum_ss[9007194171088921]="ms_oldval";export const F_ms_newval=9007191501268188;g_enum_ss[9007191501268188]="ms_newval";export const F_ms_where=9007194143747484;g_enum_ss[9007194143747484]="ms_where";export const F_ncells=9007190572849627;g_enum_ss[9007190572849627]="ncells";export const F_notch_height=9007191198576528;g_enum_ss[9007191198576528]="notch_height";export const F_notch_width=9007192438172481;g_enum_ss[9007192438172481]="notch_width";export const F_opacity=9007193881642181;g_enum_ss[9007193881642181]="opacity";export const F_opt_children=9007191074573613;g_enum_ss[9007191074573613]="opt_children";export const F_opt_disabled=9007190594341658;g_enum_ss[9007190594341658]="opt_disabled";export const F_opt_label=9007191061925592;g_enum_ss[9007191061925592]="opt_label";export const F_opt_selected=9007192931988523;g_enum_ss[9007192931988523]="opt_selected";export const F_opt_val=9007191226420945;g_enum_ss[9007191226420945]="opt_val";export const F_os_kind=9007192093146965;g_enum_ss[9007192093146965]="os_kind";export const F_os_language=9007191811562369;g_enum_ss[9007191811562369]="os_language";export const F_os_modal=9007191486739992;g_enum_ss[9007191486739992]="os_modal";export const F_os_version=9007191114852513;g_enum_ss[9007191114852513]="os_version";export const F_pending_delay=9007190405524235;g_enum_ss[9007190405524235]="pending_delay";export const F_pending_interval=9007192438173725;g_enum_ss[9007192438173725]="pending_interval";export const F_pending_limit=9007190067147759;g_enum_ss[9007190067147759]="pending_limit";export const F_pending_parms=9007192550771863;g_enum_ss[9007192550771863]="pending_parms";export const F_pending_prereq=9007193690019779;g_enum_ss[9007193690019779]="pending_prereq";export const F_pending_targtime=9007192481613845;g_enum_ss[9007192481613845]="pending_targtime";export const F_polar_angle=9007193998710740;g_enum_ss[9007193998710740]="polar_angle";export const F_polar_radius=9007192867428455;g_enum_ss[9007192867428455]="polar_radius";export const F_row_kind=9007194217458287;g_enum_ss[9007194217458287]="row_kind";export const F_s_big_step_size=9007191004530853;g_enum_ss[9007191004530853]="s_big_step_size";export const F_s_block_id=9007194173043653;g_enum_ss[9007194173043653]="s_block_id";export const F_s_content_size=9007191211659509;g_enum_ss[9007191211659509]="s_content_size";export const F_s_position=9007193141830829;g_enum_ss[9007193141830829]="s_position";export const F_s_step_size=9007190382695348;g_enum_ss[9007190382695348]="s_step_size";export const F_s_window_size=9007191764866610;g_enum_ss[9007191764866610]="s_window_size";export const F_saturation=9007192754175272;g_enum_ss[9007192754175272]="saturation";export const F_sc1=9007194190551309;g_enum_ss[9007194190551309]="sc1";export const F_sc2=9007194140218452;g_enum_ss[9007194140218452]="sc2";export const F_screen_dpi=9007190692964076;g_enum_ss[9007190692964076]="screen_dpi";export const F_screen_horz=9007191043077712;g_enum_ss[9007191043077712]="screen_horz";export const F_screen_vert=9007191931743462;g_enum_ss[9007191931743462]="screen_vert";export const F_sop=9007192696754838;g_enum_ss[9007192696754838]="sop";export const F_spt=9007193063743885;g_enum_ss[9007193063743885]="spt";export const F_stop_color=9007192549699624;g_enum_ss[9007192549699624]="stop_color";export const F_stop_pos=9007191613969081;g_enum_ss[9007191613969081]="stop_pos";export const F_store_autoinc=9007191243807719;g_enum_ss[9007191243807719]="store_autoinc";export const F_store_indices=9007190832054383;g_enum_ss[9007190832054383]="store_indices";export const F_store_name=9007191598807537;g_enum_ss[9007191598807537]="store_name";export const F_sysobj=9007191699358926;g_enum_ss[9007191699358926]="sysobj";export const F_top=9007190493896459;g_enum_ss[9007190493896459]="top";export const F_touch_id=9007193790632677;g_enum_ss[9007193790632677]="touch_id";export const F_touch_kind=9007191578715210;g_enum_ss[9007191578715210]="touch_kind";export const F_ui_language=9007190058755785;g_enum_ss[9007190058755785]="ui_language";export const F_unicode=9007193563866243;g_enum_ss[9007193563866243]="unicode";export const F_unit_factor=9007193027031068;g_enum_ss[9007193027031068]="unit_factor";export const F_unit_to_base=9007191891603742;g_enum_ss[9007191891603742]="unit_to_base";export const F_value=9007190189063009;g_enum_ss[9007190189063009]="value";export const F_vv_canonical=9007192897808113;g_enum_ss[9007192897808113]="vv_canonical";export const F_vv_cat=9007190597610171;g_enum_ss[9007190597610171]="vv_cat";export const F_vv_data_xy=9007190248349349;g_enum_ss[9007190248349349]="vv_data_xy";export const F_vv_default=9007191915976154;g_enum_ss[9007191915976154]="vv_default";export const F_vv_dim=9007191990098741;g_enum_ss[9007191990098741]="vv_dim";export const F_vv_expand=9007193970411501;g_enum_ss[9007193970411501]="vv_expand";export const F_vv_fields=9007192545436688;g_enum_ss[9007192545436688]="vv_fields";export const F_vv_funck=9007192275848104;g_enum_ss[9007192275848104]="vv_funck";export const F_vv_parmk=9007190323301072;g_enum_ss[9007190323301072]="vv_parmk";export const F_vv_parmn=9007190407189167;g_enum_ss[9007190407189167]="vv_parmn";export const F_vv_parms=9007190189080120;g_enum_ss[9007190189080120]="vv_parms";export const F_vv_rec=9007191419025501;g_enum_ss[9007191419025501]="vv_rec";export const F_vv_typek=9007191523723486;g_enum_ss[9007191523723486]="vv_typek";export const F_vv_units=9007190115236112;g_enum_ss[9007190115236112]="vv_units";export const F_vv_val=9007194200798904;g_enum_ss[9007194200798904]="vv_val";export const F_when=9007193511812616;g_enum_ss[9007193511812616]="when";export const F_width=9007193183634940;g_enum_ss[9007193183634940]="width";export const F_window_horz=9007192929002776;g_enum_ss[9007192929002776]="window_horz";export const F_window_vert=9007190230517054;g_enum_ss[9007190230517054]="window_vert";export const F_x=9007191158315608;g_enum_ss[9007191158315608]="x";export const F_y=9007191175093227;g_enum_ss[9007191175093227]="y";export const F_z=9007191191870846;g_enum_ss[9007191191870846]="z";export const FK_CALC=9007193861195824;g_enum_ss[9007193861195824]="FK_CALC";export const FK_DERIVE=9007190428331434;g_enum_ss[9007190428331434]="FK_DERIVE";export const FK_DRAW=9007193473915159;g_enum_ss[9007193473915159]="FK_DRAW";export const FK_MACHINE=9007190883568738;g_enum_ss[9007190883568738]="FK_MACHINE";export const FLUSH=9007190152489735;g_enum_ss[9007190152489735]="FLUSH";export const FOL=9007190417540516;g_enum_ss[9007190417540516]="FOL";export const FOR_MEASURING=9007193724925426;g_enum_ss[9007193724925426]="FOR_MEASURING";export const FOR_PRINT=9007194133252538;g_enum_ss[9007194133252538]="FOR_PRINT";export const FOR_SCREEN=9007193814014199;g_enum_ss[9007193814014199]="FOR_SCREEN";export const HTTP_BUSY=9007193089154801;g_enum_ss[9007193089154801]="HTTP_BUSY";export const HTTP_DONE=9007192780479252;g_enum_ss[9007192780479252]="HTTP_DONE";export const HTTP_HEADERS=9007190260036102;g_enum_ss[9007190260036102]="HTTP_HEADERS";export const HTTP_START=9007190514846168;g_enum_ss[9007190514846168]="HTTP_START";export const HTTP_TIMEOUT=9007193489829839;g_enum_ss[9007193489829839]="HTTP_TIMEOUT";export const IDE_GROUP=9007190212561997;g_enum_ss[9007190212561997]="IDE_GROUP";export const IN_COLOR=9007193896084384;g_enum_ss[9007193896084384]="IN_COLOR";export const IN_DATE=9007191428278593;g_enum_ss[9007191428278593]="IN_DATE";export const IN_DATETIME=9007191973531512;g_enum_ss[9007191973531512]="IN_DATETIME";export const IN_EMAIL=9007192515492303;g_enum_ss[9007192515492303]="IN_EMAIL";export const IN_FILE=9007191289194571;g_enum_ss[9007191289194571]="IN_FILE";export const IN_MONTH=9007193690478909;g_enum_ss[9007193690478909]="IN_MONTH";export const IN_NUMBER=9007190066732008;g_enum_ss[9007190066732008]="IN_NUMBER";export const IN_PASSWORD=9007192691973136;g_enum_ss[9007192691973136]="IN_PASSWORD";export const IN_RANGE=9007190605840218;g_enum_ss[9007190605840218]="IN_RANGE";export const IN_TEL=9007192769142178;g_enum_ss[9007192769142178]="IN_TEL";export const IN_TEXT=9007193396778358;g_enum_ss[9007193396778358]="IN_TEXT";export const IN_TIME=9007192632800300;g_enum_ss[9007192632800300]="IN_TIME";export const IN_URL=9007190407697254;g_enum_ss[9007190407697254]="IN_URL";export const IN_WEEK=9007192669880341;g_enum_ss[9007192669880341]="IN_WEEK";export const JOINT_BEVEL=9007192746461094;g_enum_ss[9007192746461094]="JOINT_BEVEL";export const JOINT_MITER=9007190364436411;g_enum_ss[9007190364436411]="JOINT_MITER";export const JOINT_ROUND=9007192159087542;g_enum_ss[9007192159087542]="JOINT_ROUND";export const LANG_AMH=9007192671193202;g_enum_ss[9007192671193202]="AMH";export const LANG_ARA=9007190134477402;g_enum_ss[9007190134477402]="ARA";export const LANG_BEL=9007190660603587;g_enum_ss[9007190660603587]="BEL";export const LANG_BEN=9007190694158825;g_enum_ss[9007190694158825]="BEN";export const LANG_BUL=9007190126382803;g_enum_ss[9007190126382803]="BUL";export const LANG_BUR=9007190629711373;g_enum_ss[9007190629711373]="BUR";export const LANG_CAT=9007192050476800;g_enum_ss[9007192050476800]="CAT";export const LANG_CHS=9007192435229204;g_enum_ss[9007192435229204]="CHS";export const LANG_CHT=9007192418451585;g_enum_ss[9007192418451585]="CHT";export const LANG_CRO=9007192501353942;g_enum_ss[9007192501353942]="CRO";export const LANG_CZE=9007191795414016;g_enum_ss[9007191795414016]="CZE";export const LANG_DAN=9007192616113231;g_enum_ss[9007192616113231]="DAN";export const LANG_DEU=9007193304583990;g_enum_ss[9007193304583990]="DEU";export const LANG_ENG=9007191338197928;g_enum_ss[9007191338197928]="ENG";export const LANG_ENK=9007191271087452;g_enum_ss[9007191271087452]="ENK";export const LANG_ESL=9007190619864620;g_enum_ss[9007190619864620]="ESL";export const LANG_ESP=9007191005749857;g_enum_ss[9007191005749857]="ESP";export const LANG_FIN=9007191973916929;g_enum_ss[9007191973916929]="FIN";export const LANG_FRA=9007191317868575;g_enum_ss[9007191317868575]="FRA";export const LANG_FRC=9007191351423813;g_enum_ss[9007191351423813]="FRC";export const LANG_GEO=9007190543802441;g_enum_ss[9007190543802441]="GEO";export const LANG_GRE=9007190641761204;g_enum_ss[9007190641761204]="GRE";export const LANG_GUJ=9007193275891314;g_enum_ss[9007193275891314]="GUJ";export const LANG_HEB=9007190185389899;g_enum_ss[9007190185389899]="HEB";export const LANG_HIN=9007193875671363;g_enum_ss[9007193875671363]="HIN";export const LANG_HUN=9007193878922767;g_enum_ss[9007193878922767]="HUN";export const LANG_ICE=9007191223918851;g_enum_ss[9007191223918851]="ICE";export const LANG_IND=9007190769098757;g_enum_ss[9007190769098757]="IND";export const LANG_ITA=9007191153998256;g_enum_ss[9007191153998256]="ITA";export const LANG_JAP=9007193001251419;g_enum_ss[9007193001251419]="JAP";export const LANG_KOR=9007191762726468;g_enum_ss[9007191762726468]="KOR";export const LANG_MAL=9007192711284782;g_enum_ss[9007192711284782]="MAL";export const LANG_MAR=9007192342177164;g_enum_ss[9007192342177164]="MAR";export const LANG_NED=9007190343662887;g_enum_ss[9007190343662887]="NED";export const LANG_NOR=9007190042651483;g_enum_ss[9007190042651483]="NOR";export const LANG_ORI=9007193024574120;g_enum_ss[9007193024574120]="ORI";export const LANG_PER=9007190032174083;g_enum_ss[9007190032174083]="PER";export const LANG_POL=9007194228049783;g_enum_ss[9007194228049783]="POL";export const LANG_POR=9007190033748201;g_enum_ss[9007190033748201]="POR";export const LANG_PUN=9007190499284391;g_enum_ss[9007190499284391]="PUN";export const LANG_ROM=9007190414398278;g_enum_ss[9007190414398278]="ROM";export const LANG_RUS=9007190849630634;g_enum_ss[9007190849630634]="RUS";export const LANG_SLK=9007191582004616;g_enum_ss[9007191582004616]="SLK";export const LANG_SLV=9007191263229855;g_enum_ss[9007191263229855]="SLV";export const LANG_SVE=9007190948692236;g_enum_ss[9007190948692236]="SVE";export const LANG_TAG=9007192417804164;g_enum_ss[9007192417804164]="TAG";export const LANG_TAM=9007192317138450;g_enum_ss[9007192317138450]="TAM";export const LANG_TEL=9007192871388257;g_enum_ss[9007192871388257]="TEL";export const LANG_THA=9007190973501907;g_enum_ss[9007190973501907]="THA";export const LANG_TUR=9007192504943663;g_enum_ss[9007192504943663]="TUR";export const LANG_UKR=9007194159021638;g_enum_ss[9007194159021638]="UKR";export const LANG_URD=9007194292109757;g_enum_ss[9007194292109757]="URD";export const LANG_VIE=9007191473610720;g_enum_ss[9007191473610720]="VIE";export const LEFT=9007190711321898;g_enum_ss[9007190711321898]="LEFT";export const LINEAR_GRADIENT=9007191222812415;g_enum_ss[9007191222812415]="LINEAR_GRADIENT";export const LITTLE_END=9007190564557437;g_enum_ss[9007190564557437]="LITTLE_END";export const LOADER_BUSY=9007191245350440;g_enum_ss[9007191245350440]="LOADER_BUSY";export const LOADER_FAIL=9007192353485765;g_enum_ss[9007192353485765]="LOADER_FAIL";export const LOADER_OK=9007191791238983;g_enum_ss[9007191791238983]="LOADER_OK";export const LOC_ARRAY=9007192251196669;g_enum_ss[9007192251196669]="LOC_ARRAY";export const LOC_INVERSE=9007192773860012;g_enum_ss[9007192773860012]="LOC_INVERSE";export const LOC_NOTES=9007191339031389;g_enum_ss[9007191339031389]="LOC_NOTES";export const LOC_PLAIN=9007192212100724;g_enum_ss[9007192212100724]="LOC_PLAIN";export const LOC_PLURAL=9007190766928558;g_enum_ss[9007190766928558]="LOC_PLURAL";export const LOCMAN_CELL_COLOR=9007194049102430;g_enum_ss[9007194049102430]="LOCMAN_CELL_COLOR";export const LOCMAN_CELL_MSGID=9007194246606917;g_enum_ss[9007194246606917]="LOCMAN_CELL_MSGID";export const LOCMAN_CELL_SELECTED=9007190264240958;g_enum_ss[9007190264240958]="LOCMAN_CELL_SELECTED";export const LOCMAN_LANG_TOGGLE=9007192272469839;g_enum_ss[9007192272469839]="LOCMAN_LANG_TOGGLE";export const LOCMAN_MAPPING=9007191327081308;g_enum_ss[9007191327081308]="LOCMAN_MAPPING";export const LOCMAN_NMISSING=9007190550673100;g_enum_ss[9007190550673100]="LOCMAN_NMISSING";export const LOCMAN_NTOT=9007193217620787;g_enum_ss[9007193217620787]="LOCMAN_NTOT";export const LOCMAN_TOGGLE=9007192047494738;g_enum_ss[9007192047494738]="LOCMAN_TOGGLE";export const M_std=9007191858773372;g_enum_ss[9007191858773372]="std";export const MENUBAR_ACTION=9007193537665432;g_enum_ss[9007193537665432]="MENUBAR_ACTION";export const MENUBAR_APP_ABOUT=9007191529154043;g_enum_ss[9007191529154043]="MENUBAR_APP_ABOUT";export const MENUBAR_APP_MENU=9007193248907749;g_enum_ss[9007193248907749]="MENUBAR_APP_MENU";export const MENUBAR_APP_QUIT=9007190363491817;g_enum_ss[9007190363491817]="MENUBAR_APP_QUIT";export const MENUBAR_CHECKMARK=9007191229884003;g_enum_ss[9007191229884003]="MENUBAR_CHECKMARK";export const MENUBAR_CODE=9007192602527575;g_enum_ss[9007192602527575]="MENUBAR_CODE";export const MENUBAR_ENABLED=9007194231244887;g_enum_ss[9007194231244887]="MENUBAR_ENABLED";export const MENUBAR_HELP_MENU=9007190793541657;g_enum_ss[9007190793541657]="MENUBAR_HELP_MENU";export const MENUBAR_SHORTCUT=9007191126016036;g_enum_ss[9007191126016036]="MENUBAR_SHORTCUT";export const MICRO_CLEAR=9007191144004659;g_enum_ss[9007191144004659]="clear";export const MICRO_DELTA=9007190759967260;g_enum_ss[9007190759967260]="Œî";export const MICRO_RENUM=9007191665051429;g_enum_ss[9007191665051429]="renum";export const MICRO_TRUNC=9007191763176072;g_enum_ss[9007191763176072]="trunc";export const MSG_ENTER=9007194127162657;g_enum_ss[9007194127162657]="MSG_ENTER";export const MSG_LEAVE=9007190445750868;g_enum_ss[9007190445750868]="MSG_LEAVE";export const MSG_SOCKET_CLOSED=9007194294890029;g_enum_ss[9007194294890029]="MSG_SOCKET_CLOSED";export const MSG_SOCKET_CONNECTED=9007191288201976;g_enum_ss[9007191288201976]="MSG_SOCKET_CONNECTED";export const MSG_SOCKET_DATA=9007191526886701;g_enum_ss[9007191526886701]="MSG_SOCKET_DATA";export const MSG_SOCKET_ERR=9007193723465476;g_enum_ss[9007193723465476]="MSG_SOCKET_ERR";export const MSG_SOCKET_TIMEOUT=9007194132300272;g_enum_ss[9007194132300272]="MSG_SOCKET_TIMEOUT";export const N_acre=9007190952149985;g_enum_ss[9007190952149985]="acre";export const N_angstrom=9007190246448751;g_enum_ss[9007190246448751]="angstrom";export const N_bar=9007193796463405;g_enum_ss[9007193796463405]="bar";export const N_BTU=9007192621143025;g_enum_ss[9007192621143025]="BTU";export const N_calorie_th=9007190496803932;g_enum_ss[9007190496803932]="calorie_th";export const N_calorie=9007191281485983;g_enum_ss[9007191281485983]="calorie";export const N_cm=9007192221800628;g_enum_ss[9007192221800628]="cm";export const N_cu_ft=9007192145249835;g_enum_ss[9007192145249835]="cu_ft";export const N_cu_yd=9007192111944860;g_enum_ss[9007192111944860]="cu_yd";export const N_cup=9007191290327956;g_enum_ss[9007191290327956]="cup";export const N_day=9007193058995218;g_enum_ss[9007193058995218]="day";export const N_deg=9007193091858908;g_enum_ss[9007193091858908]="deg";export const N_degC=9007193146176845;g_enum_ss[9007193146176845]="degC";export const N_degF=9007193062288750;g_enum_ss[9007193062288750]="degF";export const N_degK=9007193011955893;g_enum_ss[9007193011955893]="degK";export const N_dm=9007191685063915;g_enum_ss[9007191685063915]="dm";export const N_dozen=9007190884823382;g_enum_ss[9007190884823382]="dozen";export const N_each=9007191641935777;g_enum_ss[9007191641935777]="each";export const N_ev=9007191869764819;g_enum_ss[9007191869764819]="ev";export const N_foot=9007190366725068;g_enum_ss[9007190366725068]="foot";export const N_ft_per_min=9007191338235573;g_enum_ss[9007191338235573]="ft_per_min";export const N_ft_per_sec=9007190336618084;g_enum_ss[9007190336618084]="ft_per_sec";export const N_gal=9007190056891976;g_enum_ss[9007190056891976]="gal";export const N_gigajoule=9007192706527421;g_enum_ss[9007192706527421]="gigajoule";export const N_gigawatt=9007194053251940;g_enum_ss[9007194053251940]="gigawatt";export const N_gradian=9007192220160448;g_enum_ss[9007192220160448]="gradian";export const N_grain=9007190694708491;g_enum_ss[9007190694708491]="grain";export const N_gram=9007190332562299;g_enum_ss[9007190332562299]="gram";export const N_gross=9007190031983780;g_enum_ss[9007190031983780]="gross";export const N_hectare=9007190901376482;g_enum_ss[9007190901376482]="hectare";export const N_hour=9007191982557918;g_enum_ss[9007191982557918]="hour";export const N_hp_hr=9007194287823911;g_enum_ss[9007194287823911]="hp_hr";export const N_hp=9007191733425296;g_enum_ss[9007191733425296]="hp";export const N_hz=9007191901201486;g_enum_ss[9007191901201486]="hz";export const N_inch=9007194292702924;g_enum_ss[9007194292702924]="inch";export const N_joule=9007190187579077;g_enum_ss[9007190187579077]="joule";export const N_kg=9007192388193722;g_enum_ss[9007192388193722]="kg";export const N_kilowatt=9007191577018041;g_enum_ss[9007191577018041]="kilowatt";export const N_km_per_hr=9007192069054991;g_enum_ss[9007192069054991]="km_per_hr";export const N_km=9007192220417532;g_enum_ss[9007192220417532]="km";export const N_kw_hr=9007191251924533;g_enum_ss[9007191251924533]="kw_hr";export const N_l=9007192691155340;g_enum_ss[9007192691155340]="l";export const N_lbf=9007191086312484;g_enum_ss[9007191086312484]="lbf";export const N_m_per_min=9007191208978500;g_enum_ss[9007191208978500]="m_per_min";export const N_m_per_sec=9007192948847325;g_enum_ss[9007192948847325]="m_per_sec";export const N_m=9007192707932959;g_enum_ss[9007192707932959]="m";export const N_megawatt=9007192632365214;g_enum_ss[9007192632365214]="megawatt";export const N_mi_per_hr=9007194188992065;g_enum_ss[9007194188992065]="mi_per_hr";export const N_microsec=9007191928525241;g_enum_ss[9007191928525241]="microsec";export const N_mile=9007191320210973;g_enum_ss[9007191320210973]="mile";export const N_millisec=9007193781384766;g_enum_ss[9007193781384766]="millisec";export const N_milliwatt=9007193810245337;g_enum_ss[9007193810245337]="milliwatt";export const N_minute=9007193773574448;g_enum_ss[9007193773574448]="minute";export const N_ml=9007192304702985;g_enum_ss[9007192304702985]="ml";export const N_mm=9007192287925366;g_enum_ss[9007192287925366]="mm";export const N_month=9007192916123494;g_enum_ss[9007192916123494]="month";export const N_nanosec=9007193653692175;g_enum_ss[9007193653692175]="nanosec";export const N_nautmile=9007193990526597;g_enum_ss[9007193990526597]="nautmile";export const N_newton=9007191690160911;g_enum_ss[9007191690160911]="newton";export const N_nm=9007192288072461;g_enum_ss[9007192288072461]="nm";export const N_ounce=9007191756739322;g_enum_ss[9007191756739322]="ounce";export const N_oz=9007192070110509;g_enum_ss[9007192070110509]="oz";export const N_pascal=9007191181745268;g_enum_ss[9007191181745268]="pascal";export const N_picosec=9007194026274698;g_enum_ss[9007194026274698]="picosec";export const N_pint=9007194217411433;g_enum_ss[9007194217411433]="pint";export const N_pound=9007192986587514;g_enum_ss[9007192986587514]="pound";export const N_psi=9007193052403416;g_enum_ss[9007193052403416]="psi";export const N_quart=9007193408590039;g_enum_ss[9007193408590039]="quart";export const N_radian=9007192509132641;g_enum_ss[9007192509132641]="radian";export const N_revs=9007193944016738;g_enum_ss[9007193944016738]="revs";export const N_rpm=9007193071704757;g_enum_ss[9007193071704757]="rpm";export const N_sec=9007190222245725;g_enum_ss[9007190222245725]="sec";export const N_slug=9007193082855475;g_enum_ss[9007193082855475]="slug";export const N_sq_cm=9007190673362901;g_enum_ss[9007190673362901]="sq_cm";export const N_sq_ft=9007190219822735;g_enum_ss[9007190219822735]="sq_ft";export const N_sq_in=9007190621352758;g_enum_ss[9007190621352758]="sq_in";export const N_sq_m=9007190630415248;g_enum_ss[9007190630415248]="sq_m";export const N_sq_mi=9007190536876283;g_enum_ss[9007190536876283]="sq_mi";export const N_sq_mm=9007190603986759;g_enum_ss[9007190603986759]="sq_mm";export const N_sq_yd=9007190182574808;g_enum_ss[9007190182574808]="sq_yd";export const N_tbsp=9007191098858601;g_enum_ss[9007191098858601]="tbsp";export const N_therm_ec=9007193085175687;g_enum_ss[9007193085175687]="therm_ec";export const N_therm_us=9007192819396807;g_enum_ss[9007192819396807]="therm_us";export const N_ton=9007191865357341;g_enum_ss[9007191865357341]="ton";export const N_tonne=9007192984145156;g_enum_ss[9007192984145156]="tonne";export const N_torr=9007191848403073;g_enum_ss[9007191848403073]="torr";export const N_troy_ounce=9007194149819487;g_enum_ss[9007194149819487]="troy_ounce";export const N_troy_pound=9007191827535779;g_enum_ss[9007191827535779]="troy_pound";export const N_tsp=9007192029882127;g_enum_ss[9007192029882127]="tsp";export const N_um=9007191754881342;g_enum_ss[9007191754881342]="um";export const N_watt=9007192594329260;g_enum_ss[9007192594329260]="watt";export const N_week=9007193847702628;g_enum_ss[9007193847702628]="week";export const N_yard=9007192331946152;g_enum_ss[9007192331946152]="yard";export const N_year=9007190800547617;g_enum_ss[9007190800547617]="year";export const NK_ASSET=9007190643777247;g_enum_ss[9007190643777247]="NK_ASSET";export const NK_COLOR=9007192775278852;g_enum_ss[9007192775278852]="NK_COLOR";export const NK_CONST=9007193063933008;g_enum_ss[9007193063933008]="NK_CONST";export const NK_ENUM=9007191848843980;g_enum_ss[9007191848843980]="NK_ENUM";export const NK_FUNC=9007191066049755;g_enum_ss[9007191066049755]="NK_FUNC";export const NK_GRAD=9007193648410069;g_enum_ss[9007193648410069]="NK_GRAD";export const NK_RECORD=9007194003427904;g_enum_ss[9007194003427904]="NK_RECORD";export const NK_TIMER=9007191692367070;g_enum_ss[9007191692367070]="NK_TIMER";export const NK_UFAM=9007192571900208;g_enum_ss[9007192571900208]="NK_UFAM";export const NK_UNIT=9007191777207931;g_enum_ss[9007191777207931]="NK_UNIT";export const NK_VAR=9007190845812490;g_enum_ss[9007190845812490]="NK_VAR";export const ORDER_BTLR=9007193226990082;g_enum_ss[9007193226990082]="ORDER_BTLR";export const ORDER_BTRL=9007192523315822;g_enum_ss[9007192523315822]="ORDER_BTRL";export const ORDER_LRBT=9007192935571706;g_enum_ss[9007192935571706]="ORDER_LRBT";export const ORDER_LRTB=9007192568038206;g_enum_ss[9007192568038206]="ORDER_LRTB";export const ORDER_RLBT=9007192915196142;g_enum_ss[9007192915196142]="ORDER_RLBT";export const ORDER_RLTB=9007192409601906;g_enum_ss[9007192409601906]="ORDER_RLTB";export const ORDER_TBLR=9007191520272206;g_enum_ss[9007191520272206]="ORDER_TBLR";export const ORDER_TBRL=9007190678537210;g_enum_ss[9007190678537210]="ORDER_TBRL";export const ORIENTATION_LANDSCAPE=9007191010543533;g_enum_ss[9007191010543533]="ORIENTATION_LANDSCAPE";export const ORIENTATION_PORTRAIT=9007191978835675;g_enum_ss[9007191978835675]="ORIENTATION_PORTRAIT";export const OS_AND=9007193360895287;g_enum_ss[9007193360895287]="OS_AND";export const OS_IOS=9007191984026743;g_enum_ss[9007191984026743]="OS_IOS";export const OS_OSX=9007190362755304;g_enum_ss[9007190362755304]="OS_OSX";export const OS_WEB=9007190607726472;g_enum_ss[9007190607726472]="OS_WEB";export const OS_WIN=9007191612412136;g_enum_ss[9007191612412136]="OS_WIN";export const PK_NAMED=9007193125983004;g_enum_ss[9007193125983004]="PK_NAMED";export const PK_POS=9007191465674587;g_enum_ss[9007191465674587]="PK_POS";export const PK_REST=9007191840610765;g_enum_ss[9007191840610765]="PK_REST";export const PLURAL_DEFAULT=9007191673733887;g_enum_ss[9007191673733887]="PLURAL_DEFAULT";export const PLURAL_FEW=9007191107244612;g_enum_ss[9007191107244612]="PLURAL_FEW";export const PLURAL_MANY=9007193773251461;g_enum_ss[9007193773251461]="PLURAL_MANY";export const PLURAL_ONE=9007193337328970;g_enum_ss[9007193337328970]="PLURAL_ONE";export const PLURAL_TWO=9007191430822928;g_enum_ss[9007191430822928]="PLURAL_TWO";export const PLURAL_ZERO=9007191796263072;g_enum_ss[9007191796263072]="PLURAL_ZERO";export const POP=9007192026394006;g_enum_ss[9007192026394006]="POP";export const PRINT_FIRST_PAGE=9007191751010783;g_enum_ss[9007191751010783]="PRINT_FIRST_PAGE";export const PRINT_IS_COLOR=9007192510406563;g_enum_ss[9007192510406563]="PRINT_IS_COLOR";export const PRINT_LAST_PAGE=9007191105806867;g_enum_ss[9007191105806867]="PRINT_LAST_PAGE";export const PRINT_NCOPIES=9007193080038706;g_enum_ss[9007193080038706]="PRINT_NCOPIES";export const PRINT_ORIENTATION=9007192098519467;g_enum_ss[9007192098519467]="PRINT_ORIENTATION";export const PRINT_PAGENUM=9007190484000188;g_enum_ss[9007190484000188]="PRINT_PAGENUM";export const PRINT_PHASE=9007190644145138;g_enum_ss[9007190644145138]="PRINT_PHASE";export const PRINT_RESOLUTION=9007193575630101;g_enum_ss[9007193575630101]="PRINT_RESOLUTION";export const PRINT_ROWX=9007190982033607;g_enum_ss[9007190982033607]="PRINT_ROWX";export const R_a_block_desc=9007190030980491;g_enum_ss[9007190030980491]="a_block_desc";export const R_a_block=9007193255732081;g_enum_ss[9007193255732081]="a_block";export const R_a_canvas=9007192149538796;g_enum_ss[9007192149538796]="a_canvas";export const R_a_client_conn=9007190019079342;g_enum_ss[9007190019079342]="a_client_conn";export const R_a_date=9007191823293908;g_enum_ss[9007191823293908]="a_date";export const R_a_event=9007191791712392;g_enum_ss[9007191791712392]="a_event";export const R_a_family=9007191614147856;g_enum_ss[9007191614147856]="a_family";export const R_a_fsm=9007193322986362;g_enum_ss[9007193322986362]="a_fsm";export const R_a_gradient_stop=9007193449929421;g_enum_ss[9007193449929421]="a_gradient_stop";export const R_a_gradient=9007194155014896;g_enum_ss[9007194155014896]="a_gradient";export const R_a_hsv=9007192252978469;g_enum_ss[9007192252978469]="a_hsv";export const R_a_html_pulldown=9007194212296109;g_enum_ss[9007194212296109]="a_html_pulldown";export const R_a_http_response=9007190750294694;g_enum_ss[9007190750294694]="a_http_response";export const R_a_input_field=9007192954337099;g_enum_ss[9007192954337099]="a_input_field";export const R_a_internet_link=9007192819581550;g_enum_ss[9007192819581550]="a_internet_link";export const R_a_ixdb_index=9007192727081164;g_enum_ss[9007192727081164]="a_ixdb_index";export const R_a_ixdb_schema=9007192635844523;g_enum_ss[9007192635844523]="a_ixdb_schema";export const R_a_ixdb_store=9007191371355665;g_enum_ss[9007191371355665]="a_ixdb_store";export const R_a_meta_rec=9007194208572544;g_enum_ss[9007194208572544]="a_meta_rec";export const R_a_micro_step=9007193135442035;g_enum_ss[9007193135442035]="a_micro_step";export const R_a_mod_def=9007190587426296;g_enum_ss[9007190587426296]="a_mod_def";export const R_a_polar_coord=9007193787221650;g_enum_ss[9007193787221650]="a_polar_coord";export const R_a_rect=9007193669085694;g_enum_ss[9007193669085694]="a_rect";export const R_a_runtime=9007191881640948;g_enum_ss[9007191881640948]="a_runtime";export const R_a_scroll_link_record=9007192611723630;g_enum_ss[9007192611723630]="a_scroll_link_record";export const R_a_unit=9007193478373070;g_enum_ss[9007193478373070]="a_unit";export const R_a_xy=9007191434709187;g_enum_ss[9007191434709187]="a_xy";export const R_a_xyz=9007191470998331;g_enum_ss[9007191470998331]="a_xyz";export const RADIAL_GRADIENT=9007192309010309;g_enum_ss[9007192309010309]="RADIAL_GRADIENT";export const RIGHT=9007193840331351;g_enum_ss[9007193840331351]="RIGHT";export const RTL_SS=9007190479220938;g_enum_ss[9007190479220938]="RTL_SS";export const STEP_BEZIER1=9007191502952612;g_enum_ss[9007191502952612]="STEP_BEZIER1";export const STEP_BEZIER2=9007191553285469;g_enum_ss[9007191553285469]="STEP_BEZIER2";export const STEP_LINE=9007193322169928;g_enum_ss[9007193322169928]="STEP_LINE";export const STEP_MOVE=9007193426522407;g_enum_ss[9007193426522407]="STEP_MOVE";export const TIMEZONE_ANCHORAGE=9007192361310267;g_enum_ss[9007192361310267]="TIMEZONE_ANCHORAGE";export const TIMEZONE_ATHENS=9007190981516388;g_enum_ss[9007190981516388]="TIMEZONE_ATHENS";export const TIMEZONE_BAKER_ISLAND=9007191507011446;g_enum_ss[9007191507011446]="TIMEZONE_BAKER_ISLAND";export const TIMEZONE_BANGKOK=9007191049117670;g_enum_ss[9007191049117670]="TIMEZONE_BANGKOK";export const TIMEZONE_CARACAS=9007191813271397;g_enum_ss[9007191813271397]="TIMEZONE_CARACAS";export const TIMEZONE_CHICAGO=9007190415525059;g_enum_ss[9007190415525059]="TIMEZONE_CHICAGO";export const TIMEZONE_DELHI=9007193355025641;g_enum_ss[9007193355025641]="TIMEZONE_DELHI";export const TIMEZONE_DENVER=9007190633449477;g_enum_ss[9007190633449477]="TIMEZONE_DENVER";export const TIMEZONE_DHAKA=9007190570556172;g_enum_ss[9007190570556172]="TIMEZONE_DHAKA";export const TIMEZONE_DUBAI=9007190654943714;g_enum_ss[9007190654943714]="TIMEZONE_DUBAI";export const TIMEZONE_FERNANDO=9007193555368666;g_enum_ss[9007193555368666]="TIMEZONE_FERNANDO";export const TIMEZONE_GMT=9007193944953035;g_enum_ss[9007193944953035]="TIMEZONE_GMT";export const TIMEZONE_HONG_KONG=9007190874557581;g_enum_ss[9007190874557581]="TIMEZONE_HONG_KONG";export const TIMEZONE_HONOLULU=9007190810715811;g_enum_ss[9007190810715811]="TIMEZONE_HONOLULU";export const TIMEZONE_JEDDAH=9007193893625221;g_enum_ss[9007193893625221]="TIMEZONE_JEDDAH";export const TIMEZONE_KABUL=9007193654106028;g_enum_ss[9007193654106028]="TIMEZONE_KABUL";export const TIMEZONE_KARACHI=9007190273642218;g_enum_ss[9007190273642218]="TIMEZONE_KARACHI";export const TIMEZONE_KIRITIMATI=9007193401833546;g_enum_ss[9007193401833546]="TIMEZONE_KIRITIMATI";export const TIMEZONE_LONDON=9007194171648235;g_enum_ss[9007194171648235]="TIMEZONE_LONDON";export const TIMEZONE_LOS_ANGELES=9007192289237247;g_enum_ss[9007192289237247]="TIMEZONE_LOS_ANGELES";export const TIMEZONE_MARQUESAS=9007194114222817;g_enum_ss[9007194114222817]="TIMEZONE_MARQUESAS";export const TIMEZONE_NEW_YORK=9007191030228181;g_enum_ss[9007191030228181]="TIMEZONE_NEW_YORK";export const TIMEZONE_NOUMEA=9007192814753950;g_enum_ss[9007192814753950]="TIMEZONE_NOUMEA";export const TIMEZONE_NUKU=9007191069256452;g_enum_ss[9007191069256452]="TIMEZONE_NUKU";export const TIMEZONE_PAGO_PAGO=9007193682191764;g_enum_ss[9007193682191764]="TIMEZONE_PAGO_PAGO";export const TIMEZONE_PARIS=9007193076914724;g_enum_ss[9007193076914724]="TIMEZONE_PARIS";export const TIMEZONE_PRAIA=9007190257414500;g_enum_ss[9007190257414500]="TIMEZONE_PRAIA";export const TIMEZONE_RIO=9007192664222413;g_enum_ss[9007192664222413]="TIMEZONE_RIO";export const TIMEZONE_SANTIAGO=9007191908316559;g_enum_ss[9007191908316559]="TIMEZONE_SANTIAGO";export const TIMEZONE_ST_JOHNS=9007192657713671;g_enum_ss[9007192657713671]="TIMEZONE_ST_JOHNS";export const TIMEZONE_SYDNEY=9007193946321621;g_enum_ss[9007193946321621]="TIMEZONE_SYDNEY";export const TIMEZONE_TEHRAN=9007190053395879;g_enum_ss[9007190053395879]="TIMEZONE_TEHRAN";export const TIMEZONE_TOKYO=9007192145655909;g_enum_ss[9007192145655909]="TIMEZONE_TOKYO";export const TIMEZONE_UTC=9007194004136273;g_enum_ss[9007194004136273]="TIMEZONE_UTC";export const TIMEZONE_WELLINGTON=9007193118918360;g_enum_ss[9007193118918360]="TIMEZONE_WELLINGTON";export const TOUCH_FINGER=9007193390822830;g_enum_ss[9007193390822830]="TOUCH_FINGER";export const TOUCH_NONE=9007194053980865;g_enum_ss[9007194053980865]="TOUCH_NONE";export const TOUCH_STYLUS=9007192517172985;g_enum_ss[9007192517172985]="TOUCH_STYLUS";export const TYPE_ANY=9007193166326998;g_enum_ss[9007193166326998]="TYPE_ANY";export const TYPE_ARRAY=9007192562138289;g_enum_ss[9007192562138289]="TYPE_ARRAY";export const TYPE_ARRAY2=9007193947376185;g_enum_ss[9007193947376185]="TYPE_ARRAY2";export const TYPE_ARRAY3=9007193930598566;g_enum_ss[9007193930598566]="TYPE_ARRAY3";export const TYPE_ARRAY4=9007193980931423;g_enum_ss[9007193980931423]="TYPE_ARRAY4";export const TYPE_BITS=9007193317321180;g_enum_ss[9007193317321180]="TYPE_BITS";export const TYPE_BYTES=9007191344815103;g_enum_ss[9007191344815103]="TYPE_BYTES";export const TYPE_CHANGELIST=9007190643838260;g_enum_ss[9007190643838260]="TYPE_CHANGELIST";export const TYPE_COLOR=9007190326328899;g_enum_ss[9007190326328899]="TYPE_COLOR";export const TYPE_DATE=9007191452059640;g_enum_ss[9007191452059640]="TYPE_DATE";export const TYPE_ENUM=9007190307525209;g_enum_ss[9007190307525209]="TYPE_ENUM";export const TYPE_ERR=9007191320260475;g_enum_ss[9007191320260475]="TYPE_ERR";export const TYPE_FUNC=9007190174688282;g_enum_ss[9007190174688282]="TYPE_FUNC";export const TYPE_IMAGE=9007192176669305;g_enum_ss[9007192176669305]="TYPE_IMAGE";export const TYPE_MEAS=9007193854053742;g_enum_ss[9007193854053742]="TYPE_MEAS";export const TYPE_NUM=9007191566577692;g_enum_ss[9007191566577692]="TYPE_NUM";export const TYPE_OBJECT=9007194039983755;g_enum_ss[9007194039983755]="TYPE_OBJECT";export const TYPE_PATTERN=9007191926742254;g_enum_ss[9007191926742254]="TYPE_PATTERN";export const TYPE_PTR=9007191967432934;g_enum_ss[9007191967432934]="TYPE_PTR";export const TYPE_RECORD=9007194281227577;g_enum_ss[9007194281227577]="TYPE_RECORD";export const TYPE_SOUND=9007190679494275;g_enum_ss[9007190679494275]="TYPE_SOUND";export const TYPE_STR=9007190249956539;g_enum_ss[9007190249956539]="TYPE_STR";export const TYPE_TREE=9007193022501804;g_enum_ss[9007193022501804]="TYPE_TREE";export const TYPE_U=9007192898065963;g_enum_ss[9007192898065963]="TYPE_U";export const TYPE_VIDEO=9007192435016199;g_enum_ss[9007192435016199]="TYPE_VIDEO";export const TYPE_VOID=9007192290118574;g_enum_ss[9007192290118574]="TYPE_VOID";export const TYPE_YESNO=9007190779215148;g_enum_ss[9007190779215148]="TYPE_YESNO";export const UNICODE_BE=9007190643288538;g_enum_ss[9007190643288538]="UNICODE_BE";export const UNICODE_LE=9007193528641648;g_enum_ss[9007193528641648]="UNICODE_LE";export const UTF8=9007192599909964;g_enum_ss[9007192599909964]="UTF8";export const V_debug_blocklist=9007192777431909;g_enum_ss[9007192777431909]="debug_blocklist";export const V_elapsed_raw=9007190632975073;g_enum_ss[9007190632975073]="elapsed_raw";export const V_elapsed=9007191601483304;g_enum_ss[9007191601483304]="elapsed";export const V_families=9007192441875844;g_enum_ss[9007192441875844]="families";export const V_META=9007194112371461;g_enum_ss[9007194112371461]="META";export const V_now_raw=9007192574335121;g_enum_ss[9007192574335121]="now_raw";export const V_now=9007192088951800;g_enum_ss[9007192088951800]="now";export const V_runtime=9007191746221364;g_enum_ss[9007191746221364]="runtime";export const V_time_launched=9007193857655116;g_enum_ss[9007193857655116]="time_launched";export const V_unit_to_family=9007192304366723;g_enum_ss[9007192304366723]="unit_to_family";export const VAL=9007192950101122;g_enum_ss[9007192950101122]="VAL";export const VNP=9007191438100009;g_enum_ss[9007191438100009]="VNP";export const WEBSOCK_CLOSE=9007191180554640;g_enum_ss[9007191180554640]="WEBSOCK_CLOSE";export const WEBSOCK_ERROR=9007194030626010;g_enum_ss[9007194030626010]="WEBSOCK_ERROR";export const WEBSOCK_OPEN=9007192997448236;g_enum_ss[9007192997448236]="WEBSOCK_OPEN";export const Y_Angle=9007191340652178;g_enum_ss[9007191340652178]="Angle";export const Y_Area=9007192203099294;g_enum_ss[9007192203099294]="Area";export const Y_Energy=9007190240949311;g_enum_ss[9007190240949311]="Energy";export const Y_Force=9007190127307486;g_enum_ss[9007190127307486]="Force";export const Y_Frequency=9007194035908891;g_enum_ss[9007194035908891]="Frequency";export const Y_Length=9007193164009787;g_enum_ss[9007193164009787]="Length";export const Y_Mass=9007192445499647;g_enum_ss[9007192445499647]="Mass";export const Y_Power=9007193650645924;g_enum_ss[9007193650645924]="Power";export const Y_Pressure=9007192495556120;g_enum_ss[9007192495556120]="Pressure";export const Y_Scalar=9007191994712031;g_enum_ss[9007191994712031]="Scalar";export const Y_Speed=9007194016706446;g_enum_ss[9007194016706446]="Speed";export const Y_Temperature=9007191653401759;g_enum_ss[9007191653401759]="Temperature";export const Y_Time=9007193033544522;g_enum_ss[9007193033544522]="Time";export const Y_Volume=9007192707741773;g_enum_ss[9007192707741773]="Volume",FIELDS[F_air_version]=!0,FIELDS[F_app_version]=!0,FIELDS[F_args]=!0,FIELDS[F_base_to_unit]=!0,FIELDS[F_bchildren]=!0,FIELDS[F_bdepth]=!0,FIELDS[F_bexpanded]=!0,FIELDS[F_bkind]=!0,FIELDS[F_bname]=!0,FIELDS[F_bobject]=!0,FIELDS[F_box]=!0,FIELDS[F_boxtot]=!0,FIELDS[F_btracks]=!0,FIELDS[F_callback]=!0,FIELDS[F_cell_id]=!0,FIELDS[F_cell_seq]=!0,FIELDS[F_cell]=!0,FIELDS[F_client_bytes_in]=!0,FIELDS[F_client_bytes_out]=!0;FIELDS[F_client_channel]=!0,FIELDS[F_client_status]=!0,FIELDS[F_code_coverage]=!0,FIELDS[F_cpu_kind]=!0,FIELDS[F_cursor_changed]=!0,FIELDS[F_date_city]=!0,FIELDS[F_date_day]=!0,FIELDS[F_date_hour]=!0,FIELDS[F_date_minute]=!0,FIELDS[F_date_month]=!0,FIELDS[F_date_second]=!0,FIELDS[F_date_year]=!0,FIELDS[F_db_name]=!0,FIELDS[F_db_stores]=!0,FIELDS[F_db_ver]=!0,FIELDS[F_evkind]=!0,FIELDS[F_fam_base]=!0,FIELDS[F_fam_dim]=!0,FIELDS[F_fam_nonlinear]=!0,FIELDS[F_fam_units]=!0;FIELDS[F_fsm_state]=!0,FIELDS[F_full_screen]=!0,FIELDS[9007192019487062]=!0,FIELDS[F_gamec_butt_ix]=!0,FIELDS[F_gamec_id]=!0,FIELDS[9007190685355017]=!0,FIELDS[9007190584689303]=!0,FIELDS[9007191407266315]=!0,FIELDS[9007191642152981]=!0,FIELDS[F_global_x]=!0,FIELDS[F_global_y]=!0,FIELDS[F_grad_angle]=!0,FIELDS[F_grad_centerx]=!0,FIELDS[F_grad_centery]=!0,FIELDS[F_grad_focusx]=!0,FIELDS[F_grad_focusy]=!0,FIELDS[F_grad_radius_inner]=!0,FIELDS[F_grad_radius_outer]=!0,FIELDS[F_grad_shape]=!0,FIELDS[F_grad_stops]=!0;FIELDS[F_grad_sysobj]=!0,FIELDS[F_hardware_id]=!0,FIELDS[F_height]=!0,FIELDS[F_hist_absorber]=!0,FIELDS[F_hist_cell_cum]=!0,FIELDS[F_hist_cell_id]=!0,FIELDS[F_hist_cell]=!0,FIELDS[F_hist_rawx]=!0,FIELDS[F_http_body_type]=!0,FIELDS[F_http_body]=!0,FIELDS[9007192005332123]=!0,FIELDS[9007193563310425]=!0,FIELDS[F_http_headers]=!0,FIELDS[F_http_phase]=!0,FIELDS[F_http_status]=!0,FIELDS[F_http_sysobj]=!0,FIELDS[F_hue]=!0,FIELDS[F_in_autofill]=!0,FIELDS[F_in_disabled]=!0,FIELDS[F_in_errmsg]=!0;FIELDS[F_in_form_ready]=!0,FIELDS[F_in_hint]=!0,FIELDS[F_in_keyboard]=!0,FIELDS[F_in_kind]=!0,FIELDS[F_in_label]=!0,FIELDS[F_in_maxlen]=!0,FIELDS[F_in_maxval]=!0,FIELDS[F_in_minlen]=!0,FIELDS[F_in_minval]=!0,FIELDS[F_in_name]=!0,FIELDS[F_in_ok]=!0,FIELDS[F_in_pattern]=!0,FIELDS[F_in_required]=!0,FIELDS[F_in_spellcheck]=!0,FIELDS[F_in_step]=!0,FIELDS[F_in_tab]=!0,FIELDS[F_in_tip]=!0,FIELDS[F_in_validator]=!0,FIELDS[F_in_value]=!0,FIELDS[F_index_multi]=!0;FIELDS[F_index_name]=!0,FIELDS[F_index_unique]=!0,FIELDS[F_is_alt]=!0,FIELDS[F_is_cmd]=!0,FIELDS[F_is_connected]=!0,FIELDS[F_is_ctrl]=!0,FIELDS[F_is_shift]=!0,FIELDS[F_keycode]=!0,FIELDS[F_left]=!0,FIELDS[F_link_data]=!0,FIELDS[9007191183148878]=!0,FIELDS[9007192625502279]=!0,FIELDS[F_link_socket]=!0,FIELDS[F_link_state]=!0,FIELDS[F_link_timeout]=!0,FIELDS[F_link_url]=!0,FIELDS[F_major_firstx]=!0,FIELDS[F_major_steps]=!0,FIELDS[F_major_stepx]=!0,FIELDS[F_micro_steps]=!0;FIELDS[F_mod_const]=!0,FIELDS[F_mod_enums]=!0,FIELDS[F_mod_funcs]=!0,FIELDS[F_mod_recs]=!0,FIELDS[F_mod_ufams]=!0,FIELDS[F_mod_vars]=!0,FIELDS[F_monitor_active]=!0,FIELDS[F_ms_dest]=!0,FIELDS[F_ms_funcname]=!0,FIELDS[F_ms_kind]=!0,FIELDS[F_ms_module]=!0,FIELDS[F_ms_oldval]=!0,FIELDS[F_ms_newval]=!0,FIELDS[F_ms_where]=!0,FIELDS[F_ncells]=!0,FIELDS[F_notch_height]=!0,FIELDS[F_notch_width]=!0,FIELDS[F_opacity]=!0,FIELDS[F_opt_children]=!0,FIELDS[F_opt_disabled]=!0;FIELDS[F_opt_label]=!0,FIELDS[F_opt_selected]=!0,FIELDS[F_opt_val]=!0,FIELDS[F_os_kind]=!0,FIELDS[F_os_language]=!0,FIELDS[F_os_modal]=!0,FIELDS[F_os_version]=!0,FIELDS[F_pending_delay]=!0,FIELDS[9007192438173725]=!0,FIELDS[F_pending_limit]=!0,FIELDS[F_pending_parms]=!0,FIELDS[9007193690019779]=!0,FIELDS[9007192481613845]=!0,FIELDS[F_polar_angle]=!0,FIELDS[F_polar_radius]=!0,FIELDS[F_row_kind]=!0,FIELDS[9007191004530853]=!0,FIELDS[F_s_block_id]=!0,FIELDS[9007191211659509]=!0,FIELDS[F_s_position]=!0;FIELDS[F_s_step_size]=!0,FIELDS[F_s_window_size]=!0,FIELDS[F_saturation]=!0,FIELDS[F_sc1]=!0,FIELDS[F_sc2]=!0,FIELDS[F_screen_dpi]=!0,FIELDS[F_screen_horz]=!0,FIELDS[F_screen_vert]=!0,FIELDS[F_sop]=!0,FIELDS[F_spt]=!0,FIELDS[F_stop_color]=!0,FIELDS[F_stop_pos]=!0,FIELDS[F_store_autoinc]=!0,FIELDS[F_store_indices]=!0,FIELDS[F_store_name]=!0,FIELDS[F_sysobj]=!0,FIELDS[F_top]=!0,FIELDS[F_touch_id]=!0,FIELDS[F_touch_kind]=!0,FIELDS[F_unicode]=!0;FIELDS[F_unit_factor]=!0,FIELDS[F_unit_to_base]=!0,FIELDS[F_value]=!0,FIELDS[F_vv_canonical]=!0,FIELDS[F_vv_cat]=!0,FIELDS[F_vv_data_xy]=!0,FIELDS[F_vv_default]=!0,FIELDS[F_vv_dim]=!0,FIELDS[F_vv_expand]=!0,FIELDS[F_vv_fields]=!0,FIELDS[F_vv_funck]=!0,FIELDS[F_vv_parmk]=!0,FIELDS[F_vv_parmn]=!0,FIELDS[F_vv_parms]=!0,FIELDS[F_vv_rec]=!0,FIELDS[F_vv_typek]=!0,FIELDS[F_vv_units]=!0,FIELDS[F_vv_val]=!0,FIELDS[F_when]=!0,FIELDS[F_width]=!0;FIELDS[F_window_horz]=!0,FIELDS[F_window_vert]=!0,FIELDS[F_x]=!0,FIELDS[F_y]=!0,FIELDS[F_z]=!0;export var families=new a_tree("std","$families",0);export var unit_to_family=new a_tree("std","$unit_to_family",0);export var META=new a_tree(_M,"META",0);export var LOCALIZED=new a_tree(_M,"LOCALIZED");export const NULL_FUNC=void 0;export var aaaa={};aaaa.main_init=null,aaaa.main_drawer=null,aaaa.main_module=null,aaaa.mon_init=null,aaaa.mon_drawer=null,aaaa.leave_func=null,aaaa.menubar_func=null,aaaa.derive_func=null_derive_func,aaaa.opendoc_func=null,aaaa.orient_func=null;export function logg(e){if(console.log(e),TRACE_LOGG){var t=document.getElementById("$log");null!=t&&(t.style.marginLeft="10px",t.innerHTML+=e,t.innerHTML+="<br>",t.scrollBy(0,1e3))}};export function internal_err(e){logg("Internal error: "+e);debugger};export function argument_err(e){logg("Bad argument: "+e);debugger};export function js_color_to_str(e,t=1){return 1===t?"#"+(e+16777216).toString(16).substring(1):`rgba(${r255(e)},${g255(e)},${b255(e)},${t.toFixed(3)})`};function js_set_screen_size(){if(IS_NODE)SCREEN_H=1024,SCREEN_V=768,SCREEN_DPI=96;else{let e=window.screen;SCREEN_H=e.availWidth,SCREEN_V=e.availHeight,SCREEN_DPI=96*window.devicePixelRatio}TRACE_BOOT&&logg(`SCREEN_H=${SCREEN_H}, SCREEN_V=${SCREEN_V} DPI=${SCREEN_DPI}`),setv(_M,0,runtime,F_screen_dpi,SCREEN_DPI),setv(_M,0,runtime,F_screen_horz,SCREEN_H),setv(_M,0,runtime,F_screen_vert,SCREEN_V)}export function js_svg_wrapper(e,t){if(void 0!=e.last_svg_ptr)return e.last_svg_ptr;if(CHECKS&&(e.bounds.width<0||e.bounds.height<0))debugger;var s=document.createElementNS(SVG_NS,"svg");s.style.position="absolute";let n=e.bounds.width,_=e.bounds.height;return null!=e.div&&(n=e.div.content_h,_=e.div.content_v),s.setAttribute("width",n.toFixed(0)),s.setAttribute("height",_.toFixed(0)),1!=t&&s.setAttribute("opacity",t.toFixed(3)),e.appendChild(s),e.last_svg_ptr=s,s};export function input_set_value(e,t,s,n){setv(e,t,s,F_in_value,n);var _=gets(s,F_in_label);if(null!=_){var o=document.getElementById(_);null!=o&&(o.value=n)}};export function input_set_selection(e,t){var s=1,n=U;for(let e in t)switch(e){case"start":s=t.start;break;case"stop":n=t.stop;break;default:argument_err("bad option: "+e)}var _=gets(e,F_in_label);if(null!=_){var o=document.getElementById(_);if(null!=o)n==U&&(n=9999999),o.focus(),o.setSelectionRange(s-1,n);else if(CHECKS)debugger}};export function canvb(e){return get_generic(e,F_sysobj)};export function remote_call(e,t,s,n){let _,o,r,a,i,u;var c=get_object(e,F_client_channel);for(null==gg_buf?gg_buf=new_bytes(1e5):gg_buf.position=0,bytes_put_byte(gg_buf,SOP_CHUNK_START),bytes_put_byte(gg_buf,0),_=gg_buf.position,bytes_put_card32(gg_buf,0),bytes_put_byte(gg_buf,SOP_CALL),bytes_put_card32(gg_buf,s),r=gg_buf.position,bytes_put_byte(gg_buf,0),i=0,a=0;a<n.length;)u=n[a],a+=1,u instanceof a_path?bytes_put_relpath(gg_buf,u,c.client_dest):bytes_put_val(gg_buf,u),logg(`  parm[${a}]=${str.to_str(u)}`),i+=1;bytes_put_byte(gg_buf,SOP_CHUNK_END),o=gg_buf.position,gg_buf.position=r,bytes_put_byte(gg_buf,i),gg_buf.position=_,bytes_put_card32(gg_buf,o-_-4);var l=getn(e,F_client_bytes_out)+o;setv(_M,0,e,F_client_bytes_out,l),TRACE_CHAN&&logg(str.conv("--sending {} bytes ({} cumulative) of remote call to func {}",o,l,t)),websocket_send(c,gg_buf,o)};export const WEBSOCKET_CLOSED=1111;export const WEBSOCKET_ERROR=2222;export const WEBSOCKET_OPENED=3333;export function websocket_open(e,t,s){var n=new WebSocket(e);return n.onmessage=function(e){t(n,e.data)},n.onopen=function(e){s(n,WEBSOCKET_OPENED)},n.onclose=function(e){s(n,WEBSOCKET_CLOSED)},n.onerror=function(e){s(n,WEBSOCKET_ERROR)},n};export function websocket_close(e){e.close()};export function websocket_send(e,t,s=U){if("string"==typeof instance)TRACE_CHAN&&logg("websocket_send, sending as string"),e.send(t);else if(s!=U&&s!=t.arraybuf.byteLength){var n=new Uint8Array(t.arraybuf,0,s);TRACE_CHAN&&logg(`websocket_send, sending subset ${s} bytes, type=${typeof n}`),e.send(n)}else TRACE_CHAN&&logg(`websocket_send, sending entire ${t.arraybuf.byteLength} bytes`),e.send(t.arraybuf)};const CURSOR_ID="$cursor";export function cursor_set(e){if(setv(_M,0,runtime,F_cursor_changed,Y),e!=g_curr_cursor){switch(g_curr_cursor=e,e){case CURS_ARROW:document.body.style.cursor="default";break;case CURS_FINGER:document.body.style.cursor="pointer";break;case CURS_HAND:document.body.style.cursor="grab";break;case CURS_IBEAM:document.body.style.cursor="text";break;case CURS_HIDE:document.body.style.cursor="none";break;case CURS_ALIAS:document.body.style.cursor="alias";break;case CURS_CELL:document.body.style.cursor="cell";break;case CURS_CONTEXT:document.body.style.cursor="context-menu";break;case CURS_COPY:document.body.style.cursor="copy";break;case CURS_CROSSHAIR:document.body.style.cursor="crosshair";break;case CURS_GRABBING:document.body.style.cursor="grabbing";break;case CURS_MOVE:document.body.style.cursor="move";break;case CURS_NOT:document.body.style.cursor="no-drop";break;case CURS_QUESTION:document.body.style.cursor="help";break;case CURS_WAIT:document.body.style.cursor="wait";break;case CURS_ZOOM_IN:document.body.style.cursor="zoom-in";break;case CURS_ZOOM_OUT:document.body.style.cursor="zoom-out";break;case CURS_RESIZE_COL:document.body.style.cursor="col-resize";break;case CURS_RESIZE_ROW:document.body.style.cursor="row_resize";break;case CURS_RESIZE_N:document.body.style.cursor="n-resize";break;case CURS_RESIZE_S:document.body.style.cursor="s-resize";break;case CURS_RESIZE_E:document.body.style.cursor="e-resize";break;case CURS_RESIZE_W:document.body.style.cursor="w-resize";break;case CURS_RESIZE_NE:document.body.style.cursor="ne-resize";break;case CURS_RESIZE_NW:document.body.style.cursor="nw-resize";break;case CURS_RESIZE_SE:document.body.style.cursor="se-resize";break;case CURS_RESIZE_SW:document.body.style.cursor="sw-resize";break;case CURS_DIAG_RIGHT:document.body.style.cursor="nesw-resize";break;case CURS_DIAG_LEFT:document.body.style.cursor="nwse-resize";break;default:CHECKS&&argument_err(`bad cursor: ${e}`)}var t=document.getElementById(CURSOR_ID);null!=t&&t.parentElement.removeChild(t)}};export function cursor_custom(e,t,s){document.body.style.cursor="none";var n=getn(s,F_x),_=getn(s,F_y),o=n-getn(t,F_x),r=_-getn(t,F_y),a=document.getElementById(CURSOR_ID);if(null==a)draw_image(k.g_root_block,null,e,{idss:CURSOR_ID,x:o,y:r,shrink:N,grow:N});else{var i=`translate(${o.toFixed(0)}px,${r.toFixed(0)}px)`;a.style.transform=i}setv(_M,0,runtime,F_cursor_changed,Y)};function numeric_arg(e){if("number"==typeof e&&is_numeric(e))return e;CHECKS&&argument_err("bad numeric parameter")}let gbuf,gbuf_endian,g_fixup_offset;export function bytes_init(e,t){gbuf=new_bytes(e,t),gbuf_endian=t};export function new_bytes(e,t=BIG_END){return new ByteArray(e,t)};export const NOV_RELPATH=35;function bytes_put_relpath(e,t,s){var n,_=s.key.length,o=t.key.length-s.key.length;if(t.base!=s.base||o<0)throw new Error("remote call is sending a path that is not relative to the channel base");for(n=0;n<_;n++)if(t.key[n]!=s.key[n])throw new Error(`remote call path argument is not deeper than the base in art ${n}`);for(bytes_put_byte(e,NOV_RELPATH),bytes_put_byte(e,o),logg(`bytes_put_relpath, nlevels=${o}`),n=0;n<o;n++)bytes_put_num(e,t.key[_+n])}function bytes_get_relpath(e,t){var s,n,_=bytes_get_byte(e),o=t.clone();for(s=0;s<_;s++)n=bytes_get_num(e),o.key.push(n);return o}export function bytes_put_chunk(e,t){for(let s=0;s<4;s++)bytes_put_byte(e,str.from_char(t.charAt(s)));g_fixup_offset=e.position,bytes_put_card32(e,0)};export function bytes_fixup_chunk(e){let t=e.position,s=t-g_fixup_offset;e.position=g_fixup_offset,bytes_put_card32(e,s),e.position=t};export function bytes_put_num(e,t){e.view.setFloat64(e.position,t,e.little),e.position+=8,e.position>e.length&&(e.length=e.position)};export function bytes_put_byte(e,t){e.view.setUint8(e.position,t),e.position+=1,e.position>e.length&&(e.length=e.position)};export function bytes_put_int32(e,t){e.view.setInt32(e.position,t,e.little),e.position+=4,e.position>e.length&&(e.length=e.position)};export function bytes_put_card32(e,t){e.view.setUint32(e.position,t,e.little),e.position+=4,e.position>e.length&&(e.length=e.position)};export const NOV_POP=20;export const NOV_0=21;export const NOV_EOF=23;export const NOV_ERR=24;export const NOV_FUNC=25;export const NOV_IMAGE=26;export const NOV_MEAS=27;export const NOV_N=28;export const NOV_NUM=29;export const NOV_OBJECT=30;export const NOV_PATH=31;export const NOV_SOUND=32;export const NOV_STR=33;export const NOV_U=34;export const NOV_VIDEO=36;export const NOV_Y=37;export const SUB_NUM=38;export const SUB_STR=39;export const SUB_1=40;export const NOPOP=64;export const NOPOP_MASK=63;function opcode_ss(e){switch(e){case NOV_POP:return"NOV_POP";case NOV_0:return"NOV_0";case NOV_EOF:return"NOV_EOF";case NOV_ERR:return"NOV_ERR";case NOV_FUNC:return"NOV_FUNC";case NOV_IMAGE:return"NOV_IMAGE";case NOV_MEAS:return"NOV_MEAS";case NOV_N:return"NOV_N";case NOV_NUM:return"NOV_NUM";case NOV_OBJECT:return"NOV_OBJECT";case NOV_PATH:return"NOV_PATH";case NOV_SOUND:return"NOV_SOUND";case NOV_STR:return"NOV_STR";case NOV_U:return"NOV_U";case NOV_VIDEO:return"NOV_VIDEO";case NOV_Y:return"NOV_Y";case SUB_NUM:return"SUB_NUM";case SUB_STR:return"SUB_STR";case SUB_1:return"SUB_1";default:return"???"}}export function bytes_put_val(e,t,s){if(TRACE_ENCODE&&0!=s&&logg("  put_val > skip_pop flag ON"),"number"==typeof t)0==t?(bytes_put_byte(e,s|NOV_0),TRACE_ENCODE&&logg(str.conv(" put_val, offset={}, ZERO",e.position))):t==Y?(bytes_put_byte(e,s|NOV_Y),TRACE_ENCODE&&logg(str.conv(" put_val, offset={}, Y",e.position))):t==N?(bytes_put_byte(e,s|NOV_N),TRACE_ENCODE&&logg(str.conv(" put_val, offset={}, N",e.position))):t==U?(bytes_put_byte(e,s|NOV_U),TRACE_ENCODE&&logg(str.conv(" put_val, offset={}, U",e.position))):Number.isNaN(t)?(bytes_put_byte(e,s|NOV_ERR),TRACE_ENCODE&&logg(str.conv(" put_val, offset={}, ERR",e.position))):(bytes_put_byte(e,s|NOV_NUM),TRACE_ENCODE&&logg(str.conv(" put_val, offset={}, num={}",e.position,t)),bytes_put_num(e,t));else if("string"==typeof t)bytes_put_byte(e,s|NOV_STR),TRACE_ENCODE&&logg(str.conv(" put_val, offset={}, str={}",e.position,t)),bytes_put_str(e,t);else if(t instanceof a_path)bytes_put_byte(e,s|NOV_PATH),TRACE_ENCODE&&logg(str.conv(" put_val, offset={}, path",e.position)),bytes_put_path(e,t);else if(t instanceof a_function){bytes_put_byte(e,s|NOV_FUNC),TRACE_ENCODE&&logg(str.conv(" put_val, offset={}, func",e.position)),bytes_put_card32(e,t.hash)}else{if(!(t instanceof a_meas))throw t instanceof a_image?(bytes_put_byte(e,s|NOV_IMAGE),TRACE_ENCODE&&logg(str.conv(" put_val, offset={}, image",e.position)),new Error("not yet")):t instanceof a_sound?(bytes_put_byte(e,s|NOV_SOUND),TRACE_ENCODE&&logg(str.conv(" put_val, offset={}, sound",e.position)),new Error("not yet")):(bytes_put_byte(e,s|NOV_OBJECT),new Error("not yet"));bytes_put_byte(e,s|NOV_MEAS),TRACE_ENCODE&&logg(str.conv(" put_val, offset={}, meas",e.position)),bytes_put_num(e,t.mag),bytes_put_num(e,t.unit),bytes_put_num(e,t.family),bytes_put_str(e,t.unitss)}};export function bytes_put_path(e,t){let s;for(s of(t.base instanceof a_tree?(TRACE_ENCODE&&logg(str.conv(" put_path, offset={}, hard hash={}",e.position,t.base.sub)),bytes_put_card32(e,t.base.sub)):(TRACE_ENCODE&&logg(str.conv(" put_path, offset={}, soft hash={}",e.position,t.base)),bytes_put_card32(e,t.base)),bytes_put_byte(e,t.key.length),t.key))bytes_put_val(e,s,0)};export function bytes_get_path(e){let t=new a_path,s=bytes_get_card32(e);if(t.base=TREES[s],void 0==t.base)throw new Error("can't resolve path base");let n,_=bytes_get_byte(e);for(let s=0;s<_;s++)switch(n=bytes_get_byte(e)){case NOV_STR:t.key.push(bytes_get_str(e));break;case NOV_NUM:t.key.push(bytes_get_num(e));break;default:throw new Error("bad op")}return t};export function bytes_put_tree(e,t){bytes_put_node(e,path_to_node(t)),bytes_put_byte(e,NOV_EOF)};export function bytes_put_node(e,t){let s=0;if(0==(t.eflags&EF_VAL_IS_U)&&(null!=t.children&&(s=NOPOP),bytes_put_val(e,t.val,s)),null!=t.children){let s=-9999999;for(let n of t.children)"string"==typeof n.sub?(bytes_put_byte(e,SUB_STR),TRACE_DEBUG&&logg(str.conv("put_node at {} opcode=SUB_STR, sub={}",e.position,n.sub)),bytes_put_str(e,n.sub)):1==n.sub?(bytes_put_byte(e,SUB_1),TRACE_DEBUG&&logg(str.conv("put_node at {} opcode=SUB_1",e.position)),s=1):(bytes_put_byte(e,SUB_NUM),TRACE_DEBUG&&logg(str.conv("put_node at {} opcode=SUB_NUM, sub={}",e.position,n.sub)),bytes_put_num(e,n.sub),s=n.sub),bytes_put_node(e,n);TRACE_ENCODE&&logg(str.conv(" end of children at {} opcode=POP",e.position)),bytes_put_byte(e,NOV_POP)}};export function bytes_put_micro(e,t){TRACE_ENCODE&&logg(str.conv("  put_micro .when at {}",e.position)),bytes_put_num(e,t.when),bytes_put_str(e,t.module),bytes_put_card32(e,t.where),bytes_put_card32(e,t.kind),bytes_put_path(e,t.path),bytes_put_val(e,t.oldval,0),bytes_put_val(e,t.newval,0)};export function bytes_put_str(e,t){var s,n=[],_=t.length;for(_>65535&&(_=65535),s=0;s<_;s++){var o=t.charCodeAt(s);o<128?n.push(o):o<2048?n.push(192|o>>6,128|63&o):o<55296||o>=57344?n.push(224|o>>12,128|o>>6&63,128|63&o):(s++,o=65536+((1023&o)<<10|1023&t.charCodeAt(s)),n.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|63&o))}var r=n.length;for(bytes_put_card32(e,r),s=0;s<r;s++)e.view.setUint8(e.position,n[s]),e.position+=1,e.position>e.length&&(e.length=e.position)};export function bytes_get_val(e,t){let s,n,_;switch(TRACE_DECODE&&logg(str.conv("get_val at {}",e.position)),t){case NOV_NUM:return bytes_get_num(e);case NOV_STR:return bytes_get_str(e);case NOV_0:return 0;case NOV_N:return N;case NOV_U:return U;case NOV_Y:return Y;case NOV_ERR:return ERR;case NOV_FUNC:return n=bytes_get_card32(e),null==(_=FUNCS[n])&&CHECKS&&internal_err("missing inverse for func"),_;case NOV_MEAS:return(s=new a_meas).mag=bytes_get_num(e),s.unit=bytes_get_num(e),s.family=bytes_get_num(e),s.unitss=bytes_get_str(e),s;case NOV_PATH:return bytes_get_path(e);case NOV_IMAGE:case NOV_OBJECT:case NOV_SOUND:case NOV_VIDEO:return ERR;default:throw new Error("bad opcode")}};export function bytes_get_tree(e,t,s,n){let _,o,r,a,i,u=n.clone();e:for(;;)switch(a=0!=((_=bytes_get_byte(s))&NOPOP),_&=NOPOP_MASK,TRACE_DECODE&&logg(str.conv("get_tree at {} opcode={} skip={}",s.position,opcode_ss(_),a)),_){case SUB_NUM:o=bytes_get_num(s),u.key.push(o);break;case SUB_STR:r=bytes_get_str(s),u.key.push(r);break;case SUB_1:u.key.push(1),o=1;break;case NOV_POP:u.key.pop();break;case NOV_EOF:break e;default:i=bytes_get_val(s,_),TRACE_DECODE&&logg(str.conv("  storing value {}, dest={}",i,u)),setv(e,t,u,i),a||u.key.pop()}TRACE_DECODE&&logg(str.conv("..end get_tree at {}",s.position))};export function bytes_get_str(e){var t,s,n,_,o=bytes_get_card32(e),r="";for(t=0;t<o;)switch(t++,(s=bytes_get_byte(e))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:r+=String.fromCharCode(s);break;case 12:case 13:n=bytes_get_byte(e),t++,r+=String.fromCharCode((31&s)<<6|63&n);break;case 14:n=bytes_get_byte(e),t++,_=bytes_get_byte(e),t++,r+=String.fromCharCode((15&s)<<12|(63&n)<<6|(63&_)<<0)}if(t>o)debugger;return r};export function bytes_get_num(e){var t=e.view.getFloat64(e.position,e.little);return e.position+=8,t};export function bytes_get_byte(e){var t=e.view.getUint8(e.position);return e.position+=1,t};export function bytes_get_int32(e){var t=e.view.getInt32(e.position,e.little);return e.position+=4,t};export function bytes_get_card32(e){var t=e.view.getUint32(e.position,e.little);return e.position+=4,t};export function loc(e,t,s,n,_=null){let o=getn(runtime,F_ui_language),r="",a=U;for(let e in _)switch(e){case"langx":o=_.langx;break;case"plural":a=_.plural;break;case"table":r=_.table;break;default:argument_err("bad option: "+e)}if(o==t||0==n)return e;if(n==U)return U_STR;if(Number.isNaN(n))return ERR_STR;let i=gets(LOCALIZED,o,s,n);return i==U_STR?CHECKS?e+"ü¶†":e:i};export function set_ui_language(e){is_enum_b(e)?(setv(_M,0,runtime,F_ui_language,e),k.refresh_all()):internal_err("bad language selection")};export function clock_tick(){now_raw=sys_rawtime(),elapsed_raw=now_raw-time_launched,now=sys_dilatedime(),elapsed=now-time_launched};export function zap_clock(){let e=sys_rawtime();time_launched=e,now_raw=e,now=e,elapsed=0,elapsed_raw=0,g_era_raw=e,g_era_dilated=e};export function sys_rawtime(){return.001*Date.now()};export function sys_dilatedime(){let e=g_era_dilated+(now_raw-g_era_raw)*g_time_scale;return TRACE_TIME&&logg(str.conv(">> now, now_raw={n3}, era_dilated={n3}, era_raw={n3}, scale={n3}, net={n3}",now_raw,g_era_dilated,g_era_raw,g_time_scale,e)),e};export function coverage(e){inc(_M,0,addr(runtime,F_code_coverage,e))};export function unfreeze_calc(e){return null!=e.parms?e.code.apply(null,e.parms):e.code()};export function unfreeze_draw(e,t){null!=t.parms?t.code.apply(null,[e].concat(t.parms)):t.code(e)};export function unfreeze_track(e,t,s){return null!=s.parms?s.tracker.apply(null,[e,t].concat(s.parms)):s.tracker(e,t)};export function monitored_draw(e){monitored_draw_F.code(e)};export function monitored_init(){loom_clear_all(),zap_clock(),aaaa.main_init()};export function resolve_filepath(e){var t=null;return"["==e.substr(0,1)&&("[APP_RESOURCES]"==e.substr(0,15)?t=e.substr(15):"[APP_STORAGE]"==e.substr(0,13)?t=e.substr(13):"[DOCUMENTS]"==e.substr(0,11)?t=e.substr(11):"[DESKTOP]"==e.substr(0,9)?t=e.substr(9):"[USER]"==e.substr(0,6)&&(t=e.substr(6))),null==t&&(t=e),t};export function debug_write_blackbox(e,t,s){let n,_=new_bytes(1e5,BIG_END);for(n of(bytes_put_chunk(_,"bbox"),bytes_put_card32(_,1),bytes_put_str(_,gets(runtime,F_app_version)),bytes_put_num(_,getn(runtime,F_os_kind)),bytes_put_num(_,getn(runtime,F_os_language)),bytes_put_str(_,gets(runtime,F_os_version)),bytes_put_num(_,getn(runtime,F_screen_dpi)),bytes_put_num(_,getn(runtime,F_window_horz)),bytes_put_num(_,getn(runtime,F_window_vert)),bytes_put_str(_,str.time_to_str("[iso_date]")),bytes_put_str(_,e),bytes_put_str(_,t),bytes_fixup_chunk(_),TRACE_DEBUG&&logg(str.conv("  write of {} major steps",tree_count(addr(runtime,F_major_steps)))),bytes_put_chunk(_,"majr"),bytes_put_tree(_,addr(runtime,F_major_steps)),bytes_fixup_chunk(_),bytes_put_chunk(_,"micr"),bytes_put_card32(_,g_micro.length),g_micro))bytes_put_micro(_,n);return bytes_fixup_chunk(_),TRACE_BLACKBOX&&logg(str.conv("-- writing blackbox file to {}",s)),os_write_bytes(s,_),_.position};export function subscribe_start(e,t,s,n,_,o,r,a,i){setv(e,t,a,F_client_status,CSTATUS_WAITING);var u=!1;for(var c in i)switch(c){case"echo":u=i.echo==Y;break;default:argument_err("bad option: "+c)}"localhost"==n&&(n="ws://127.0.0.1");var l="0000";u&&(l="0001");var p=n+":"+_+"/BE01"+l+"/"+str.num_to_hex(s);TRACE_CHAN&&logg(`>> subscribing to ${p}`);var d=new WebSocket(p);d.binaryType="arraybuffer",d.last_pos=0,d.client_dest=r,d.id=s,g_id_to_websocket[s]=d,setv(e,0,a,F_client_channel,d),setv(e,t,a,F_client_bytes_in,0),setv(e,t,a,F_client_bytes_out,0),d.onopen=function(e){TRACE_CHAN&&logg(str.conv(">> on_open, id={}",s))},d.onclose=function(n){TRACE_CHAN&&logg(str.conv(">> on_close, id={}",s)),getn(a,F_client_status)!=CSTATUS_NO_ANSWER&&setv(e,t,a,F_client_status,U)},d.onerror=function(n){TRACE_CHAN&&logg(str.conv(">> on_error, id={}",s)),setv(e,t,a,F_client_status,CSTATUS_NO_ANSWER)},d.onmessage=function(n){TRACE_CHAN&&logg(str.conv(">> on_message, id={}",s));var _=ArrayBuffer_to_ByteArray(n.data);setv(e,t,a,F_client_status,CSTATUS_CONNECTED),process_client_chunks(_,r)}};function process_client_chunks(e,t){var s;if((s=bytes_get_byte(e))==SOP_CHUNK_START){bytes_get_byte(e);var n=bytes_get_int32(e),_=e.position;e:for(;;)switch(s=bytes_get_byte(e)){case SOP_NOP:TRACE_CLIENT&&logg("-- opcode SOP_NOP");break;case SOP_FIRST:TRACE_CLIENT&&logg("-- opcode SOP_FIRST"),bytes_get_tree(e,t);break;case SOP_UPDATE:TRACE_CLIENT&&logg("-- opcode SOP_UPDATE"),process_deltas(e,t);break;case SOP_CALL:TRACE_CLIENT&&logg("-- opcode SOP_CALL");debugger;break;case SOP_CHUNK_END:break e;case SOP_LOG:logg(bytes_get_str(e));break;default:TRACE_CLIENT&&logg("-- bad opcode");debugger}TRACE_CHAN&&logg(`SUB: after parsing chunk, pos=${e.position}, expect=${_+n}`)}else logg(`Expected SOP_CHUNK_START, got 0x${s.toString(16)}`)}export function process_deltas(e,t){for(var s,n,_,o,r,a;TRACE_CLIENT&&logg(`top delta loop, pos=${e.position}`),(s=bytes_get_byte(e))!=SOP_END_DELTA;){if(s!=SOP_NODE){debugger;break}for(n=bytes_get_byte(e),_=t.clone(),o=0;o<n;o++)r=bytes_get_num(e),_.key.push(r);a=bytes_get_val(e),TRACE_CLIENT&&logg(str.conv("delta, pos={}, net.key={key}, val={}",e.position,_.key,a)),path_setv(_M,0,_,a)}};export function http_encodeURIComponent(e,t){var s=!1;for(let e in t)switch(e){case"plus":s=t.plus==Y;break;default:argument_err("bad option: "+e)}var n=encodeURIComponent(e);return s&&(n=n.replace(/%20/g,"+")),n};export function http_decodeURIComponent(e,t){var s=!1;for(let e in t)switch(e){case"plus":s=t.plus==Y;break;default:argument_err("bad option: "+e)}return s&&(e=e.replace(/\+/g," ")),decodeURIComponent(e)};const http_encodeURI=encodeURI,http_decodeURI=decodeURI;export function http_request(e,t,s,n){let _=0,o="GET",r=ENCODE_FORM_URL,a=null,i=80,u=10,c=null,l=!1;for(let e in n)switch(e){case"id":_=n.id;break;case"method":o=n.method;break;case"encoding":r=n.encoding;break;case"nocache":l=n.nocache==Y;break;case"send":a=n.send;break;case"port":i=n.port;break;case"timeout":u=n.timeout;break;case"response":c=n.response;break;default:argument_err("bad option: "+e)}if(null==c&&argument_err("response field is required"),setv(e,t,c,F_http_status,0),setv(e,t,c,F_http_phase,HTTP_START),"http"!=s.substr(0,4)&&(s="http://"+s),80!=i&&(s+=":"+i),l)switch(o){case"GET":case"HEAD":var p=(new Date).getTime();s.indexOf("&")>=0?s+="&"+p:s+="?"+p}let d=new XMLHttpRequest;d.timeout=1e3*u,d.onerror=function on_error(n){TRACE_CHAN&&logg(`### on_error, id=${_}, url=${s}, ready=${d.readyState}, status=${d.status}`);setv(e,t,c,F_http_phase,HTTP_DONE),setv(e,t,c,F_http_status,400)},d.onabort=function on_abort(n){TRACE_CHAN&&logg(`### on_abort, id=${_}, url=${s}, ready=${d.readyState}, status=${d.status}`);setv(e,t,c,F_http_phase,HTTP_DONE),setv(e,t,c,F_http_status,400)},d.ontimeout=function on_timeout(n){TRACE_CHAN&&logg(`### on_timeout, id=${_}, url=${s}, ready=${d.readyState}, status=${d.status}`);setv(e,t,c,F_http_phase,HTTP_TIMEOUT),setv(e,t,c,F_http_status,408)},d.onreadystatechange=function on_change(n){TRACE_CHAN&&logg(`### on_change, id=${_}, url=${s}, ready=${d.readyState}, status=${d.status}`);switch(d.readyState){case 2:setv(e,t,c,F_http_phase,HTTP_HEADERS),setv(e,t,c,F_http_headers,d.getAllResponseHeaders());break;case 3:setv(e,t,c,F_http_phase,HTTP_BUSY);break;case 4:switch(setv(e,t,c,F_http_phase,HTTP_DONE),setv(e,t,c,F_http_status,d.status),d.responseType){case"arraybuffer":case"blob":setv(e,t,c,F_http_body_type,BODY_BINARY);break;case"json":setv(e,t,c,F_http_body_type,BODY_JSON);break;case"document":setv(e,t,c,F_http_body_type,BODY_HTML);break;default:setv(e,t,c,F_http_body_type,BODY_PLAIN)}""!=d.responseText&&setv(e,t,c,F_http_body,d.responseText),TRACE_CHAN&&logg(`### on_change response=${d.responseText}`)}},d.open(o,s),d.send(a)};function js_to_langx(e){var t=LANG_ENG;switch(e.substring(0,2)){case"am":t=LANG_AMH;break;case"ar":t=LANG_ARA;break;case"be":t=LANG_BEL;break;case"bn":t=LANG_BEN;break;case"bg":t=LANG_BUL;break;case"ca":t=LANG_CAT;break;case"zh":t="CN"==e.substr(3,2)?LANG_CHS:LANG_CHT;break;case"hr":t=LANG_CRO;break;case"cs":t=LANG_CZE;break;case"da":t=LANG_DAN;break;case"nl":t=LANG_NED;break;case"en":t=LANG_ENG;break;case"es":t=LANG_ESL;break;case"fi":t=LANG_FIN;break;case"fr":t=LANG_FRA;break;case"ka":t=LANG_GEO;break;case"de":t=LANG_DEU;break;case"el":t=LANG_GRE;break;case"gu":t=LANG_GUJ;break;case"he":t=LANG_HEB;break;case"hi":t=LANG_HIN;break;case"hu":t=LANG_HUN;break;case"is":t=LANG_ICE;break;case"id":t=LANG_IND;break;case"it":t=LANG_ITA;break;case"ja":t=LANG_JAP;break;case"ko":t=LANG_KOR;break;case"ms":t=LANG_MAL;break;case"mr":t=LANG_MAR;break;case"no":t=LANG_NOR;break;case"or":t=LANG_ORI;break;case"fa":t=LANG_PER;break;case"pl":t=LANG_POL;break;case"pt":t=LANG_POR;break;case"pa":t=LANG_PUN;break;case"ro":t=LANG_ROM;break;case"ru":t=LANG_RUS;break;case"sk":t=LANG_SLK;break;case"sl":t=LANG_SLV;break;case"sv":t=LANG_SVE;break;case"tl":t=LANG_TAG;break;case"ta":t=LANG_TAM;break;case"te":t=LANG_TEL;break;case"th":t=LANG_THA;break;case"tu":t=LANG_TUR;break;case"uk":t=LANG_UKR;break;case"ur":t=LANG_URD;break;case"vi":t=LANG_VIE}return t}export function alert(e){window.alert(e)};export function halt(e){logg("halt: "+e);debugger;window.alert(e)};export function quit(e=0){logg(`inside quit, errorcode=${e}`),window.open("","_parent",""),window.close()};export function debug_where_to_name(e,t){let s=path_to_node(addr(META,e,F_mod_funcs));if(null==s||null==s.children)return"[unknown]";let n,_=0,o=s.children.length-1;for(;n=(_+o)/2,!(o-_<2);)t<s.children[n].sub?o=n:_=n;return t<s.children[_].sub?"<top level>":t>=s.children[o].sub?s.children[o].val:s.children[_].val};export function debug_jump(e){if(is_numeric(e)!=Y)return;let t,s,n,_,o=g_micro.length,r=tree_count(addr(runtime,F_major_steps));if(n=(e=clamp(Math.round(e),1,r+1))>r?o:getn(runtime,F_major_steps,e,F_hist_rawx),s=(t=getn(runtime,F_major_stepx))>r?o:getn(runtime,F_major_steps,t,F_hist_rawx),TRACE_JUMP&&logg(str.conv("-- debug_jump, major_step={}, targ_raw={}, curr_raw={}",e,n,s)),s!=n){for(;s<n;)(_=g_micro[s]).kind==LOGK_DELTA&&(fix_value(_.path,_.newval),TRACE_JUMP&&logg(str.conv("  forwards step {} at {} from {} to {}",s,_.path,_.oldval,_.newval))),s+=1;for(;s>n;)(_=g_micro[s-=1]).kind==LOGK_DELTA&&(fix_value(_.path,_.oldval),TRACE_JUMP&&logg(str.conv("  backwards step {} at {} from {} to {}",s,_.path,_.newval,_.oldval)));setv(_M,0,runtime,F_major_stepx,e)}};function fix_value(e,t){setv(_M,0,e,t);let s=e.key.length-1;if(s>=0&&e.key[s]==F_in_value){TRACE_JUMP&&logg("  ->> fixing input field"),e.key[s]=F_in_label;let n=path_getv(e,EF_VAL_IS_STR),_=document.getElementById(n);null!=_&&(_.value=t),e.key[s]=F_in_value}}export function debug_get_micro(e){if(is_err_enum_b(e))return;let t,s,n,_,o,r,a=g_micro.length,i=tree_count(addr(runtime,F_major_steps));if(e=clamp(Math.round(e),1,i+1),trunc_tree(_M,0,addr(runtime,F_micro_steps)),e==U)o=1,r=a;else{if(e>i)return;e=max(e,1),o=getn(runtime,F_major_steps,e,F_hist_rawx),r=e+1>i?a:getn(runtime,F_major_steps,e+1,F_hist_rawx)-1}r-=1;let u=!1;for(_=o-=1;_<=r;_++){switch(g_micro[_].kind){case LOGK_DELTA:t=MICRO_DELTA;break;case LOGK_RENUM:t=MICRO_RENUM;break;case MARK_TRUNC_BEG:t=MICRO_TRUNC,u=!0;break;case MARK_CLEAR_BEG:t=MICRO_CLEAR,u=!0;break;case MARK_CLEAR_END:case MARK_TRUNC_END:t=0,u=!1;break;default:t=ERR}0==t||u||(setv(_M,0,runtime,F_micro_steps,n=_+1,F_ms_kind,t),setv(_M,0,runtime,F_micro_steps,n,F_ms_module,g_micro[_].mod),setv(_M,0,runtime,F_micro_steps,n,F_ms_where,g_micro[_].where),s=debug_where_to_name(g_micro[_].mod,g_micro[_].where),setv(_M,0,runtime,F_micro_steps,n,F_ms_funcname,s),setv(_M,0,runtime,F_micro_steps,n,F_ms_dest,g_micro[_].path),setv(_M,0,runtime,F_micro_steps,n,F_ms_oldval,g_micro[_].oldval),setv(_M,0,runtime,F_micro_steps,n,F_ms_newval,g_micro[_].newval))}};export function debug_clear_future(){let e,t=getn(runtime,F_major_stepx);1==t&&(t=2);let s=t-1,n=path_to_node(addr(runtime,F_major_steps));n.children.length>s&&(e=getn(runtime,F_major_steps,t,F_hist_rawx),n.children.length=s,g_currseq+=1,n.seq=g_currseq,g_micro.length=e,TRACE_JUMP&&logg(str.conv(">> debug_clear_future, major_sub={} micro_end={}",s,e)))};export function hist_get_code(e,t){let s;if(null===(s=g_code[e]))return null;let n=s.length;return n<2?null:t<1||t>=n?"":s[t]};export function vars_ptr_to_value_ptr(e){debugger;return null};export function set_auto_size(e,t,s){e.bounds.width=t,e.bounds.height=t,setv(_M,0,e.extra,F_box,F_width,t),setv(_M,0,e.extra,F_box,F_height,s)};export function type_of(e){let t=path_to_pathx(e);return null!==t&&t.exists?node_get_type(t.lev[t.lastx].node):TYPE_U};export function sound_play_file(e){logg("sound_play_file ${path}"),new Audio(e).play()};export function sound_play(e,t=null){let s=0;for(let n in t)switch(n){case"loop":e.loopf=t.loop===Y;break;case"notify":e.notifyf=t.notify===Y;break;case"offset":s=t.offset;break;case"id":e.id=t.id;break;default:argument_err("bad option: "+n)}var n=0;if(0==e.curx&&1==e.numx){if(e.audio[0].readyState<3)return void logg("skipping not ready sound")}else e.curx,n>=e.numx&&(n=0);for(var _,o=n;;){if(0==(_=e.audio[o]).currentTime||_.ended){TRACE_SOUND&&logg(`-- slot at ix ${o} is idle`);break}if(TRACE_SOUND&&logg(`-- slot at ix ${o} is busy`),(o+=1)>=e.numx&&(o=0),o==n){(_=_.cloneNode()).currentTime=0,e.audio.push(_),e.curx=e.numx,e.numx+=1,TRACE_SOUND&&logg(`-- wrapped around, added copy, num=${e.numx}`);break}}0!=s&&(_.currentTime=s),e.loopf&&(_.loop=!0),_.play()};export function sound_pause(e){e.pause_position=e.audio.currentTime,e.audio.pause()};export function sound_resume(e){e.audio.play()};export function conv_degK_to_degC(e){return e-273.15};export function conv_degC_to_degK(e){return e+273.15};export function conv_degK_to_degF(e){return 9*e/5-459.67};export function conv_degF_to_degK(e){return 5*(e+459.67)/9};export function is_field_b(e){return void 0!=FIELDS[e]};export function is_field(e){return void 0==FIELDS[e]?N:Y};export function is_odd(e){return e==U?U:is_numeric(e)===Y?Math.round(e)%2!=0?Y:N:ERR};export function is_even(e){return e==U?U:is_numeric(e)===Y?Math.round(e)%2==0?Y:N:ERR};export function is_enum(e){return e>=FIRST_ENUM&&e<=LAST_ENUM?Y:N};export function is_err(e){return Number.isNaN(e)?Y:N};export function is_err_u(e){return Number.isNaN(e)||e===U?Y:N};export function is_numeric(e){return Number.isNaN(e)||e===U||e>=FIRST_ENUM&&e<=LAST_ENUM?N:Y};export function is_not_numeric(e){return Number.isNaN(e)||e===U||e>=FIRST_ENUM&&e<=LAST_ENUM?Y:N};export function is_err_enum(e){return Number.isNaN(e)||e>=FIRST_ENUM&&e<=LAST_ENUM?Y:N};export function is_finite(e){return is_numeric(e)===Y&&e!==INFINITY&&e!==NEG_INFINITY?Y:N};export function clamp(e,t,s){return is_err_enum_b(e)?ERR:e===U?U:Math.max(t,Math.min(e,s))};export function uzero(e){return e===U?0:e};export function distance_sq(e,t){let s=getn(e,F_x),n=getn(e,F_y),_=getn(t,F_x),o=getn(t,F_y);if(is_err_enum_b(s)||is_err_enum_b(_)||is_err_enum_b(n)||is_err_enum_b(o))return ERR;if(s===U||_===U||n===U||o===U)return U;let r=s-_,a=n-o;return r*r+a*a};export function distance(e,t){let s=getn(e,F_x),n=getn(e,F_y),_=getn(t,F_x),o=getn(t,F_y);if(is_err_enum_b(s)||is_err_enum_b(_)||is_err_enum_b(n)||is_err_enum_b(o))return ERR;if(s===U||_===U||n===U||o===U)return U;let r=s-_,a=n-o;return Math.sqrt(r*r+a*a)};function distance_xy(e,t,s,n){let _=e-s,o=t-n;return Math.sqrt(_*_+o*o)}export function distance_to_segment(e,t,s){let n=getn(e,F_x),_=getn(e,F_y),o=getn(t,F_x),r=getn(t,F_y),a=getn(s,F_x),i=getn(s,F_y);if(is_err_enum_b(n)||is_err_enum_b(_)||is_err_enum_b(o)||is_err_enum_b(r)||is_err_enum_b(a)||is_err_enum_b(i))return ERR;if(n===U||_===U||o===U||r===U||a===U||i===U)return U;let u=o-a,c=r-i,l=u*u+c*c;if(l<=1e-6)return distance_xy(n,_,o,r);let p=((n-o)*(a-o)+(_-r)*(i-r))/l;return p<=0?distance_xy(n,_,o,r):p>=1?distance_xy(n,_,a,i):distance_xy(n,_,o+p*(a-o),r+p*(i-r))};export function sign(e){return is_err_enum_b(e)?ERR:e===U?U:0===e?0:e>0?1:-1};export function abs(e){return is_err_enum_b(e)?ERR:e===U?U:e>=0?e:-e};export function power(e,t){let s;return is_err_enum_b(e)||is_err_enum_b(t)?ERR:e===U||t===U?U:(s=Math.pow(e,t))>=FIRST_ENUM&&s<=LAST_ENUM?ERR:s};export var log=logg;export function hypot(e,t){return sqrt(add(mul(e,e),mul(t,t)))};export function lg(e,t){let s=E;return is_err_enum_b(e)||e<0?ERR:e===U?U:null!==t&&t.hasOwnProperty("base")?(s=t.base,Number.isNaN(s)||s<0?ERR:s===U?U:Math.log(e)/Math.log(s)):Math.log(e)};export function factorial(e){let t;if(Number.isNaN(e)||e>=FIRST_ENUM&&e<=LAST_ENUM)return ERR;if(e===U)return U;if(e<0)return ERR;for(t=e;e>2;)t*=--e;return t};export function sqrt(e){return is_err_enum_b(e)?ERR:e===U?U:e<0?ERR:Math.sqrt(e)};export function min(...e){let t,s,n=INFINITY,_=!0;for(s=0;s<e.length;s++){if(is_err_enum_b(t=e[s]))return ERR;t!==U&&t<n&&(n=t,_=!1)}return _?U:n};export function max(...e){let t,s,n=NEG_INFINITY,_=!0;for(s=0;s<e.length;s++){if(is_err_enum_b(t=e[s]))return ERR;t!==U&&t>n&&(n=t,_=!1)}return _?U:n};export function fract(e){return is_err_enum_b(e)?ERR:e===U?U:e>=0?e-Math.floor(e):e-Math.ceil(e)};export function magnitude(e){return e.mag};export function to_unit(e,t){let s,n;return is_err_enum_b(e.mag)||!is_enum_b(t)?ERR:e.mag===U||e.family===U?U:null!==(n=get_func(families,e.family,F_fam_units,t,F_base_to_unit))?n.code(e.mag):(s=getn(families,e.family,F_fam_units,t,F_unit_factor))===U?(CHECKS&&internal_err("no conversion ratio found in the family for the target unit"),ERR):div(e.mag,s)};export function to_meas(e,t){let s;return(s=getn(unit_to_family,t))===U?(halt(),meas(ERR,N_each,Y_Scalar)):meas(e,t,s)};export function mm_to_dots(e,t){return Math.round(t/25.4*e.dpi)};export function cm_to_dots(e,t){return Math.round(t/2.54*e.dpi)};export function pt_to_dots(e,t){return Math.round(t/72*e.dpi)};export function pc_to_dots(e,t){return Math.round(t/6*e.dpi)};export function in_to_dots(e,t){return Math.round(t*e.dpi)};export function dots_to_mm(e,t){return Math.round(t/e.dpi*25.4)};export function dots_to_cm(e,t){return t/e.dpi*2.54};export function dots_to_pt(e,t){return Math.round(t/e.dpi*72)};export function dots_to_in(e,t){return t/e.dpi};export function interpolate(e,t,s,n,_,o=null){let r=!1,a=!1;if(null!==o&&(o.hasOwnProperty("round")&&(a=o.round),o.hasOwnProperty("clamp")&&(r=o.clamp)),is_err_enum_b(e)||is_err_enum_b(t)||is_err_enum_b(s)||is_err_enum_b(n)||is_err_enum_b(_))return ERR;if(e===U||t===U||s===U||n===U||_===U)return U;if(t===s)return n;if(r){if(e<=t)return n;if(e>=s)return _}else{if(e===INFINITY)return INFINITY;if(e===NEG_INFINITY)return NEG_INFINITY}return a?Math.round(n+(_-n)*(e-t)/(s-t)):n+(_-n)*(e-t)/(s-t)};export function solve_point(e){let t,s,n,_,o,r,a,i=5,u=0,c=0,l=!1;for(let r in e)switch(r){case"basis":e.basis instanceof Rectangle?(s=(t=e.basis).left,n=t.top,_=t.width,o=t.height):e.basis instanceof a_path||e.basis instanceof a_tree?(s=getn(t=e.basis,F_left),n=getn(t,F_top),_=getn(t,F_width),o=getn(t,F_height)):argument_err("basis must be a a_path or a_rect");break;case"dx":u=e.dx;break;case"dy":c=e.dy;break;case"pin":i=e.pin,CHECKS&&(i<1||i>9)&&argument_err("bad pin value");break;case"round":l=e.round==Y;break;default:argument_err("bad option: "+r)}switch(null===t&&argument_err("missing basis"),is_numeric(s)==Y&&is_numeric(n)==Y&&is_numeric(_)==Y&&is_numeric(o)==Y||argument_err("bad basis"),(i-1)%3){case 0:r=s;break;case 1:r=s+_/2;break;case 2:r=s+_}switch((i-1)/3>>0){case 0:a=n;break;case 1:a=n+o/2;break;case 2:a=n+o}return r+=u,a+=c,l&&(r=Math.round(r),a=Math.round(a)),point_as_tree(r,a)};export function solve_cellsize(e,t,s){return e/(t+(t+1)*s)};export function solve_rect(e){let t,s,n,_,o=U,r=U,a=U,i=U,u=U,c=U,l=U,p=U,d=U,g=U,m=U,E=U,h=U,x=U,f=U,b=U,R=U,A=U,N=1,T=!1,k=!1,y=null,F=!1,S=!1;for(let k in e)switch(k){case"basis":e.basis instanceof Rectangle?(t=(y=e.basis).left,s=y.top,n=y.width,_=y.height):e.basis instanceof a_path||e.basis instanceof a_tree?(t=getn(y=e.basis,F_left),s=getn(y,F_top),n=getn(y,F_width),_=getn(y,F_height)):argument_err("basis must be a path or tree");break;case"aspect":A=e.aspect;break;case"left":u=e.left,F=!0;break;case"top":l=e.top,S=!0;break;case"top_left":u=getn(e.top_left,F_x),l=getn(e.top_left,F_y),F=!0,S=!0;break;case"right":c=e.right,F=!0;break;case"bottom":p=e.bottom,S=!0;break;case"cx":o=e.cx;break;case"cy":r=e.cy;break;case"dx":a=e.dx;break;case"dy":i=e.dy;break;case"height":g=e.height;break;case"width":d=e.width;break;case"inset":m=e.inset;break;case"inset_n":E=e.inset_n;break;case"inset_s":h=e.inset_s;break;case"inset_e":x=e.inset_e;break;case"inset_w":f=e.inset_w;break;case"inset_y":b=e.inset_y;break;case"inset_x":R=e.inset_x;break;case"pin":N=e.pin,CHECKS&&(N<1||N>9)&&argument_err("bad pin value");break;case"round":T=e.round;break;default:argument_err("bad option: "+k)}if(null!==y){if(a!==U&&(t+=a),i!==U&&(s+=i),m!==U&&(t+=m,s+=m,n-=2*m,_-=2*m),b!==U&&(s+=b,_-=2*b),R!==U&&(t+=R,n-=2*R),E!==U&&(s+=E,_-=E),h!==U&&(_-=h),x!==U&&(n-=x),f!==U&&(t+=f,n-=f),!F)switch((N-1)%3){case 0:u=t;break;case 1:o=t+n/2;break;case 2:c=t+n}if(!S)switch(Math.floor((N-1)/3)){case 0:l=s;break;case 1:r=s+_/2;break;case 2:p=s+_}A!==U&&(d=(g=n/A)<=_?n:(g=_)*A)}return u!==U?d!==U||(c!==U?d=c-u:o!==U?d=2*(o-u):null!==y?d=n-(u-t):k=!0):c!==U?d!==U?u=c-d:o!==U?u=c-(d=2*(c-o)):null!==y?u=c-(d=n):k=!0:o!==U?d!==U?u=o-d/2:null!==y?u=o-(d=n)/2:k=!0:k=!0,l!==U?g!==U||(p!==U?g=p-l:r!==U?g=2*(r-l):null!==y?g=_-(l-s):k=!0):p!==U?g!==U?l=p-g:r!==U?l=p-(g=2*(p-r)):null!==y?l=p-(g=_):k=!0:r!==U?g!==U?l=r-g/2:null!==y?l=r-(g=_)/2:k=!0:k=!0,CHECKS&&k&&argument_err("insufficient info to determine rectangle"),T&&(u=Math.round(u),l=Math.round(l),d=Math.round(d),g=Math.round(g)),rect_as_tree(u,l,d,g)};function count_drawable(e){let t,s=0;for(t of e)null!==t.drawer&&(s+=1);return s}const HORZ=!0,VERT=!1,SMALLER=!0,BIGGER=!1;function calc_slice_edge(e,t,s,n,_){let o,r,a,i,u;for(a=0,r=0,o=0;;)if(i=_[o],o+=1,null===i.drawer)r+=e===HORZ?i.box.width:i.box.height;else{if((a+=1)===s){u=e===HORZ?t===SMALLER?i.box.left:i.box.left+i.box.width:t===SMALLER?i.box.top:i.box.top+i.box.height;break}r=0}if(t===SMALLER)u-=r*n;else{for(r=0;!(o>=_.length)&&(i=_[o],o+=1,null===i.drawer);)r+=e===HORZ?i.box.width:i.box.height;u+=r*n}return u}export function solve_grid_dim(e,t,s,n,_){let o=1,r=s+n;for(t-=2*_+s;t>=r;)o+=1,t-=r;let a=round_up(e/o);for(;(o-1)*a>=e;)o-=1;let i=new a_tree("std","solve_grid_dim");return setv(_M,0,i,F_x,o),setv(_M,0,i,F_y,a),i};export function solve_grid_rect(e,t,s,n,_,o=null){let r,a,i,u,c,l,p,d,g=.5;for(let e in o)switch(e){case"gap":g=o.gap;break;default:argument_err("bad option: "+e)}let m=null;if(null!==e&&null!==e.div&&null!=e.div.grid_func&&(m=e.div),null===m||is_err_enum_b(t)||is_err_enum_b(s)||is_err_enum_b(n)||is_err_enum_b(_))return CHECKS&&argument_err("bad arguments to function"),ERR_TREE;if(t===U||s===U||n===U||_===U)return U_TREE;let E=count_drawable(m.horz_slices),h=count_drawable(m.vert_slices);return l=n,p=s,d=_,(c=t)<1&&(c=1),l<1&&(l=1),p<1&&(p=1),d<1&&(d=1),c>E&&(c=E),l>E&&(l=E),p>h&&(p=h),d>h&&(d=h),rect_as_tree(r=calc_slice_edge(HORZ,SMALLER,c,g,m.horz_slices),a=calc_slice_edge(VERT,SMALLER,p,g,m.vert_slices),(i=calc_slice_edge(HORZ,BIGGER,l,g,m.horz_slices))-r,(u=calc_slice_edge(VERT,BIGGER,d,g,m.vert_slices))-a)};export function round(e,t=null){let s,n=0;if(is_err_enum_b(e))return ERR;if(0===e)return 0;if(e===U)return U;for(let e in t)switch(e){case"digits":n=t.digits;break;default:argument_err("bad option: "+e)}return 0===n?Math.round(e):n>0?(s=Math.pow(10,n),Math.round(e/s)*s):(s=Math.pow(10,-n),Math.round(e*s)/s)};export function round_up(e,t=null){let s,n,_=0;if(is_err_enum_b(e))return ERR;if(0===e)return 0;if(e===U)return U;if(null!==t)for(n in t)switch(n){case"digits":_=t.digits;break;default:argument_err("bad option: "+n)}return 0===_?Math.ceil(e):_>0?(s=Math.pow(10,_),Math.ceil(e/s)*s):(s=Math.pow(10,-_),Math.ceil(e*s)/s)};export function round_down(e,t=null){let s,n=0;if(is_err_enum_b(e))return ERR;if(0===e)return 0;if(e===U)return U;for(let e in t)switch(e){case"digits":n=t.digits;break;default:argument_err("bad option: "+e)}return 0===n?Math.floor(e):n>0?(s=Math.pow(10,n),Math.floor(e/s)*s):(s=Math.pow(10,-n),Math.floor(e*s)/s)};export function round_zero(e,t=null){return e>=0?round_down(e,t):round_up(e,t)};export function round_multiple(e,t){return is_err_enum_b(e)||is_err_enum_b(t)?ERR:0===e?0:e===U||t===U?U:0===t?0:1===(t=Math.abs(t))?Math.round(e):Math.round(e/t)*t};export function rem(e,t,s=null){let n,_,o=!1,r=!1;if(is_err_enum_b(e)||is_err_enum_b(t))return ERR;if(e==U||t===U)return U;if(0===e)return 0;if((t=Math.floor(t))<=0)return ERR;if(null!==s)for(let e in s)switch(e){case"one":o=s.one===Y;break;case"neg":r=s.neg===Y;break;default:argument_err("bad option: "+e)}if(o){if(r&&argument_err("neg_flag and one_flag together not yet implemented"),e<=0){return t- -e%t}return 1+(e-1)%t}return n=e%t,r?(_=n<0?n+t:n-t,Math.abs(n)<Math.abs(_)?n:_):(n<0&&(n+=t),n)};export function idiv(e,t,s){let n,_,o=!1;if(is_err_enum_b(e)||is_err_enum_b(t))return ERR;if(e===U||t===U)return U;if(0===e)return 0;if((t=Math.floor(t))<=0)return ERR;if(n=!1,e<0&&(n=!0,e=-e),null!==s)for(let e in s)switch(e){case"one":o=s.one===Y;break;default:argument_err("bad option: "+e)}return _=o?1+Math.floor((e-1)/t):Math.floor(e/t),n&&(_=-_),_};export function cos(e){let t;return t=e.mag,Number.isNaN(t)||t>=FIRST_ENUM&&t<=LAST_ENUM?ERR:t===U?U:Math.cos(t)};export function sin(e){let t;return t=e.mag,Number.isNaN(t)||t>=FIRST_ENUM&&t<=LAST_ENUM?ERR:t===U?U:Math.sin(t)};export function tan(e){let t;return t=e.mag,Number.isNaN(t)||t>=FIRST_ENUM&&t<=LAST_ENUM?ERR:t===U?U:Math.tan(t)};export function arc_cos(e){return meas(e===U?U:e>1||e<-1?ERR:Math.acos(e),N_radian,Y_Angle)};export function arc_sin(e){return meas(e===U?U:e>1||e<-1?ERR:Math.asin(e),N_radian,Y_Angle)};export function arc_tan(e){let t;return Number.isNaN(e)||e>=FIRST_ENUM&&e<=LAST_ENUM?t=ERR:e===U?t=U:(t=Math.atan(e))<0&&(t+=TAU),meas(t,N_radian,Y_Angle)};export function arc_tan2(e,t){let s;return Number.isNaN(t)||t>=FIRST_ENUM&&t<=LAST_ENUM||Number.isNaN(e)||e>=FIRST_ENUM&&e<=LAST_ENUM?s=ERR:t===U||e===U?s=U:(s=Math.atan2(e,t))<0&&(s+=TAU),meas(s,N_radian,Y_Angle)};export function random(){return Math.random()};export function random_range(e,t){return e+Math.random()*(t-e)};export function random_int(e,t){return e+Math.floor(Math.random()*(t-e+1))};export function random_set(...e){var t=e.length;switch(t){case 0:return U;case 1:return e[0];default:return e[random_int(0,t-1)]}};const WORDS=["abac","abas","abba","abbe","abbs","abed","abet","abid","abos","abri","abut","abye","abys","acai","acca","aced","acer","aces","ache","achy","acid","acme","acne","acre","acta","acts","adaw","adds","addy","adit","ados","adry","adze","aeon","aero","aery","aesc","afar","affy","afro","agar","agas","aged","agee","agen","ager","ages","agha","agin","agio","agma","agog","agon","ague","ahed","ahem","ahis","ahoy","aias","aide","aids","aiga","aims","aine","ains","airn","airs","airt","airy","aits","aitu","ajar","ajee","aked","akee","akes","akin","amah","amas","ambo","amen","amia","amid","amie","amin","amir","amis","ammo","amok","amps","amus","anan","anas","ance","ands","anes","anew","anga","anis","ankh","anna","anno","anns","anoa","anon","anow","ansa","anta","ante","anti","ants","anus","apay","aped","aper","apes","apex","apod","apos","apps","apse","apso","apts","aqua","arak","arar","arba","arbs","arch","arco","arcs","ards","area","ared","areg","ares","aret","arew","arfs","aria","arid","aris","arks","arms","army","arna","arow","arpa","arse","arsy","arti","arts","arty","arum","arvo","asar","asci","asea","ashy","asks","asps","atap","ates","atma","atoc","atok","atom","atop","atua","aufs","auks","aune","aunt","aura","auto","avas","aver","aves","avid","avos","avow","away","awed","awee","awes","awns","awny","awry","axed","axes","axis","axon","ayah","ayes","ayin","ayre","ayus","azan","azon","azym","baba","babe","babu","baby","bach","back","bacs","bade","bads","baff","baft","bagh","bags","baht","bait","baju","bake","bams","banc","band","bane","bang","bani","bank","bans","bant","baps","bapu","barb","bard","bare","barf","bark","barm","barn","barp","bars","base","bash","bask","bass","bast","bate","bath","bats","batt","baud","bauk","baur","bawd","bawn","bawr","baye","bays","bayt","bead","beak","beam","bean","bear","beat","beau","beck","bede","beds","bedu","beef","been","beep","beer","bees","beet","bego","begs","bein","bema","bend","bene","beni","benj","bens","bent","bere","berg","berk","berm","best","beta","bete","beth","bets","bevy","beys","bhat","bhut","bias","bibb","bibs","bice","bide","bidi","bids","bien","bier","biff","biga","bigg","bigs","bike","bima","bind","bine","bing","bink","bins","bint","biog","bios","bird","birk","biro","birr","bise","bish","bisk","bist","bite","bito","bits","bitt","bize","boab","boak","boar","boas","boat","boba","bobs","bock","bode","bods","body","boep","boet","boff","bogs","bogy","boho","bohs","bois","boke","boko","boks","boma","bomb","bona","bond","bone","bong","bonk","bony","boob","booh","book","boom","boon","boor","boos","boot","bops","bora","bord","bore","bork","borm","born","bors","bort","bosh","bosk","boss","bota","both","bots","bott","bouk","boun","bout","bowr","bows","boxy","boyf","boyg","boyo","boys","bozo","brad","brae","brag","brak","bran","bras","brat","braw","bray","bred","bree","brei","bren","brer","brew","brey","brie","brig","brik","brim","brin","brio","bris","brit","brod","brog","broo","bros","brow","brrr","brus","brut","brux","buat","buba","bubo","bubs","bubu","buck","buda","budi","budo","buds","buff","bufo","bugs","buhr","buik","buke","bumf","bump","bums","buna","bund","bung","bunk","bunn","buns","bunt","buoy","bura","burb","burd","burg","burk","burn","burp","burr","burs","bury","bush","busk","buss","bust","busy","bute","buts","butt","buys","buzz","byde","byes","byke","byre","byte","caba","cabs","caca","cade","cadi","cads","cafe","caff","cage","cags","cagy","caid","cain","cake","caky","cama","came","camo","camp","cams","cane","cang","cann","cans","cant","cany","capa","cape","caph","capi","capo","caps","carb","card","care","cark","carn","carp","carr","cars","cart","casa","case","cash","cask","cast","cate","cats","cauf","cauk","caum","caup","cava","cave","cavy","cawk","caws","cays","ceas","ceca","cede","cedi","cees","cens","cent","cepe","ceps","cere","cero","cert","cess","cete","chad","chai","cham","chao","chap","char","chas","chat","chav","chaw","chay","chef","cher","chew","chez","chia","chib","chic","chid","chik","chin","chip","chis","chit","chiv","chiz","choc","chog","chon","chop","chou","chow","chub","chug","chum","chut","ciao","cide","cids","cigs","cine","cion","cire","cist","cite","cito","cits","city","cive","coat","coax","cobb","cobs","coca","coch","cock","coco","coda","code","cods","coed","coff","coft","cogs","coho","coif","coin","coir","coit","coke","coky","coma","comb","come","comm","comp","coms","cond","cone","conf","coni","conk","conn","cons","cony","coof","cook","coom","coon","coop","coos","coot","cope","cops","copy","cord","core","corf","cork","corm","corn","cors","cory","cose","cosh","coss","cost","cosy","cote","coth","cots","cott","coup","cour","cove","cowk","cowp","cows","cowy","coxa","coxy","coys","coze","cozy","crab","crag","cram","cran","crap","craw","cray","cred","cree","crem","crew","crib","crim","cris","crit","croc","crog","crop","crow","crud","crue","crus","crux","cube","cubs","cuds","cued","cues","cuff","cuif","cuit","cuke","cunt","cups","curb","curd","cure","curf","curn","curr","curs","curt","cush","cusk","cusp","cuss","cute","cuts","cwms","cyan","cyma","cyme","cyst","cyte","czar","dabs","dace","dack","dada","dado","dads","daes","daff","daft","dago","dags","dahs","dais","daks","dame","damn","damp","dams","dang","dank","dans","dant","daps","darb","dare","darg","dari","dark","darn","dart","dash","data","date","dato","daub","daud","daur","daut","davy","dawd","dawk","dawn","daws","dawt","days","daze","dead","deaf","dean","dear","deaw","debe","debs","debt","deck","deco","deed","deek","deem","deen","deep","deer","dees","deet","deev","defi","deft","defy","degs","deid","deif","deke","deme","demo","demy","dene","deni","dens","dent","deny","dere","derm","dern","dero","derv","desi","desk","deus","deva","devs","dews","dewy","dexy","deys","dhak","dhow","dibs","dice","dich","dick","dict","dido","didy","dieb","died","dies","diet","diff","difs","digs","dika","dike","dime","dimp","dims","dine","ding","dink","dino","dins","dint","dips","dipt","dire","dirk","dirt","disa","disc","dish","disk","diss","dita","dite","dits","ditt","ditz","diva","dive","divi","divs","dixi","dixy","djin","doab","doat","dobs","doby","dock","doco","docs","dodo","dods","doek","doen","doer","does","doff","doge","dogs","dogy","dohs","doit","dojo","dome","doms","domy","dona","done","dong","dons","doob","dook","doom","doon","door","doos","dopa","dope","dops","dopy","dorb","dore","dork","dorm","dorp","dorr","dors","dort","dory","dose","dosh","doss","dost","dote","doth","dots","doty","douc","douk","doum","doun","doup","dour","dout","doux","dove","dowd","dowf","down","dowp","dows","dowt","doxy","doys","doze","dozy","drab","drac","drad","drag","dram","drap","drat","draw","dray","dree","dreg","drek","drew","drey","drib","drip","drop","drow","drub","drug","drum","drys","dsos","duad","duan","duar","dubs","duce","duci","duck","duct","dude","duds","dued","dues","duet","duff","dugs","duit","duka","duke","duma","dumb","dump","dune","dung","dunk","duns","dunt","duos","dupe","dups","dura","dure","durn","duro","durr","dush","dusk","dust","duty","dwam","dyad","dyed","dyer","dyes","dyke","dyne","dzho","dzos","each","eans","eard","earn","ears","ease","east","easy","eath","eats","eaus","eaux","eave","ebbs","ebon","ecad","ecce","ecco","eche","echo","echt","ecod","ecos","ecru","ecus","eddo","eddy","edge","edgy","edhs","edit","eech","eery","eevn","effs","efts","egad","eger","eggs","eggy","egis","egma","egos","ehed","eide","eiks","eina","eine","eish","eked","ekes","ekka","emes","emeu","emic","emir","emit","emma","emmy","emos","empt","emus","emyd","emys","ends","enes","enew","engs","enow","enuf","envy","eoan","eons","epee","epha","epic","epos","eras","ered","eres","erev","ergo","ergs","eric","erks","erne","erns","eros","errs","erst","eruv","eses","esky","esne","espy","esse","ests","etas","etat","etch","eten","ethe","eths","etic","etna","etui","euge","eugh","euks","euoi","euro","even","ever","eves","evet","evoe","evos","ewer","ewes","ewks","ewts","exam","exec","exed","exes","exit","exon","expo","eyas","eyed","eyen","eyer","eyes","eyne","eyot","eyra","eyre","eyry","fabs","face","fact","fade","fado","fads","fady","faff","fags","fahs","faik","fain","fair","faix","fake","fame","fand","fane","fang","fank","fano","fans","fard","fare","farm","faro","fars","fart","fash","fast","fate","fats","faun","faur","faut","faux","fava","fave","fawn","faws","fays","faze","fear","feat","feck","feds","feeb","feed","feen","feer","fees","feet","fegs","fehm","fehs","feis","feme","fems","fend","feni","fens","fent","feod","fere","ferm","fern","fess","fest","feta","fete","fets","fett","feud","feus","feys","fiar","fiat","fibs","fice","fico","fido","fids","fief","fier","fife","fifi","figo","figs","fike","fiky","find","fine","fini","fink","fino","fins","fire","firk","firm","firn","firs","fisc","fish","fisk","fist","fits","fitt","five","fixt","fizz","foam","fobs","foci","foen","foes","fogs","fogy","fohn","fohs","foid","foin","fond","fone","fons","font","food","foot","fops","fora","forb","ford","fore","fork","form","fort","foss","foud","four","fous","foxy","foys","fozy","frab","frae","frag","frap","fras","frat","frau","fray","free","fret","frib","frig","fris","frit","friz","froe","frog","from","fros","frow","frug","fubs","fuci","fuck","fuds","fuff","fugs","fugu","fuji","fume","fums","fumy","fund","fung","funk","funs","furr","furs","fury","fusc","fuse","fuss","fust","futz","fuze","fuzz","fyce","fyke","fyrd","gabs","gaby","gade","gadi","gads","gaed","gaen","gaes","gaff","gaga","gage","gags","gaid","gain","gair","gait","gajo","gama","gamb","game","gamp","gams","gamy","gane","gang","gans","gant","gape","gapo","gaps","gapy","garb","gare","gari","gars","gart","gash","gasp","gast","gate","gath","gats","gaud","gaum","gaun","gaup","gaur","gaus","gave","gawd","gawk","gawp","gays","gaze","gazy","gean","gear","geat","geck","geds","geed","geek","geep","gees","geez","geit","gems","gena","gene","gens","gent","genu","geos","gere","germ","gert","gest","geta","gets","geum","ghat","ghee","ghis","gibe","gibs","gids","gied","gien","gies","gift","giga","gigs","gimp","ging","gink","ginn","gins","gios","gips","gird","girn","giro","girr","girt","gism","gist","gite","gits","give","gizz","gjus","gnar","gnat","gnaw","gnow","gnus","goad","goaf","goas","goat","gobo","gobs","goby","gods","goer","goes","goey","goff","gogo","gone","gong","gonk","gons","good","goof","goog","gook","goon","goop","goor","goos","gora","gore","gori","gorm","gorp","gory","gosh","goss","goth","gouk","gout","govs","gowd","gowf","gowk","gown","goys","grab","grad","gram","gran","grat","grav","gray","gree","gren","grew","grex","grey","grid","grig","grim","grin","grip","gris","grit","grog","grok","grot","grow","grub","grue","grum","guan","guar","gubs","guck","gude","gues","guff","guga","guid","gump","gums","gung","gunk","guns","gups","gurn","gurs","guru","gush","gust","guts","guvs","guys","gybe","gymp","gyms","gyny","gyps","gyre","gyri","gyro","gyte","gyve","habu","hack","hade","hadj","hads","haed","haem","haen","haes","haet","haff","haft","hagg","hags","haha","hahs","haik","hain","hair","haji","hajj","haka","hake","haku","hame","hams","hand","hang","hank","hant","haps","hapu","hard","hare","hark","harm","harn","haro","harp","hart","hash","hask","hasp","hast","hate","hath","hats","haud","hauf","haut","have","hawk","hawm","haws","hays","haze","hazy","head","heap","hear","heat","hebe","hech","heck","heed","heft","hehs","heid","heir","heme","hemp","hems","hend","hens","hent","heps","hept","herb","herd","here","herm","hern","hero","hers","hery","hesp","hest","hete","heth","hets","hewn","hews","heys","hick","hide","hied","hies","high","hike","hims","hind","hing","hins","hint","hioi","hips","hipt","hire","hish","hisn","hiss","hist","hits","hive","hiya","hizz","hoar","hoas","hoax","hobo","hobs","hock","hods","hoed","hoer","hoes","hogg","hogh","hogs","hoha","hohs","hoik","hoka","hoke","hoki","homa","home","homo","homs","homy","hond","hone","hong","honk","hons","hood","hoof","hook","hoon","hoop","hoot","hope","hops","hora","hore","hori","horn","hors","hose","hoss","host","hote","hots","houf","hour","hout","hove","howe","howf","howk","hows","hoya","hoys","hubs","huck","hued","huer","hues","huff","huge","hugs","hugy","huhu","huia","huic","huis","huma","humf","hump","hums","hung","hunh","hunk","huns","hunt","hups","hurt","hush","husk","huso","huss","huts","hwan","hyed","hyen","hyes","hyke","hymn","hype","hypo","hyps","hyte","iamb","ibex","ibis","iced","icer","ices","ichs","icky","icon","idea","idee","idem","ides","iffy","igad","iggs","ikan","ikat","ikon","imam","imid","immy","impi","imps","inby","inch","info","ingo","inia","inks","inky","inns","inro","inti","into","ions","iota","ired","ires","irid","iris","irks","iron","isba","isit","isms","isna","isos","itas","itch","item","iure","iwis","ixia","izar","jabs","jack","jade","jafa","jaga","jagg","jags","jake","jaks","jamb","jams","jane","jann","jape","japs","jark","jarp","jars","jasp","jass","jasy","jato","jauk","jaup","java","jaws","jaxy","jays","jazy","jazz","jean","jeat","jedi","jeed","jeep","jeer","jees","jeez","jefe","jeff","jehu","jeon","jerk","jess","jest","jete","jets","jeux","jews","jiao","jibb","jibe","jibs","jiff","jigs","jimp","jink","jinn","jins","jinx","jird","gism","jive","jivy","jozz","jobe","jobs","jock","joco","joes","joey","jogs","john","join","joke","joky","jomo","jong","jook","jors","josh","joss","jota","jots","jouk","jour","jows","joys","juba","jube","juco","judo","juds","judy","juga","jugs","juju","juke","juku","jump","junk","jupe","jura","jure","jury","just","jute","juts","juve","jynx","kabs","kade","kadi","kaed","kaes","kafs","kago","kagu","kaid","kaie","kaif","kaik","kaim","kain","kais","kaka","kaki","kaks","kama","kame","kami","kana","kane","kang","kans","kant","kaon","kapa","kaph","kara","kark","karn","karo","kart","kata","kati","kats","kava","kawa","kaws","kayo","kays","kazi","kbar","keas","kebs","keck","keds","keef","keek","keen","keep","keet","kefs","kegs","keir","keks","kemb","kemp","keno","kens","kent","kepi","keps","kept","kerb","kerf","kern","kero","kesh","kest","keta","kete","keto","kets","keys","khaf","khan","khat","khet","khis","khor","khud","kibe","kick","kids","kief","kier","kiff","kifs","kina","kind","kine","king","kink","kino","kins","kipe","kipp","kips","kirk","kirn","kirs","kish","kiss","kist","kite","kith","kits","kiva","kiwi","knag","knap","knar","knee","knew","knit","knob","knop","knot","know","knub","knur","knut","koan","koap","koas","kobo","kobs","koff","koha","kois","koji","kond","konk","kons","kook","koph","kops","kora","kore","koro","kors","koru","koss","koto","kows","krab","kris","ksar","kudo","kudu","kueh","kues","kufi","kuia","kuku","kuna","kune","kuri","kuru","kuta","kuti","kutu","kuzu","kvas","kyak","kyar","kyat","kybo","kyes","kynd","kyne","kype","kyte","kyus","mabe","mace","mach","mack","macs","made","mads","maes","mage","magg","magi","mags","maid","maik","maim","main","mair","make","maki","mako","maks","mama","mams","mana","mand","mane","mang","mani","mano","mans","many","maps","mara","marc","mard","mare","marg","mark","marm","mars","mart","mary","masa","mase","mash","mask","mass","mast","masu","mate","math","mats","matt","maty","maud","maun","maut","mawk","mawn","mawr","maws","maxi","maya","mayo","mays","maze","mazy","mead","mean","meat","meck","meds","meed","meek","meer","mees","meet","meff","mega","megs","mein","meme","memo","mems","mend","mene","meng","meno","ment","menu","meou","meow","merc","mere","meri","merk","mesa","mese","mesh","mess","meta","mete","meth","mets","meus","meve","mews","meze","mezz","mhos","mibs","mica","mice","mich","mick","mico","mics","midi","mids","mien","miff","migg","migs","miha","mihi","mike","mime","mina","mind","mine","ming","mini","mink","mino","mint","minx","miny","mips","mire","miri","mirk","miro","mirs","mirv","miry","mise","miso","miss","mist","mite","mitt","mity","mixt","mixy","mizz","mnas","moai","moan","moas","moat","mobe","mobs","moby","moch","mock","mocs","mode","modi","mods","moer","moes","mofo","mogs","mohr","moit","mojo","moke","moki","moko","mome","momi","moms","mona","mong","monk","mono","mons","mony","mood","mooi","mook","moon","moop","moor","moos","moot","mope","mops","mopy","mora","more","morn","mors","mort","mose","mosh","mosk","moss","most","mote","moth","moti","mots","mott","motu","moue","moup","mous","move","mowa","mown","mows","moxa","moya","moys","moze","mozo","mozz","much","muck","muds","muff","mugg","mugs","muid","muir","mumm","mump","mums","mumu","mung","muni","muns","munt","muon","mura","mure","murk","murr","muse","mush","musk","muso","muss","must","mute","muti","muts","mutt","muzz","mycs","myna","myth","myxo","mzee","nabe","nabk","nabs","nach","nada","nads","naff","naga","nags","naif","naik","nain","name","nams","namu","nana","nane","nans","naoi","naos","napa","nape","naps","narc","nard","nare","nark","nary","nats","nave","navy","nays","naze","nazi","neap","near","neat","nebs","neck","neds","need","neem","neep","nefs","negs","neif","neks","nema","nemn","nene","neon","neps","nerd","nerk","nesh","ness","nest","nete","nets","nett","neuk","neum","neve","nevi","news","newt","next","nibs","nice","nick","nide","nidi","nids","nied","nief","nies","nife","niff","nigh","nimb","nims","nine","nipa","nips","nish","nisi","nite","nits","nixe","nixy","noah","nobs","nock","node","nodi","nods","noes","nogg","nogs","noir","noma","nome","noms","nona","none","nong","noni","nook","noon","noop","nope","nori","nork","norm","nose","nosh","nosy","nota","note","nott","noun","noup","nous","nout","nova","nown","nows","nowt","nowy","noys","nubs","nude","nuff","nuke","numb","nuns","nurd","nurr","nurs","nuts","nyas","nyed","nyes","oafs","oaks","oaky","oars","oary","oast","oath","oats","obas","obes","obey","obia","obis","obit","oboe","obos","ocas","occy","oche","octa","odah","odas","odds","odea","odes","odic","odor","odso","ofay","offs","ogam","ogee","ogre","ohed","ohia","ohms","ohos","oiks","oink","oint","okas","okay","okeh","okes","okra","okta","ombu","omen","omer","omit","omov","once","oner","ones","onie","onos","onst","onto","onus","onyx","oofs","oofy","oohs","ooms","oons","oont","oops","oose","oosy","oots","ooze","oozy","opah","oped","open","opes","oppo","opts","opus","orad","orbs","orby","orca","orcs","ordo","ords","ores","orfe","orfs","orgy","orra","orts","oryx","orzo","osar","oses","ossa","otic","otto","ouch","ouds","ouks","ouma","oupa","ouph","oups","ourn","ours","oust","outs","ouzo","oven","over","ovum","owed","ower","owes","owns","owre","owse","owts","oxen","oxer","oxes","oxid","oxim","oyer","oyes","oyez","paca","pace","pack","paco","pacs","pact","pacy","padi","pads","page","pahs","paid","paik","pain","pair","pais","pams","pand","pane","pang","pans","pant","papa","pape","paps","para","pard","pare","park","parp","parr","pars","part","pase","pash","pass","past","pate","path","pats","patu","paty","paua","pave","pavs","pawa","pawk","pawn","paws","pays","peag","peak","pean","pear","peas","peat","peba","pech","peck","pecs","peds","peed","peek","peen","peep","peer","pees","pegh","pegs","pehs","pein","peke","pend","pene","peni","penk","pens","pent","peon","pepo","peps","pere","peri","perk","perm","pern","perp","pert","perv","peso","pest","pets","pews","pfft","pfui","phat","phew","phis","phiz","phoh","phon","phos","phot","phut","pian","pias","pica","pice","pick","pics","pied","pier","pies","piet","pigs","pika","pike","piki","pima","pimp","pina","pine","ping","pink","pins","pint","piny","pion","pioy","pipa","pipe","pipi","pips","pipy","pirn","pirs","pise","pish","piso","piss","pita","pith","pits","pity","pium","pixy","pize","poas","pock","poco","pods","poem","poep","poet","pogo","pogy","pois","poke","poky","pome","pomo","pomp","poms","pond","pone","pong","ponk","pons","pont","pony","pood","poof","pooh","pook","poon","poop","poor","poos","poot","pope","pops","pore","pork","porn","port","pory","pose","posh","poss","post","posy","pote","pots","pott","pouf","pouk","pour","pout","pown","pows","poxy","pozz","prad","pram","prao","prat","prau","pray","pree","prem","prep","prex","prey","prez","prig","prim","proa","prob","prod","prof","prog","prom","proo","prop","pros","prow","pruh","prys","psis","psst","ptui","pube","pubs","puce","puck","puds","pudu","puer","puff","pugh","pugs","puha","puir","puja","puka","puke","puku","puma","pump","pumy","puna","pung","punk","puns","punt","puny","pupa","pups","pupu","pure","puri","purr","purs","push","puss","puts","putt","putz","puys","pyas","pyat","pyes","pyet","pyic","pyin","pyne","pyot","pyre","pyro","qadi","qaid","qats","qoph","quad","quag","quai","quat","quay","quep","quey","quid","quin","quip","quit","quiz","quod","quop","rabi","raca","race","rach","rack","racy","rade","rads","raff","raft","raga","rage","ragg","ragi","rags","rahs","raia","raid","raik","rain","rais","rait","raja","rake","raki","raku","rami","ramp","rams","rana","rand","rang","rani","rank","rant","rape","raps","rapt","rare","rark","rase","rash","rasp","rast","rata","rate","rath","rato","rats","ratu","raun","rave","rawn","raws","raya","rays","raze","razz","read","reak","ream","rean","reap","rear","rebs","reck","recs","redd","rede","redo","reds","reed","reef","reek","reen","rees","refs","reft","rego","regs","rehs","reif","reik","rein","reis","reke","rems","rend","renk","rens","rent","reny","reos","repo","repp","reps","resh","rest","rete","rets","revs","rews","rhea","rhos","rhus","rias","riba","ribs","rice","rich","rick","ricy","ride","rids","riem","rife","riff","rifs","rift","rigg","rigs","rima","rime","rims","rimu","rimy","rind","rine","ring","rink","rins","riot","ripe","ripp","rips","ript","rise","risk","risp","rite","rits","ritt","ritz","riva","rive","rivo","riza","road","roam","roan","roar","robe","robs","roch","rock","rocs","rode","rods","roed","roes","roin","roji","roke","roks","roky","roma","romp","roms","rone","rong","ront","rood","roof","rook","room","roon","roop","roos","root","rope","ropy","rore","rort","rory","rose","rost","rosy","rota","rote","roti","roto","rots","roue","roum","roup","rout","roux","rove","rows","rowt","rube","rubs","ruby","ruck","rucs","rudd","rude","ruds","rued","ruer","rues","ruff","ruga","rugs","ruin","rukh","rume","rump","rums","rund","rune","rung","runs","runt","rurp","ruru","rusa","ruse","rush","rusk","rust","ruth","ruts","ryas","ryes","ryfe","ryke","rynd","ryot","rype","sabe","sabs","sack","sacs","sade","sadi","sado","sads","safe","saft","saga","sage","sago","sags","sagy","saic","said","saim","sain","sair","sais","sake","saki","sama","same","samp","sams","sand","sane","sang","sank","sans","sant","saps","sard","sari","sark","sars","sash","sass","sate","sati","saut","save","savs","sawn","saws","saxe","says","scab","scad","scag","scam","scan","scar","scat","scaw","scog","scop","scot","scow","scry","scud","scug","scum","scup","scur","scut","scye","seam","sean","sear","seas","seat","sech","seco","secs","sect","seed","seek","seem","seen","seep","seer","sees","sego","segs","seif","seik","seir","seis","sekt","seme","semi","sena","send","sene","sens","sent","seps","sept","sera","sere","serf","serk","serr","sers","sese","sesh","sess","seta","sets","sett","sewn","sews","sext","sexy","seys","shad","shag","shah","sham","shan","shat","shaw","shay","shea","shed","shes","shet","shew","shim","shin","ship","shir","shit","shiv","shmo","shod","shoe","shog","shoo","shop","shot","show","shri","shun","shut","shwa","sibb","sibs","sice","sich","sick","sics","sida","side","sidh","sien","sies","sift","sigh","sign","sijo","sika","sike","sima","simi","simp","sims","sind","sine","sing","sinh","sink","sins","sipe","sips","sire","siri","sirs","siss","sist","site","sith","sits","sitz","size","sizy","sjoe","skag","skas","skat","skaw","skee","skeg","sken","skeo","skep","sker","sket","skew","skid","skim","skin","skio","skip","skis","skit","skry","skua","skug","skyf","skyr","smee","smew","smir","smit","smog","smug","smur","smut","snab","snag","snap","snar","snaw","sneb","sned","snee","snib","snig","snip","snit","snob","snod","snog","snot","snow","snub","snug","snye","soak","soap","soar","soba","sobs","soca","sock","socs","soda","sods","sofa","soft","sogs","soho","sohs","soja","soke","soma","some","soms","somy","sone","song","sons","sook","soom","soon","soop","soot","soph","sops","sora","sorb","sord","sore","sori","sorn","sort","soss","soth","sots","souk","soum","soup","sour","sous","sout","sovs","sowf","sowm","sown","sowp","sows","soya","soys","spae","spag","spam","span","spar","spas","spat","spaw","spay","spaz","spec","sped","spek","spet","spew","spic","spie","spif","spik","spim","spin","spit","spiv","spod","spot","spry","spud","spue","spug","spun","spur","sris","stab","stag","stap","star","stat","staw","stay","sted","stem","sten","step","stet","stew","stey","stie","stim","stir","stoa","stob","stop","stot","stow","stub","stud","stum","stun","stye","suba","subs","such","suck","sudd","suds","sued","suer","sues","suet","sugh","suid","suit","sukh","suks","sumo","sump","sums","sumy","sung","sunk","sunn","suns","supe","sups","suqs","sura","surd","sure","surf","suss","susu","swab","swad","swag","swam","swan","swap","swat","sway","swee","swey","swig","swim","swiz","swob","swop","swot","swum","sybo","syce","syed","syen","syes","syke","sync","synd","syne","sype","syph","tabi","tabs","tabu","tace","tach","tack","taco","tact","tads","taed","taes","tags","taha","tahr","taig","tain","tais","tait","taka","take","taki","taks","taky","tame","tamp","tams","tana","tane","tang","tanh","tank","tans","taos","tapa","tape","taps","tapu","tara","tare","tarn","taro","tarp","tars","tart","tash","task","tass","tate","tath","tats","tatt","tatu","taus","taut","tava","tavs","tawa","taws","tawt","taxa","taxi","tays","tead","teak","team","tear","teas","teat","tech","tecs","teds","tedy","teed","teek","teem","teen","teer","tees","teff","tefs","tegg","tegs","tegu","tehr","teme","temp","tems","tend","tene","tens","tent","tepa","terf","term","tern","test","tete","teth","tets","tews","text","thae","than","thar","that","thaw","thee","them","then","thew","they","thig","thin","thio","thir","this","thon","thou","thro","thru","thud","thug","thus","tiar","tice","tich","tick","tics","tide","tids","tidy","tied","tier","ties","tiff","tift","tige","tigs","tika","tike","tiki","time","tind","tine","ting","tink","tins","tint","tiny","tipi","tips","tipt","tire","tiro","tirr","tite","titi","tits","tivy","tizz","toad","toby","tock","toco","tocs","tods","tody","toea","toed","toes","toey","toff","toft","tofu","toga","toge","togs","toho","toit","toke","toko","tomb","tome","tomo","toms","tone","tong","tonk","tons","tony","took","toom","toon","toot","tope","toph","topi","topo","tops","tora","torc","tore","tori","torn","toro","torr","tors","tort","tory","tosa","tose","tosh","toss","tost","tote","tots","touk","toun","tour","tout","town","tows","towt","towy","toyo","toys","toze","trad","tram","trap","trat","tray","tree","tref","trek","tres","tret","trew","trey","trez","trie","trig","trim","trin","trio","trip","trod","trog","tron","trop","trot","trow","troy","true","trug","trye","tryp","tsar","tsks","tuan","tuba","tube","tubs","tuck","tufa","tuff","tuft","tugs","tuis","tump","tums","tuna","tund","tune","tung","tuns","tuny","tups","turd","turf","turk","turm","turn","tush","tusk","tuts","tutu","tuzz","twae","twas","tway","twee","twig","twin","twit","twos","tyde","tyed","tyee","tyer","tyes","tygs","tyin","tyke","tymp","tynd","tyne","type","typo","typp","typy","tyre","tyro","tyte","tzar","udon","udos","ueys","ufos","ughs","ukes","umbo","umph","umps","umpy","unai","unau","unbe","unce","unci","unco","unde","undo","undy","unis","unit","unto","upas","upby","updo","upgo","upon","upsy","upta","urao","urbs","urde","urds","urdy","urea","ures","urge","uric","urns","urps","ursa","urus","urva","used","user","uses","utas","utes","utis","utus","uvae","uvas","uvea","vacs","vade","vaes","vagi","vags","vain","vair","vamp","vane","vang","vans","vant","vara","vare","vars","vary","vasa","vase","vast","vats","vatu","vaus","vaut","vavs","vaws","veep","veer","vees","vega","vego","vehm","vein","vena","vend","vent","vera","verb","verd","vers","vert","very","vest","veto","vets","vext","viae","vias","vibe","vibs","vice","vide","vids","vied","vier","vies","view","viga","vigs","vims","vina","vine","vino","vins","vint","viny","vire","visa","vise","vita","vite","viva","vive","vivo","vizy","voar","voes","void","vors","vote","vows","vrot","vrou","vrow","vugg","vugh","vugs","vums","wabs","wack","wadd","wade","wadi","wads","wadt","wady","waes","waff","waft","wage","wags","waid","waif","wain","wair","wais","wait","waka","wake","wakf","wame","wand","wane","wang","wank","wans","want","wany","waps","waqf","warb","ward","ware","wark","warm","warn","warp","wars","wart","wary","wase","wash","wasm","wasp","wast","wate","wats","watt","wauk","waur","wave","wavy","wawa","wawe","waws","waxy","ways","weak","wean","wear","webs","weds","weed","week","weem","ween","weep","weer","wees","weet","weft","weid","weir","weka","wemb","wems","wena","wend","wens","went","wept","were","wero","wert","west","weta","wets","wexe","weys","whae","wham","whap","what","whee","when","whet","whew","whey","whid","whig","whim","whin","whio","whip","whir","whit","whiz","whoa","whom","whop","whot","whow","whup","whys","wice","wich","wick","wide","wife","wigs","wimp","wind","wine","wing","wink","winn","wino","wins","winy","wipe","wire","wiry","wise","wish","wisp","wiss","wist","wite","with","wits","wive","woad","wock","woes","wofs","wogs","woke","woks","womb","wonk","wons","wont","wood","woof","woon","woos","woot","wops","word","wore","work","worm","worn","wort","wost","wots","wove","wowf","wows","wrap","wren","writ","wuds","wudu","wuss","wych","wyes","wynd","wynn","wyns","wyte","xyst","yaba","yack","yads","yaff","yagi","yags","yahs","yaks","yams","yang","yank","yapp","yaps","yard","yare","yark","yarn","yarr","yate","yaud","yaup","yawn","yawp","yaws","yawy","yays","ybet","yead","yeah","yean","year","yeas","yebo","yech","yede","yeed","yegg","yens","yeps","yerd","yerk","yesk","yest","yeti","yett","yeuk","yeve","yews","ygoe","yids","yike","yins","yipe","yips","yird","yirk","yirr","yite","ympe","ympt","yobs","yock","yode","yodh","yods","yoga","yogh","yogi","yoke","yoks","yomp","yond","yoni","yont","yoof","yoop","yore","york","yorp","youk","your","yous","yowe","yows","yuan","yuca","yuch","yuck","yuft","yuga","yugs","yuke","yuko","yuks","yuky","yump","yunx","yups","yurt","yutz","yuzu","ywis","zack","zags","zany","zaps","zarf","zati","zeas","zebu","zeds","zees","zein","zeks","zeps","zerk","zero","zest","zeta","zeze","zhos","ziff","zigs","zimb","zinc","zine","zing","zins","zips","zite","ziti","zits","zizz","zobo","zobu","zoea","zoic","zona","zone","zonk","zoom","zoon","zoos","zoot","zori","zouk","zupa","zurf","zyga","zyme"];export function random_word4(){return WORDS[random_int(0,WORDS.length-1)]};export function set_clock(e){e==U&&(e=now_raw);let t=e-now;TRACE_TIME&&logg(str.conv(" >> set_clock, targ={n3}, now={n3}, delta={n3}, old_dilated={n3}",e,now,t,g_era_dilated)),g_era_dilated+=t,loom_delta_clock(t)};export function set_clock_scale(e){TRACE_TIME&&logg(str.conv(" >> set_clock_scale, {n3}",e)),e!=g_time_scale&&(g_time_scale=e,g_era_dilated=now,g_era_raw=now_raw)};const SS_DATE=0;export function day_of_year(e){var t=[31,28,31,30,31,30,31,31,30,31,30,31],s=e.getFullYear();(s%4==0&&s%100!=0||s%400==0)&&(t[1]=29);for(var n=0,_=0;_<e.getMonth()-1;_++)n+=t[_];return n+=e.getDate()};export function week_of_year_sunday(e){debugger;return ERR};export function week_of_year_monday(e){debugger;return ERR};export function day_of_week_monday(e){let t=e.getDay();return 0==t?6:t-1};function push_system_modal(){let e=getn(runtime,F_os_modal);setv(_M,0,runtime,F_os_modal,e+1)}function pop_system_modal(){let e=getn(runtime,F_os_modal);setv(_M,0,runtime,F_os_modal,e+1)}var g_style=null;export function css_append(e){null!=g_style&&g_style.parent.removeChild(g_style),(g_style=document.createElement("style")).innerHTML=e,document.head.appendChild(g_style)};export function os_command(e,...t){debugger};export function os_run(e,...t){debugger};export function os_open(e){debugger};export function os_file_name(e){return e.name};export function os_read_str(e,t){var s=new FileReader;s.onload=(e=>{var s=e.target.result;t.code(s)}),s.readAsText(e)};export function os_write_str(e,t){var s=document.createElement("a"),n=new Blob([t],{type:"text/plain"});s.href=URL.createObjectURL(n),s.download=e,s.click()};export function os_write_bytes(e,t){var s=document.createElement("a"),n=t.arraybuf.slice(0,t.position),_=new Blob([n],{type:"application/octet-stream"});s.href=URL.createObjectURL(_),s.download=e,s.click()};export function file_write_str(e,t){debugger};export function os_pick_files(e,t,s){var n=null,_=document.createElement("input");_.type="file";for(let e in s)switch(e){case"extra":n=s.extra;break;case"prompt":s.prompt;break;case"suffixes":_.accept=fix_suffixes(s.suffixes);break;case"multiple":_.multiple=s.multiple==Y;break;default:argument_err("bad property: "+e)}function fix_suffixes(e){var t=e.replace(/\*/g,"");return t=t.replace(/;/g,", ")}_.onchange=(e=>{var s=e.target.files[0];logg(`  in onChange, name=${s.name}, size=${s.size}, type=${s.type}`);var _=new a_tree(_M,"os_pick_files"),o=1;for(let t of e.target.files)setv(_M,0,_,o,t),o+=1;t.code(_,n)}),logg(`ask file, accept=${_.accept}`),_.click()};export function os_pick_save(e,t,s){debugger};export function os_pick_dir(e,t,s){debugger};export function os_clipboard_copy(e){const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)};export function os_clipboard_paste(){return"ERROR"};export function loom_timer(e,t,...s){let n,_,o=alloc_loom_elem(t);if(o.nreps<1)return U;for(o.func=e,o.evkind=EV_TIMER,n=s.length,_=0;_<n;_++)o.parm_array.push(s[_]);return now>=o.time&&o.prereq==U&&(TRACE_LOOM&&logg("-- loom_timer, firing immediate"),o.countx=1,call_deferred_func(o),o.last_seen=now,o.time=o.interval,o.is_relative=!0,1==o.nreps)?U:(g_loom.push(o),o.id)};export function loom_animate_curve(e,t,s,n,_){debugger;return null};export function loom_animate_box(e,t,s,n,_,o,r,a,i){debugger;return null};export function loom_clear(e){let t,s,n;for(let t in e)switch(t){case"id":n=e.id;break;case"group":s=e.group;break;default:argument_err("bad property: "+t)}for(t=g_loom.length;t--;)g_loom[t].group!=s&&g_loom[t].id!=n||loom_clearx(t)};export function loom_clear_all(){let e,t;for(e=g_loom.length;e--;)(t=g_loom[e]).group==IDE_GROUP&&t.evkind==EV_TIMER&&call_deferred_func(t),loom_clearx(e)};export function loom_delta_clock(e){let t,s;for(t=g_loom.length;t--;)s=g_loom[t],TRACE_LOOM&&logg(str.conv("loom_delta, lx={}, time={n3}, is_rel={bool}",t,s.time,s.is_relative)),s.is_relative&&(s.time+=e,TRACE_LOOM&&logg(str.conv("  -- adjusted loom item time to {n3}",s.time)))};export function loom_animate_num_linear(e,t){return loom_animate_num_bezier(e,U,U,U,U,t)};export function loom_animate_num_bezier(e,t,s,n,_,o){let r=null,a=0,i=1,u=U,c=!0;for(let e in o)switch(e){case"busyflag":r=o.busyflag;break;case"endval":a=o.endval;break;case"duration":i=o.duration.mag;break;case"group":u=o.group;break;case"is_dilated":c=o.is_dilated==Y;break;default:argument_err("bad property in options: "+e)}let l=path_getv(e,EF_VAL_IS_NUM);if(TRACE_ANIMATION&&logg(str.conv("adding bez animation startval={n,3}, endval={n,3}, duration={}",l,a,i)),l!==a){let o=new a_loom_anim_num;return g_num_animations.push(o),path_setv(_M,WHERE_LOOM,r,Y),o.valpath=e.clone(),o.busypath=r.clone(),o.startval=l,o.endval=a,o.is_dilated=c,o.starttime=c?now:now_raw,o.duration=i,o.bez_x1=t,o.bez_y1=s,o.bez_x2=n,o.bez_y2=_,o.id=loom_next_id(),o.id}return U};export function random_color(){return random_int(0,16777215)};export function hsv_to_color(e){return hsv(getn(e,F_hue),getn(e,F_saturation),getn(e,F_value))};export function hsv(e,t,s){if(is_err_enum_b(e)||is_err_enum_b(t)||is_err_enum_b(s))return ERR;if(e===U||t===U||s===U)return U;let n=0,_=0,o=0,r=t/100,a=s/100,i=Math.floor(e/60)%6,u=e/60-Math.floor(e/60),c=a*(1-r),l=a*(1-u*r),p=a*(1-(1-u)*r);switch(i){case 0:n=a,_=p,o=c;break;case 1:n=l,_=a,o=c;break;case 2:n=c,_=a,o=p;break;case 3:n=c,_=l,o=a;break;case 4:n=p,_=c,o=a;break;case 5:n=a,_=c,o=l}return Math.round(255*n)<<16|Math.round(255*_)<<8|Math.round(255*o)};export function color_to_hsv(e){if(is_err_enum_b(e))return ERR_TREE;if(e===U)return U_TREE;let t=e>>16&255,s=e>>8&255,n=255&e,_=Math.max(t,s,n),o=Math.min(t,s,n),r=0,a=0,i=0;r=_===o?0:_===t?(60*(s-n)/(_-o)+360)%360:_===s?60*(n-t)/(_-o)+120:60*(t-s)/(_-o)+240,i=_,a=0===_?0:(_-o)/_;let u=new a_tree("std","hsv");return setv(_M,0,u,F_hue,Math.round(r)),setv(_M,0,u,F_saturation,Math.round(100*a)),setv(_M,0,u,F_value,Math.round(i/255*100)),u};export function r255(e){return is_err_enum_b(e)||e<0?ERR:e===U?U:e>>>16&255};export function g255(e){return is_err_enum_b(e)||e<0?ERR:e===U?U:e>>>8&255};export function b255(e){return is_err_enum_b(e)||e<0?ERR:e===U?U:255&e};export function a255(e){return is_err_enum_b(e)||e<0?ERR:e===U?U:e>>>24&255};export function r1(e){return is_err_enum_b(e)||e<0?ERR:e===U?U:(e>>>16&255)/255};export function g1(e){return is_err_enum_b(e)||e<0?ERR:e===U?U:(e>>>8&255)/255};export function b1(e){return is_err_enum_b(e)||e<0?ERR:e===U?U:(255&e)/255};export function a1(e){return is_err_enum_b(e)||e<0?ERR:e===U?U:(e>>>24&255)/255};export function rgb255(e,t,s,n=0){let _,o,r,a;return is_err_enum_b(e)||is_err_enum_b(t)||is_err_enum_b(s)||is_err_enum_b(n)?ERR:e===U||t===U||s===U||n===U?U:(_=e<0?0:e>255?255:e,o=t<0?0:t>255?255:t,r=s<0?0:s>255?255:s,(a=n<0?0:n>255?255:n)<<24|_<<16|o<<8|r)};export function rgb1(e,t,s,n=0){let _,o,r,a;return is_err_enum_b(e)||is_err_enum_b(t)||is_err_enum_b(s)||is_err_enum_b(n)?ERR:e===U||t===U||s===U||n===U?U:(e<0?e=0:e>1&&(e=1),t<0?t=0:t>1&&(t=1),s<0?s=0:s>1&&(s=1),n<0?n=0:n>1&&(n=1),(a=Math.round(255*n))<<24|(_=Math.round(255*e))<<16|(o=Math.round(255*t))<<8|(r=Math.round(255*s)))};export function tree_count(e){let t,s;if(e instanceof a_tree)s=e,null!=k.g_curr_block&&s.eflags&NF_STATEFUL&&add_node_dependency(s);else if(e instanceof a_path){if(t=path_to_pathx(e),null!=k.g_curr_block&&t.basepath.base.eflags&NF_STATEFUL&&add_pathx_dependency(t),null===t||!t.exists)return 0;s=t.lev[t.lastx].node}else argument_err("expected path or tree");return null===s||null===s.children?0:s.children.length};export function tree_lo(e,t=!0){let s,n,_;if(e instanceof a_tree)n=e,t&&null!=k.g_curr_block&&n.eflags&NF_STATEFUL&&add_node_dependency(n);else if(e instanceof a_path){if(s=path_to_pathx(e),t&&null!=k.g_curr_block&&s.basepath.base.eflags&NF_STATEFUL&&add_pathx_dependency(s),null===s||!s.exists)return U;n=s.lev[s.lastx].node}else argument_err("expected path or tree");return null===n||null===n.children||0===n.children.length?U:is_numeric(_=n.children[0].sub)==Y?_:U};export function tree_hi(e,t=!0){let s,n,_,o;if(e instanceof a_tree)n=e,t&&null!=k.g_curr_block&&n.eflags&NF_STATEFUL&&add_node_dependency(n);else if(e instanceof a_path){if(s=path_to_pathx(e),t&&null!=k.g_curr_block&&s.basepath.base.eflags&NF_STATEFUL&&add_pathx_dependency(s),null===s||!s.exists)return U;n=s.lev[s.lastx].node}else argument_err("expected path or tree");if(null===n||null===n.children||0===n.children.length)return U;for(o=n.children.length-1;o>=0;){if(is_numeric(_=n.children[o].sub)==Y)return _;o-=1}return U};export function tree_next_lo(e,t=!0){let s=tree_lo(e,t);return s===U?1:s-1};export function tree_next_hi(e,t=!0){let s=tree_hi(e,t);return s===U?1:s+1};export function tree_sibling_hi(e){let t=path_to_pathx(e);if(null==t||!t.exists||0==t.lastx)return null;let s=t.lev[t.lastx-1].node,n=t.lev[t.lastx].subx;if((n+=1)>=s.children.length)return null;let _=e.clone(),o=s.children[n].sub;return _.key[_.key.length-1]=o,_};export function tree_sibling_lo(e){let t=path_to_pathx(e);if(null==t||!t.exists||0==t.lastx)return null;let s=t.lev[t.lastx-1].node,n=t.lev[t.lastx].subx;if((n-=1)<0)return null;let _=e.clone(),o=s.children[n].sub;return _.key[_.key.length-1]=o,_};let g_sortkeys;function collate_indirect(e,t){let s,n,_,o;for(o of g_sortkeys)if(0!==(s=collate_open(n=get_generic(e,o),_=get_generic(t,o))))return s;return 0}export function tree_index(e,...t){let s,n=new a_tree("std","tree_index");g_sortkeys=t;let _=[],o=new a_loop({across:e});for(;o.next();)s=o.path.clone(),_.push(s);for(s of(_.sort(collate_indirect),_))append_val(null,0,s,addr(n));return n};export function tree_find(e,t){let s=new a_loop({across:e});for(;s.next();)if(eq2(t,s.val))return s.index;return U};export function last_subscript(e){return null==e||0==e.key.length?ERR:e.key[e.key.length-1]};function escape_plain_for_html(e){let t,s="",n=0,_=e.length;for(;n<_;){switch(t=e.charAt(n),n+=1,t){case"\r":n<_&&"\n"==e.charAt(n)&&(n+=1),t="<br>";break;case"\n":t="<br>";break;case"<":t="&lt;";break;case">":t="&gt;";break;case"&":t="&amp;";break;case"'":t="&apos;"}s+=t}return s}export function draw_str(e,t,s){let n,_,o,r,a,i,u=U,c=!1,l=0,p=BLACK,d=null,g=null,m=BLACK,E=0,h=U,x=U,f=!1,b=null,R=!1,A=0,N=!1,T=!1,k=!1,y=CENTER,F=U,S=null,v=1,I=0,C=0,w=0,O=BLACK,L=!0,M=6,D=pt_to_dots(e,10),P=!1,G=!1,B=!1,V=.5,H=!1;function set_text(e){var t;R?(H||(r.style.whiteSpace="nowrap"),t=e):(r.style.whiteSpace=H?"pre-wrap":"pre",t=escape_plain_for_html(e)),r.innerHTML=t}for(let e in s)switch(e){case"backcolor":u=s.backcolor;break;case"bold":c=s.bold===Y;break;case"border":l=s.border;break;case"border_color":p=s.border_color;break;case"box":g=s.box;break;case"color":m=s.color;break;case"input":N=s.input===Y;break;case"fill":u=s.fill;break;case"font":b=s.font;break;case"html":R=s.html===Y;break;case"indent":A=s.indent;break;case"italic":k=s.italic===Y;break;case"just":y=s.just;break;case"leading":F=s.leading;break;case"metrics":S=s.metrics;break;case"opacity":v=clamp(numeric_arg(s.opacity),0,1);break;case"corner":E=s.corner;break;case"sel":T=s.sel===Y;break;case"shadowx":I=s.shadowx;break;case"shadowy":C=s.shadowy;break;case"shadowr":w=s.shadowr;break;case"shadowc":O=s.shadowc;break;case"shrink":L=s.shrink===Y;break;case"shrink_min":M=s.shrink_min;break;case"size":D=s.size;break;case"strike":P=s.strike===Y;break;case"uhide":G=s.uhide===Y;break;case"und":B=s.und===Y;break;case"vert":(V=s.vert)<0&&(V=0),V>1&&(V=1);break;case"wrap":H=s.wrap===Y;break;case"xy":h=getn(s.xy,F_x),x=getn(s.xy,F_y);break;case"x":h=s.x;break;case"y":x=s.y;break;default:argument_err("bad option: "+e)}if(h!=U){if(x==U)return void(CHECKS&&argument_err("x was specified, but not y"))}else{if(x!=U)return void(CHECKS&&argument_err("y was specified, but not x"));if(null==g)d=e.bounds;else if(g instanceof a_tree||g instanceof a_path)d=tree_to_rect(g);else{if(!(g instanceof Rectangle))return void(CHECKS&&argument_err("bad box"));d=g}}if(D<=1){if(null==d)return;D=d.height*D}if(e.is_measuring){if(null!=d&&d.width!=U&&d.height!=U)return e.max_h=Math.max(e.max_h,d.left+d.width),void(e.max_v=Math.max(e.max_v,d.top+d.height));L=!1,y=LEFT,V=0,u=U,l=0}if(F==U?F=1.16*D:F<2&&(F*=D),a=t===U_STR?G?"":"U":null==t||""==t?" ":t,null==b&&(b=""),"$"===b.charAt(0)&&!0,null==d?(n=GIANT_WIDTH,_=GIANT_WIDTH,u=U,l=0,L=!1):(n=d.width==U?GIANT_WIDTH:y==CENTER?d.width-2*A:d.width-A,_=d.height==U?GIANT_WIDTH:d.height,u!==U&&draw_rect(e,{box:d,color:u,corner:E}),l>0&&draw_rect(e,{box:d,stroke:p,width:l,corner:E,pos:1})),n<=10||""==t||" "==t)return void(null!==S&&(setv(_M,0,S,F_x,0),setv(_M,0,S,F_y,0)));r=document.createElement("div"),T||(r.style.userSelect="none",r.style.webkitUserSelect="none"),r.style.cursor="",r.style.position="absolute",r.style.visibility="hidden",w>0&&(r.style.textShadow=`${I}px ${C}px ${w}px ${js_color_to_str(O)}`),null==d?(r.style.left=h.toFixed(1)+"px",r.style.top=x.toFixed(1)+"px"):H&&(r.style.width=n.toFixed(1)+"px"),set_attrib(r,y,v,b,c,k,m,B,P,D,F),set_text(a),e.appendChild(r);let K=r.getBoundingClientRect();TRACE_TEXT&&logg(str.conv(" size={}x{}, avail={}x{}",K.width,K.height,n,_)),i=0,F>D&&(i=F-D);let j=K.height-i;if(L&&null!=d&&(K.width>n||j>_)){let e=n/K.width,t=_/j,s=M/D,o=Math.max(s,.97*Math.min(e,t));D*=o,F*=o,r.style.fontSize=D.toFixed(1)+"px",r.style.lineHeight=F.toFixed(0)+"px",K=r.getBoundingClientRect(),i=0,F>D&&(i=F-D),j=K.height-i}if(K.width>n+5&&a.length>4){var z=round_down(a.length*n/K.width)-5;set_text(a=a.substr(0,z)+"..."),K=r.getBoundingClientRect()}if(e.is_measuring)return e.max_h=Math.max(K.width,e.max_h),e.max_v=Math.max(j,e.max_v),void r.parentNode.removeChild(r);if(null!==S)return setv(_M,0,S,F_x,K.width),setv(_M,0,S,F_y,j),void r.parentNode.removeChild(r);if(null==d)switch(y){case LEFT:case FLUSH:h+=A;break;case RIGHT:h=h-K.width-A;break;default:h-=Math.round((K.width+1)/2)}else{switch(y){case LEFT:case FLUSH:h=d.left+A;break;case RIGHT:h=d.left+d.width-K.width-A;break;default:h=d.left+Math.round((d.width-K.width+1)/2)}0==V?x=d.top:(o=Math.max(0,d.height-j)-.15*D,x=d.top+Math.round(o*V),TRACE_TEXT&&logg(str.conv(" vert={n,2}, boxv={n1}, renderedv={n1}, leftover={n1}",V,d.height,j,o)))}r.style.left=h.toFixed(0)+"px",r.style.top=x.toFixed(0)+"px",r.style.visibility=""};export var g_focus_elem=null;export var g_focus_field=null;var g_focus_id=1e3;function on_input_focus(e){var t=e.target,s=t.my_field;TRACE_INPUT&&logg(`INPUT: on_input_focus, label=${gets(s,F_in_label)}`),g_focus_elem=t,g_focus_field=s.clone()}function on_input_blur(e){var t=e.target,s=t.my_field;TRACE_INPUT&&logg(`INPUT: on_input_blur, label=${gets(s,F_in_label)}, val=${t.value}`),g_focus_elem=null,g_focus_field=null}function on_input_change(e){var t=e.target,s=t.my_field;TRACE_INPUT&&logg(str.conv("INPUT: on_input_change, newval=[{}]",t.value)),add_major_step(EV_INPUT),setv(_M,1,s,F_in_value,t.value),validate_input(s),TRACE_INPUT&&logg(str.conv(" selStart={}, selEnd={}",t.selectionStart,t.selectionEnd));var n=get_func(s,F_in_form_ready);null!=n&&n.code();var _=document.getElementById(t.my_warning_id);if(null!=_){var o=calc_warnss(t,s);_.innerText=o,TRACE_INPUT&&logg(`INPUT: warning text updated to [${o}]`)}}export function validate_input(e){var t,s=Y;null==(t=gets(e,F_in_value))&&(t=""),TRACE_INPUT&&logg(`validateinput, label=${gets(e,F_in_label)}, val=[${t}]`);var n=getn(e,F_in_minlen),_=getn(e,F_in_maxlen),o=getn(e,F_in_required)==Y;if(0==t.length)o?(s=N,TRACE_INPUT&&logg("  failed because empty, but required")):(s=Y,TRACE_INPUT&&logg("  okay because empty, not required"));else if(n!=U&&t.length<n)s=N,TRACE_INPUT&&logg("  failed because too short");else if(_!=U&&t.length>_)s=N,TRACE_INPUT&&logg("  failed because too long");else{var r=get_object(e,F_in_pattern);null!=r&&(r.lastIndex=0,r.test(t)||(s=N,TRACE_INPUT&&logg("  failed because pattern match failed")));var a=get_func(e,F_in_validator);if(null!=a){var i=a.code(e);i!=Y&&(s=N,TRACE_INPUT&&logg(`  failed because custom validator failed, val=${i}`))}}return setv(_M,0,e,F_in_ok,s),TRACE_INPUT&&logg(str.conv("  ..end validate, ok={}",s)),s};function calc_warnss(e,t){var s=getn(t,F_in_ok);TRACE_DINPUT&&logg(str.conv("  calc_warnss, ok_flag={}",s));var n="";return e.required&&0==e.value.trim().length?e.my_show_star?n=FIELD_EMPTY_SYMBOL:!0:s==N&&(n=FIELD_BAD_SYMBOL),n}export function draw_input(e,t,s,n){let _,o,r=U,a=!1,i=2,u=BLACK,c=TOMATO,l=null,p=BLACK,d=0,g=null,m="",E=0,h=!1,x=LEFT,f=U,b=80,R=1,A=!1,N=!0,T=pt_to_dots(e,10);if(t instanceof a_tree||t instanceof a_path)l=tree_to_rect(t);else{if(!(t instanceof Rectangle))return void argument_err("bad box");l=t}if(e.is_measuring)return e.max_h=Math.max(e.max_h,l.left+l.width),void(e.max_v=Math.max(e.max_v,l.top+l.height));for(let e in n)switch(e){case"bold":a=n.bold===Y;break;case"border":i=n.border;break;case"border_color":u=n.border_color;break;case"border_empty":c=n.border_empty;break;case"color":p=n.color;break;case"corner":d=n.corner;break;case"fill":r=n.fill;break;case"font":g=n.font;break;case"hint":m=n.hint;break;case"indent":E=n.indent;break;case"italic":h=n.italic===Y;break;case"just":x=n.just;break;case"leading":f=n.leading;break;case"opacity":R=clamp(numeric_arg(n.opacity),0,1);break;case"show_errs":N=n.show_errs===Y;break;case"show_star":A=n.show_star===Y;break;case"size":T=n.size;break;default:argument_err("bad option: "+e)}A&&(N=!0),null==g&&(g="");var k=document.createElement("input");switch(k.id=gets(s,F_in_label),TRACE_DINPUT&&logg(`draw_input, label=${k.id}`),k.spellcheck=getn(s,F_in_spellcheck)==Y,getn(s,F_in_kind)){case IN_COLOR:k.type="color";break;case IN_DATE:k.type="date";break;case IN_DATETIME:k.type="datetime";break;case IN_EMAIL:k.type="email";break;case IN_FILE:k.type="file";break;case IN_MONTH:k.type="month";break;case IN_NUMBER:k.type="number";break;case IN_PASSWORD:k.type="password";break;case IN_RANGE:k.type="range";break;case IN_TEL:k.type="tel";break;case IN_TIME:k.type="time";break;case IN_URL:k.type="url";break;case IN_WEEK:k.type="week";break;default:k.type="text"}if(k.oninput=on_input_change,k.onblur=on_input_blur,k.onfocus=on_input_focus,k.my_field=s,k.my_show_star=A,null==(_=leaf_getv(path_to_pathx(addr(s,F_in_value)),EF_VAL_IS_STR,!1))&&(_=""),k.value=_,T<1&&(T=l.height*T),f==U?f=1.16*T:f<2&&(f*=T),k.style.position="absolute",k.style.left=l.left.toFixed(1)+"px",k.style.top=l.top.toFixed(1)+"px",k.style.width=l.width.toFixed(1)+"px",k.style.height=l.height.toFixed(1)+"px",k.style.border=`${i.toFixed(1)}px solid ${js_color_to_str(u)}`,TRACE_DINPUT&&logg(`  input border, color=${js_color_to_str(u)}`),r!=U&&(k.style.backgroundColor=js_color_to_str(r)),k.style.boxSizing="border-box",(b=getn(s,F_in_maxlen))==U&&(b=80),k.maxLength=b,null!=(o=gets(s,F_in_hint))&&(k.placeholder=o),getn(s,F_in_required)==Y&&(k.required=!0),k.style.textIndent=E.toFixed(0)+"px",set_attrib(k,x,R,g,a,h,p,!1,!1,T,f),e.appendChild(k),N){let t;var y=document.createElement("div");y.id="warn_"+String(g_focus_id++),k.my_warning_id=y.id,e.appendChild(y),y.style.userSelect="none",y.style.webkitUserSelect="none",y.style.cursor="",y.style.position="absolute";var F,S=.12*l.height,v=(l.height,l.height,l.height);x==RIGHT?(F=l.left+S,t=LEFT):(F=l.left+l.width-S-v,t=RIGHT),y.style.left=F.toFixed(1)+"px",y.style.top=(l.top+2).toFixed(1)+"px",y.style.width=v.toFixed(1)+"px",y.style.height=(l.height-4).toFixed(1)+"px",y.style.verticalAlign="middle",y.style.pointerEvents="none",set_attrib(y,t,1,"",!1,!1,FIELD_EMPTY_COLOR,!1,!1,.6*l.height,U),y.innerText=calc_warnss(k,s)}};function set_attrib(e,t,s,n,_,o,r,a,i,u,c){let l;switch(t){case LEFT:l="left";break;case CENTER:l="center";break;case RIGHT:l="right";break;case FLUSH:l="justify";break;default:CHECKS&&argument_err("bad just"),l="left"}e.style.textAlign=l,1!=s&&(e.style.opacity=s.toFixed(3));var p=n.indexOf(":");""===n||"_sans"===n?n="sans-serif":"_serif"===n?n="serif":"_typewriter"===n&&(n="monospace"),p>0&&(e.style.fontWeight=n.substring(p+1),n=n.substring(0,p)),e.style.fontFamily=n,_&&(e.style.fontWeight="bold"),o&&(e.style.fontStyle="italic"),e.style.color=js_color_to_str(r);let d="";a&&(d+=" underline"),i&&(d+=" line-through"),""!=d&&(e.style.textDecoration=d),e.style.fontSize=u.toFixed(1)+"px",c!==U&&(e.style.lineHeight=c.toFixed(1)+"px")}export function draw_image(e,t,s){let n,_,o,r,a,i,u=null,c=U,l=null,p=null,d=0,g=U,m=U,E=!0,h=!0,x=.5,f=0,b=1,R=0,A=0,N=U,T=!0,k=.5,y=null;if(null===t)return TRACE_BITMAP&&logg("skipping draw_image of null picture"),null;TRACE_IMG&&logg(`draw_image, src=${t.sysobj.url.substr(0,70)}`);for(let e in s)switch(e){case"angle":!CHECKS||s.angle instanceof a_meas||argument_err("angle argument must be a meas"),0!==s.angle&&(u=s.angle);break;case"aspect":T=s.aspect===Y;break;case"blend":c=s.blend;break;case"box":l=s.box;break;case"corner":d=s.corner;break;case"grow":h=s.grow===Y;break;case"horz":x=s.horz,CHECKS&&(x<0||x>1)&&argument_err("bad horz");break;case"idss":y=s.idss;break;case"indent":f=s.indent;break;case"opacity":if(0==(b=clamp(numeric_arg(s.opacity),0,1)))return TRACE_IMG&&logg("draw_image, ignoring transparent image"),null;break;case"origin":s.origin instanceof a_tree||internal_err("bad arg"),R=getn(s.origin,F_x),A=getn(s.origin,F_y);break;case"originx":R=s.originx;break;case"originy":A=s.originy;break;case"shrink":E=s.shrink===Y;break;case"vert":k=s.vert,CHECKS&&(k<0||k>1)&&argument_err("bad horz");break;case"xy":s.xy instanceof a_tree||internal_err("bad arg"),g=getn(s.xy,F_x),m=getn(s.xy,F_y);break;case"x":g=s.x;break;case"y":m=s.y;break;default:argument_err("bad option: "+e)}if(g!=U){if(m==U)return void(CHECKS&&argument_err("x was specified, but not y"))}else{if(m!=U)return void(CHECKS&&argument_err("y was specified, but not x"));if(null==l)p=e.bounds;else if(l instanceof a_tree||l instanceof a_path)p=tree_to_rect(l);else{if(!(l instanceof Rectangle))return void(CHECKS&&argument_err("bad box"));p=l}}if(t==ERR_IMAGE){if(TRACE_IMG&&logg("draw_image, ERR"),null==p)return null;draw_rect(e,{box:p,fill:PINK,corner:10});return void draw_str(e,"ERR",{box:p,size:40})}let F=t.sysobj.cloneNode(!0);return F.url=t.sysobj.url,F.style.position="absolute",F.style.overflow="visible",F.style.userDrag="none",null!=y&&(F.id=y),0!=d&&(F.style.borderRadius=`${d.toFixed(1)}px`),1!=b&&(F.style.opacity=b.toFixed(3)),void 0==F.naturalWidth||0==F.naturalWidth?(F.src=F.url,TRACE_IMG&&logg(`image not preloaded, src=${F.src}`),F.onload=function callback_on_load(){TRACE_IMG&&logg(`...in callback_on_load of ${this.src.substr(0,70)}, natural=${this.naturalWidth} x ${this.naturalHeight}`);this.onload=null,this.onerror=null,draw_image2(this)},F.onerror=function callback_on_err(){TRACE_IMG&&logg(`...in callback_on_err of ${this.src.substr(0,70)}`);return this.onload=null,this.onerror=null,void draw_missing_image(e,p,this.src)},F.style.visibility="hidden"):(TRACE_IMG&&logg(`image ready, size=${F.naturalWidth}`),draw_image2(F)),void(null==e.can&&e.appendChild(F));function draw_image2(t){let s=t.naturalWidth,c=t.naturalHeight;if(null!==p)o=solve_rect({basis:p,pin:5,inset:f}),r=tree_to_rect(o),TRACE_IMG&&logg(` draw_image2, box=[${r.left}, ${r.top}], ${r.width} x ${r.height}, raw=${s} x ${c}`),n=r.width/s,a=r.height/c,T&&(n=min(n,a),a=n),E||(n=max(n,1),a=max(a,1)),h||(n=min(n,1),a=min(a,1)),TRACE_IMG&&logg(`  net ratios=${n.toFixed(3)}, ${a.toFixed(3)}`),_=round(n*s),i=round(a*c),g=r.left+(r.width-_)*x,m=r.top+(r.height-i)*k,t.style.left=`${g.toFixed(0)}px`,t.style.top=`${m.toFixed(0)}px`,t.style.width=`${_}px`,t.style.height=`${i}px`,null!=e.can&&e.ctx.drawImage(F,g,m,_,i);else if(null!=e.can){var l=e.ctx;TRACE_IMG&&logg(` draw_image2 canv nobox, ox=${R}, oy=${A}, size=${s},${c}`),l.save(),l.translate(g,m),null!=u&&l.rotate(u.mag),l.translate(-R,-A),l.drawImage(F,0,0),l.restore()}else{let e;if(r=new Rectangle(g,m,s,c),TRACE_IMG&&logg(` draw_image2 nobox, dest=[${r.left}, ${r.top}], ${r.width} x ${r.height}`),t.style.transformOrigin="0 0",null==u)e=`translate(${(g-R).toFixed(1)}px,${(m-A).toFixed(1)}px)`;else{if(N!=U){switch((N-1)%3){case 0:R=0;break;case 1:R=s/2;break;case 2:R=s;break;default:argument_err("bad pin")}switch((N-1)/3>>0){case 0:A=0;break;case 1:A=c/2;break;case 2:A=c;break;default:argument_err("bad pin")}}let t=Math.cos(u.mag),n=Math.sin(u.mag),_=1-t,o=t.toFixed(5),r=n.toFixed(5),a=-n*R+_*A+m-A;e=`matrix(${o},${r},${-r},${o},${(_*R+n*A+g-R).toFixed(1)},${a.toFixed(1)})`}t.style.transform=e}t.style.visibility=""}};function draw_missing_image(e,t,s){if(null!=t){var n=str.filepath_get_name(s);draw_rect(e,{box:t,color:PINK}),draw_str(e,`MISSING:\n${n}`,{box:t,size:12})}}export function find_font(e){return e};function calc_middle_of_stroke(e,t,s){var n=t/4;return solve_rectR({basis:e,inset:interpolate(s,0,1,n,-n)})}function calc_scaled_radius(e,t,s){if(0===e)return 0;let n=t/2,_=interpolate(s,0,1,e-n,e+n);return Math.max(0,_)}function svg_define_pattern(e,t){let s=document.createElementNS(SVG_NS,"defs");t.appendChild(s);let n=e.tile_width,_=e.tile_height;0!=n&&0!=_||argument_err("pattern images have to specify their size at compile time");let o=document.createElementNS(SVG_NS,"pattern"),r=`pat${++g_svg_id}`;o.setAttribute("id",r),o.setAttribute("patternUnits","userSpaceOnUse"),o.setAttribute("width",n.toFixed(0)),o.setAttribute("height",_.toFixed(0)),s.appendChild(o);let a=document.createElementNS(SVG_NS,"image");return a.setAttributeNS(XLINK_NS,"xlink:href",e.sysobj.url),a.setAttribute("width",n.toFixed(0)),a.setAttribute("height",_.toFixed(0)),o.appendChild(a),r}function svg_define_gradient(e,t){let s=document.createElementNS(SVG_NS,"defs");t.appendChild(s);let n,_=e;switch(getn(_,F_grad_shape)){case LINEAR_GRADIENT:n=document.createElementNS(SVG_NS,"linearGradient");var o=getn(_,F_grad_angle);n.setAttribute("x1","0"),n.setAttribute("y1","0"),n.setAttribute("x2","1"),n.setAttribute("y2","0"),n.setAttribute("gradientTransform",`rotate(${o} 0.5 0.5)`);break;case RADIAL_GRADIENT:n=document.createElementNS(SVG_NS,"radialGradient");var r=getn(_,F_grad_centerx);n.setAttribute("cx",r.toFixed(3));var a=getn(_,F_grad_centery);n.setAttribute("cy",a.toFixed(3));var i=getn(_,F_grad_radius_inner);i!=U&&n.setAttribute("fr",i.toFixed(3));var u=getn(_,F_grad_radius_outer);u!=U&&n.setAttribute("r",u.toFixed(3));break;default:argument_err("bad gradient shape")}s.appendChild(n);var c=`grd${++g_svg_id}`;n.setAttribute("id",c);let l=new a_loop({across:addr(_,F_grad_stops)});for(;l.next();){let e=getn(l.path,F_stop_pos),t=getn(l.path,F_stop_color);t!==U&&e!==U||argument_err("bad color");let s=getn(l.path,F_opacity);s===U&&(s=1);let _=document.createElementNS(SVG_NS,"stop");_.setAttribute("offset",(e/100).toFixed(3)),_.setAttribute("stop-color",js_color_to_str(t)),1!=s&&_.setAttribute("stop-opacity",s.toFixed(3)),n.appendChild(_)}return c}export function clear_rect(e,t){let s;if(t instanceof a_tree||t instanceof a_path?s=tree_to_rect(t):t instanceof Rectangle?s=t:argument_err("bad box"),null!=e.can){e.ctx.clearRect(s.left,s.top,s.width,s.height)}else argument_err("clear_rect not inside canvas context")};export function draw_rect(e,t){let s,n=U,_=null,o=null,r=0,a=0,i=0,u=0,c=U,l=null,p=null,d=1,g=.5,m=BLACK,E=0,h=null;for(let e in t)switch(e){case"box":(_=t.box)instanceof a_tree||_ instanceof a_path?o=tree_to_rect(_):_ instanceof Rectangle?o=_:argument_err("bad box");break;case"color":m=t.color;break;case"corner":is_numeric(i=t.corner)!==Y&&argument_err("bad corner"),u=i,r=i,a=i;break;case"corner_tl":i=t.corner_tl;break;case"corner_br":a=t.corner_br;break;case"corner_tr":u=t.corner_tr;break;case"corner_bl":r=t.corner_bl;break;case"fill":c=t.fill;break;case"grad":l=t.grad;break;case"matrix":p=t.matrix;break;case"mode":n=t.mode;break;case"opacity":d=clamp(numeric_arg(t.opacity),0,1);break;case"pos":is_numeric(t.pos)!==Y&&argument_err("bad pos"),g=clamp(t.pos,0,1);break;case"thick":is_numeric(t.thick)!==Y&&argument_err("bad thick"),E=t.thick;break;case"tile":h=t.tile;break;default:argument_err("bad option: "+e)}if(null==_&&(o=e.bounds),o.width<1||o.height<1)return;if(!(s=null!==l||null!==h||c!==U)&&E<=0)return;let x=i!=u||u!=r||r!=a;if(null!=e.can){let t=e.ctx;return t.save(),t.globalAlpha=d,s&&(canv_rr_path(t,o,0),t.fillStyle=js_fill(c,l,h),t.fill()),E>0&&(canv_rr_path(t,o,(g-.5)*E*.5),t.lineWidth=E,t.strokeStyle=js_color_to_str(m),t.stroke()),void t.restore()}let f,b=js_svg_wrapper(e,1);function create_roundrect(e){let t,s;return x?(t=document.createElementNS(SVG_NS,"path")).setAttribute("d",function roundrect_path(e,t,s,n){return"M "+e+","+(t+i)+" A "+i+" "+i+" 0 0 1 "+(e+i)+" "+t+" H "+(e+s-u)+" A "+u+" "+u+" 0 0 1 "+(e+s)+" "+(t+u)+" V "+(t+n-a)+" A "+a+" "+a+" 0 0 1 "+(e+s-a)+" "+(t+n)+" H "+(e+r)+" A "+r+" "+r+" 0 0 1 "+e+" "+(t+n-r)+" Z"}(Math.round(e.left),Math.round(e.top),Math.round(e.width),Math.round(e.height))):((t=document.createElementNS(SVG_NS,"rect")).setAttribute("x",e.left.toFixed(0)),t.setAttribute("y",e.top.toFixed(0)),t.setAttribute("width",e.width.toFixed(0)),t.setAttribute("height",e.height.toFixed(0)),0!=i&&(s=i.toFixed(1),t.setAttribute("rx",s),t.setAttribute("ry",s))),t}let R,A=s||.5==g,N=E>0&&.5!=g;var T;(A&&N&&1!=d&&(R=document.createElementNS(SVG_NS,"g"),b.appendChild(R),b=R,1!=d&&(R.setAttribute("opacity",d.toFixed(3)),d=1)),A)&&(null!=h?T=svg_define_pattern(h,b):null!=l&&(T=svg_define_gradient(l,b)),f=create_roundrect(o),null!=h?f.setAttribute("fill",`url(#${T})`):null!=l?f.setAttribute("fill",`url(#${T})`):c==U?f.setAttribute("fill","none"):f.setAttribute("fill",js_color_to_str(c)),E>0&&.5==g&&(f.setAttribute("stroke",js_color_to_str(m)),f.setAttribute("stroke-width",E.toFixed(1))),1!=d&&f.setAttribute("opacity",d.toFixed(3)),b.appendChild(f));if(N){(f=create_roundrect(calc_middle_of_stroke(o,E,g))).setAttribute("stroke",js_color_to_str(m)),f.setAttribute("stroke-width",E.toFixed(1)),f.setAttribute("fill","none"),1!=d&&f.setAttribute("opacity",d.toFixed(3)),b.appendChild(f)}function canv_rr_path(e,t,s){let n=t.left-s,_=t.top-s,o=t.left+t.width+s,c=t.top+t.height+s;e.beginPath(),0!==i||x?(e.moveTo(n+i,_),e.lineTo(o-u,_),e.quadraticCurveTo(o,_,o,_+u),e.lineTo(o,c-a),e.quadraticCurveTo(o,c,o-a,c),e.lineTo(n+r,c),e.quadraticCurveTo(n,c,n,c-r),e.lineTo(n,_+i),e.quadraticCurveTo(n,_,n+i,_)):e.rect(n,_,o-n,c-_)}};export function draw_oval(e,t){let s,n,_=U,o=null,r=null,a=BLACK,i=0,u=.5,c=1,l=U,p=null,d=null;for(let e in t)switch(e){case"box":(o=t.box)instanceof a_tree||o instanceof a_path?s=tree_to_rect(o):o instanceof Rectangle?s=o:argument_err("bad box");break;case"color":a=t.color;break;case"fill":l=t.fill;break;case"grad":p=t.grad;break;case"matrix":r=t.matrix;break;case"mode":_=t.mode;break;case"opacity":c=clamp(numeric_arg(t.opacity),0,1);break;case"tile":d=t.tile;break;case"pos":u=clamp(t.pos,0,1);break;case"thick":i=t.thick;break;case"x":case"y":case"xy":case"radius":case"diam":break;default:argument_err("bad option: "+e)}if(!(n=null!==p||null!==d||l!==U)&&i<=0)return;if(null==s&&(s=e.bounds),null!=e.can){let t=e.ctx;return t.save(),t.globalAlpha=c,n&&(canv_oval_path(t,s,0),t.fillStyle=js_fill(l,p,d),t.fill()),i>0&&(canv_oval_path(t,s,(u-.5)*i*.5),t.lineWidth=i,t.strokeStyle=js_color_to_str(a),t.stroke()),void t.restore()}let g,m,E,h,x=js_svg_wrapper(e,1),f=n||.5==u,b=i>0&&.5!=u;var R;(f&&b&&1!=c&&(h=document.createElementNS(SVG_NS,"g"),x.appendChild(h),x=h,1!=c&&(h.setAttribute("opacity",c.toFixed(3)),c=1)),f)&&(null!=d?R=svg_define_pattern(d,x):null!=p&&(R=svg_define_gradient(p,x)),m=s.width/2,E=s.height/2,(g=document.createElementNS(SVG_NS,"ellipse")).setAttribute("cx",(s.left+m).toFixed(1)),g.setAttribute("cy",(s.top+E).toFixed(1)),g.setAttribute("rx",m.toFixed(1)),g.setAttribute("ry",E.toFixed(1)),null!=d?g.setAttribute("fill",`url(#${R})`):null!=p?g.setAttribute("fill",`url(#${R})`):l==U?g.setAttribute("fill","transparent"):g.setAttribute("fill",js_color_to_str(l)),i>0&&.5==u&&(g.setAttribute("stroke",js_color_to_str(a)),g.setAttribute("stroke-width",i.toFixed(1))),1!=c&&g.setAttribute("opacity",c.toFixed(3)),x.appendChild(g));if(b){let e=calc_middle_of_stroke(s,i,u);m=e.width/2,E=e.height/2,(g=document.createElementNS(SVG_NS,"ellipse")).setAttribute("cx",(e.left+m).toFixed(1)),g.setAttribute("cy",(e.top+E).toFixed(1)),g.setAttribute("rx",m.toFixed(1)),g.setAttribute("ry",E.toFixed(1)),g.setAttribute("stroke",js_color_to_str(a)),g.setAttribute("stroke-width",i.toFixed(1)),g.setAttribute("fill","transparent"),1!=c&&g.setAttribute("opacity",c.toFixed(3)),x.appendChild(g)}function canv_oval_path(e,t,s){e.beginPath();let n=t.left-s,_=t.top-s,o=t.left+t.width+s,r=t.top+t.height+s;e.ellipse((n+o)/2,(_+r)/2,(o-n)/2,(r-_)/2,0,0,TAU)}};export function draw_circle(e,t){let s,n=0,_=0,o=U,r=U;for(let e in t)switch(e){case"x":n=t.x;break;case"y":_=t.y;break;case"xy":n=getn(t.xy,F_x),_=getn(t.xy,F_y);break;case"radius":if(is_numeric(t.radius)!==Y)return void argument_err("bad arg");r=t.radius;break;case"diam":if(is_numeric(t.diam)!==Y)return void argument_err("bad arg");o=t.diam}if(is_numeric(n)===Y)if(is_numeric(_)===Y){if(r!==U)s=new Rectangle(n-r,_-r,2*r,2*r);else{if(o===U)return void argument_err("missing radius or diam");s=new Rectangle(n-(r=o/2),_-r,o,o)}t.box=s,draw_oval(e,t),delete t.box}else argument_err("bad center y");else argument_err("bad center x")};export function draw_line(e,t){let s,n,_=U,o=U,r=U,a=U,i=U,u=U,c=null,l=U,p=BLACK,d=2,g=1,m=CAP_ROUND,E=JOINT_ROUND;for(let e in t)switch(e){case"angle":c=t.angle;break;case"cap":m=t.cap;break;case"color":p=t.color;break;case"dx":i=t.dx;break;case"dy":u=t.dy;break;case"joint":E=t.joint;break;case"p1":_=getn(t.p1,F_x),o=getn(t.p1,F_y);break;case"p2":r=getn(t.p2,F_x),a=getn(t.p2,F_y);break;case"x1":_=t.x1;break;case"y1":o=t.y1;break;case"x2":r=t.x2;break;case"y2":a=t.y2;break;case"len":l=t.len;break;case"thick":d=t.thick;break;case"opacity":g=clamp(numeric_arg(t.opacity),0,1);break;default:argument_err("bad option: "+e)}if(d<0)return;if(null!==c&&(i=mul(cos(c),l),u=mul(sin(c),l)),i!==U&&(r=add(_,i)),u!==U&&(a=add(o,u)),is_numeric(_)!==Y||is_numeric(o)!==Y||is_numeric(r)!==Y||is_numeric(a)!==Y)return void(CHECKS&&argument_err("bad args"));switch(E){case JOINT_ROUND:n="round";break;case JOINT_BEVEL:n="bevel";break;case JOINT_MITER:n="miter";break;default:CHECKS&&argument_err("bad line cap"),n="round"}switch(m){case CAP_BUTT:s="butt";break;case CAP_ROUND:s="round";break;case CAP_SQUARE:s="square";break;default:CHECKS&&argument_err("bad line cap"),s="round"}if(null!=e.can){let t=e.ctx;return t.lineWidth=d,t.lineCap=s,t.lineJoin=n,t.strokeStyle=js_color_to_str(p,g),t.beginPath(),t.moveTo(_,o),t.lineTo(r,a),void t.stroke()}let h=js_svg_wrapper(e,1),x=document.createElementNS(SVG_NS,"line");x.setAttribute("x1",_.toFixed(1)),x.setAttribute("y1",o.toFixed(1)),x.setAttribute("x2",r.toFixed(1)),x.setAttribute("y2",a.toFixed(1)),x.setAttribute("stroke",js_color_to_str(p)),x.setAttribute("stroke-width",d.toFixed(1)),x.setAttribute("stroke-linecap",s),x.setAttribute("stroke-linejoin",n),1!=g&&x.setAttribute("opacity",g.toFixed(3)),h.appendChild(x)};export function draw_polygon(e,t,s){let n,_,o,r,a,i=null,u=null,c=U,l=0,p=1,d=BLACK,g=CAP_ROUND,m=JOINT_ROUND;var E,h,x=U,f=U;!CHECKS||t instanceof a_path||t instanceof a_tree||argument_err("polygon must be a a_path or a_tree");for(let e in s)switch(e){case"cap":g=s.cap;break;case"color":d=s.color;break;case"fill":c=s.fill;break;case"grad":i=s.grad;break;case"joint":m=s.joint;break;case"opacity":p=clamp(numeric_arg(s.opacity),0,1);break;case"thick":l=s.thick;break;case"tile":u=s.tile;break;case"viewbox":x=getn(s.viewbox,F_left),f=getn(s.viewbox,F_top),E=.01*getn(s.viewbox,F_width),h=.01*getn(s.viewbox,F_height);break;default:argument_err("bad option: "+e)}switch(m){case JOINT_ROUND:r="round";break;case JOINT_BEVEL:r="bevel";break;case JOINT_MITER:r="miter";break;default:CHECKS&&argument_err("bad line cap"),r="round"}switch(g){case CAP_BUTT:a="butt";break;case CAP_ROUND:a="round";break;case CAP_SQUARE:a="square";break;default:CHECKS&&argument_err("bad line cap"),a="round"}let b,R,A;var N;null!=e.can?(R=e.ctx,null!=u?internal_err("not yet"):null!=i?internal_err("not yet"):c==U||(R.fillStyle=js_color_to_str(c,p)),R.lineWidth=l,R.lineCap=a,R.lineJoin=r,R.strokeStyle=js_color_to_str(d,p),R.beginPath()):(b=js_svg_wrapper(e,1),null!=u?N=svg_define_pattern(u,b):null!=i&&(N=svg_define_gradient(i,b)),A=document.createElementNS(SVG_NS,"polygon"),null!=u?A.setAttribute("fill",`url(#${N})`):null!=i?A.setAttribute("fill",`url(#${N})`):c==U?A.setAttribute("fill","none"):A.setAttribute("fill",js_color_to_str(c)),l>0&&(A.setAttribute("stroke",js_color_to_str(d)),A.setAttribute("stroke-width",l.toFixed(1)),A.setAttribute("stroke-linecap",a),A.setAttribute("stroke-linejoin",r)),1!=p&&A.setAttribute("opacity",p.toFixed(3)));let T=!0;if(null!==i)throw new Error("not yet");if(null!==u)throw new Error("not yet");if(c!==U);else if(T=!1,0==l)return void(CHECKS&&argument_err("polygon with no fill or stroke"));let k,y,F,S=!0,v=!1;for(t instanceof a_path?o=t:t instanceof a_tree?o=addr(t):argument_err("polygon must be a_tree or a_path"),k=new a_loop({across:o});k.next();)y=k.path,S&&exists(y,1)&&(v=!0),v?(n=getn(y,1),_=getn(y,2)):(n=getn(y,F_x),_=getn(y,F_y)),x!=U&&(n=n*E+x,_=_*h+f),is_numeric(n)===Y&&is_numeric(_)===Y?S?(S=!1,null!=e.can?R.moveTo(n,_):((F=b.createSVGPoint()).x=n,F.y=_,A.points.appendItem(F))):null!=e.can?R.lineTo(n,_):((F=b.createSVGPoint()).x=n,F.y=_,A.points.appendItem(F)):CHECKS&&argument_err("bad point");null!=e.can?(R.closePath(),T&&R.fill(),0!=l&&R.stroke()):b.appendChild(A)};export function draw_polycurve(e,t,s){let n,_,o,r,a,i=null,u=null,c=U,l=0,p=1,d=BLACK,g=CAP_ROUND,m=JOINT_ROUND;for(let e in s)switch(e){case"cap":g=s.cap;break;case"color":d=s.color;break;case"fill":c=s.fill;break;case"grad":i=s.grad;break;case"joint":m=s.joint;break;case"opacity":p=clamp(numeric_arg(s.opacity),0,1);break;case"thick":l=s.thick;break;case"tile":u=s.tile;break;default:argument_err("bad option: "+e)}switch(m){case JOINT_ROUND:n="round";break;case JOINT_BEVEL:n="bevel";break;case JOINT_MITER:n="miter";break;default:CHECKS&&argument_err("bad line cap"),n="round"}switch(g){case CAP_BUTT:_="butt";break;case CAP_ROUND:_="round";break;case CAP_SQUARE:_="square";break;default:CHECKS&&argument_err("bad line cap"),_="round"}var E;null!=e.can?(r=e.ctx,null!=u?internal_err("not yet"):null!=i?internal_err("not yet"):c==U||(r.fillStyle=js_color_to_str(c,p)),r.lineWidth=l,r.lineCap=_,r.lineJoin=n,r.strokeStyle=js_color_to_str(d,p),r.beginPath()):(o=js_svg_wrapper(e,1),null!=u?E=svg_define_pattern(u,o):null!=i&&(E=svg_define_gradient(i,o)),a=document.createElementNS(SVG_NS,"path"),null!=u?a.setAttribute("fill",`url(#${E})`):null!=i?a.setAttribute("fill",`url(#${E})`):c==U?a.setAttribute("fill","none"):a.setAttribute("fill",js_color_to_str(c)),l>0&&(a.setAttribute("stroke",js_color_to_str(d)),a.setAttribute("stroke-width",l.toFixed(1)),a.setAttribute("stroke-linecap",_),a.setAttribute("stroke-linejoin",n)),1!=p&&a.setAttribute("opacity",p.toFixed(3)));let h,x,f,b,R,A,N,T,k,y,F=!0;if(null!==i)throw new Error("not yet");if(null!==u)throw new Error("not yet");if(c!==U);else if(F=!1,0==l)return void(CHECKS&&argument_err("polygon with no fill or stroke"));let S="";if(t instanceof a_path)y=t;else{if(!(t instanceof a_tree))return void(CHECKS&&argument_err("point data must be a ptr or tree"));y=addr(t)}h=new a_loop({across:y});e:for(;h.next();)switch(f=getn(x=h.path,1)){case STEP_MOVE:b=getn(x,2),R=getn(x,3),null!=e.can?r.moveTo(b,R):S+=` M${P(b)},${P(R)}`;break;case STEP_LINE:b=getn(x,2),R=getn(x,3),null!=e.can?r.lineTo(b,R):S+=` L${P(b)},${P(R)}`;break;case STEP_BEZIER1:A=getn(x,2),N=getn(x,3),b=getn(x,4),R=getn(x,5),null!=e.can?r.quadraticCurveTo(A,N,b,R):S+=` Q${P(A)},${P(N)},${P(b)},${P(R)}`;break;case STEP_BEZIER2:A=getn(x,2),N=getn(x,3),T=getn(x,4),k=getn(x,5),b=getn(x,6),R=getn(x,7),null!=e.can?r.bezierCurveTo(A,N,T,k,b,R):S+=` C${P(A)},${P(N)},${P(T)},${P(k)},${P(b)},${P(R)}`;break;default:CHECKS&&argument_err("bad opcode on step "+String(h.count));break e}function P(e){return str.to_str(e,{digits:3})}null!=e.can?(r.closePath(),F&&r.fill(),0!=l&&r.stroke()):(a.setAttribute("d",S),o.appendChild(a))};export function launch_url(e){if(IS_NODE)debugger;else window.open(e,"_blank")};export function measure_table_column(e,t,s){let n=k.tbl_find_rowkind(t,e.tbl.s).fields[s-1];return n.stopdot-n.startdot};export async function ixdb_write(e,t,s,n){TRACE_FILE&&logg(`${performance.now().toFixed(1)}: ixdb_write IXDB_START`);const _=gets(e,F_db_name),o=getn(e,F_db_ver);var r=indexedDB.open(_,o);r.onupgradeneeded=function(t){gen_db_struct(e,r.result)},r.onerror=db_err,r.onsuccess=function(){TRACE_FILE&&logg(`${performance.now().toFixed(1)}: ixdb_write IXDB_OPEN`);let e=r.result,_=e.transaction(t,"readwrite"),o=_.objectStore(t),a=path_to_node(n);s===U?o.add(a):o.put(a,s),_.oncomplete=function(){TRACE_FILE&&logg(`${performance.now().toFixed(1)}: ixdb_write tx finished`),e.close()}}};export function ixdb_read(e,t,s,n,_,o){TRACE_FILE&&logg(`${performance.now().toFixed(1)}: ixdb_read IXDB_START`);const r=gets(s,F_db_name),a=getn(s,F_db_ver);var i=indexedDB.open(r,a);i.onupgradeneeded=function(e){gen_db_struct(s,i.result)},i.onerror=db_err,i.onsuccess=function(){TRACE_FILE&&logg(`${performance.now().toFixed(1)}: ixdb_read IXDB_OPEN`);let s=i.result,r=s.transaction(n),a=r.objectStore(n).get(_);a.onsuccess=function(s){if(void 0==a.result)return void(TRACE_FILE&&logg("ixdb_read: read request null result"));let n=new a_path(a.result);copy_tree(e,t,n,o),TRACE_FILE&&logg(`${performance.now().toFixed(1)}: ixdb_read IXDB_OK`)},r.oncomplete=function(){TRACE_FILE&&logg(`${performance.now().toFixed(1)}: ixdb_read tx finished`),s.close()}}};export function ixdb_delete(e,t,s){TRACE_FILE&&logg(`${performance.now().toFixed(1)}: ixdb_delete IXDB_START`);const n=gets(e,F_db_name),_=getn(e,F_db_ver);var o=indexedDB.open(n,_);o.onupgradeneeded=function(t){gen_db_struct(e,o.result)},o.onerror=db_err,o.onsuccess=function(){TRACE_FILE&&logg(`${performance.now().toFixed(1)}: ixdb_delete IXDB_OPEN`);let e=o.result,n=e.transaction(t,"readwrite"),_=n.objectStore(t);s===U?_.clear():_.delete(s),TRACE_FILE&&logg(`${performance.now().toFixed(1)}: ixdb_delete IXDB_OK`),n.oncomplete=function(){TRACE_FILE&&logg(`${performance.now().toFixed(1)}: ixdb_delete tx finished`),e.close()}}};function db_err(e){logg("error opening database "+e.target.errorCode)}function gen_db_struct(e,t){TRACE_FILE&&logg("gen_db_struct start...");let s=new a_loop({across:addr(e,F_db_stores)});for(;s.next();){let e=s.path,n=gets(e,F_store_name);if(TRACE_FILE&&logg(`gen_db_struct checking store ${n}`),!t.objectStoreNames.contains(n)){let s=getn(e,F_store_autoinc),_={};_.autoIncrement=s===Y;let o=t.createObjectStore(n,_),r=new a_loop({across:addr(e,F_store_indices)});for(;r.next();){let e=r.path,t=gets(e,F_index_name),s=getn(e,F_index_unique),n=getn(e,F_index_multi),_={};_.unique=s===Y,_.multiEntry=n===Y,TRACE_FILE&&logg(`gen_db_struct creating index ${t}`),o.createIndex(t,t,_)}}}TRACE_FILE&&logg("..end gen_db_struct")}export function seconds_to_date(e=null){var t=U;for(let s in e)switch(s){case"seconds":t=e.seconds;break;case"city":internal_err("not yet");break;default:argument_err("bad option: "+s)}return t==U&&(t=now),jsd_to_datetime(new Date(1e3*t))};export function date_to_seconds(e){return datetime_to_jsd(e).getTime()/1e3};function datetime_to_jsd(e){let t,s,n,_,o,r,a,i;return t=getn(e,F_date_year),s=getn(e,F_date_month)-1,n=getn(e,F_date_day),_=getn(e,F_date_hour),o=getn(e,F_date_minute),r=getn(e,F_date_second),a=Math.floor(r),new Date(t,s,n,_,o,a,i=1e3*(r-a))}function jsd_to_datetime(e){let t=new a_tree("std","$jsd_to_datetime",0);setv(_M,0,t,F_date_year,e.getFullYear()),setv(_M,0,t,F_date_month,e.getMonth()+1),setv(_M,0,t,F_date_day,e.getDate()),setv(_M,0,t,F_date_hour,e.getHours()),setv(_M,0,t,F_date_minute,e.getMinutes());let s=e.getSeconds()+.001*e.getMilliseconds();return setv(_M,0,t,F_date_second,s),t}function add_select_list(e,t){let s,n,_,o=new a_loop({across:t});for(;o.next();)if(exists(t,_=o.index,F_opt_children)){n=document.createElement("optgroup"),s.text=gets(t,_,F_opt_label),add_select_list(e,addr(t,_,F_opt_children))}else(s=document.createElement("option")).text=gets(t,_,F_opt_label),s.value=s.text,exists(t,_,F_opt_val)&&(s.value=gets(t,_,F_opt_val)),getn(t,_,F_opt_selected)==Y&&(s.selected=!0),getn(t,_,F_opt_disabled)==Y&&(s.disabled=!0),e.appendChild(s)}export function html_redirect(e,t){if(void 0!==t&&t.hasOwnProperty("newtab")&&t.newtab==Y)window.open(e);else window.location.href=e};export function html_download(e,t){var s="";void 0!=t&&t.hasOwnProperty("filename")&&(s=t.filename);var n=document.createElement("a");n.href=e,""!=s&&(n.download=s),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)};export function html_draw_pulldown(e,t,s,n,_){let o,r=pt_to_dots(e,10),a=!1,i=U;for(let e in _)switch(e){case"size":r=_.size;break;case"multiple":a=_.multiple===Y;break;case"nitems":i=_.nitems;break;default:argument_err("bad option: "+e)}let u=document.createElement("select");add_select_list(u,s),o=gets(n,F_in_value),u.style.boxSizing="border-box",u.style.position="absolute",u.style.left=getn(t,F_left).toFixed(0)+"px",u.style.top=getn(t,F_top).toFixed(0)+"px",u.style.width=getn(t,F_width).toFixed(0)+"px",u.style.height=getn(t,F_height).toFixed(0)+"px",u.style.fontSize=r.toFixed(1)+"px",getn(n,F_in_required==Y)&&(u.required=!0),null!=(o=gets(n,F_in_autofill))&&(u.autocomplete=o),i!=U&&(u.size=i),a&&(u.multiple=!0),e.appendChild(u)};function js_scrollbar_width(){var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}export function js_resize(){js_set_screen_size(),k.rebuild_all()};const TSTATE_IDLE=0,TSTATE_IN_TOUCH=1,TSTATE_IN_DRAG=2,TSTATE_IN_HOLD=3,TSTATE_AFTER_TOUCH=4,TSTATE_IN_OS=5,HOLD_DELAY=500,DRAG_THRESHOLD_MM=1,TAP_DELAY=200,DOUBLE_TAP_DELAY=300;export let g_report_tap_hold=!1;export let g_report_tap_double=!1;export let g_report_hover=!1;var g_touch={state:TSTATE_IDLE},g_mouse=[{state:TSTATE_IDLE},{state:TSTATE_IDLE},{state:TSTATE_IDLE}];function js_touchstart(e){var t=e.changedTouches[0],s=e.target.localName;if(TRACE_TOUCH&&logg(`js_touchstart name=${s}, ident=${t.identifier} client=${t.clientX.toFixed(1)},${t.clientY.toFixed(1)}`),"input"!=s&&"select"!=s&&"textarea"!=s)switch(g_touch.state){case TSTATE_IDLE:g_touch.id=t.identifier,g_touch.state=TSTATE_IN_TOUCH,g_touch.origintime=elapsed_raw,g_touch.originx=t.clientX,g_touch.originy=t.clientY,g_touch.lastx=t.clientX,g_touch.lasty=t.clientY,g_touch.cum_pixels=0,g_touch.mod_shf=e.shiftKey,g_touch.mod_alt=e.altKey,g_touch.mod_cmd=e.metaKey,g_touch.mod_ctl=e.ctrlKey;break;default:TRACE_TOUCH&&logg(str.conv("js_touchstart, ignoring g_touch.id={}, state={}",g_touch.id,g_touch.state))}else TRACE_TOUCH&&logg("-- js_touchstart ignoring tap on special field}")}function js_touchcancel(e){for(var t,s=e.changedTouches,n=0;n<s.length;n++)t=s[n],TRACE_TOUCH&&logg(`js_touchcancel ${t.identifier} client=${t.clientX.toFixed(1)},${t.clientY.toFixed(1)}`),g_touch.state!=TSTATE_IDLE&&t.identifier==g_touch.id?(TRACE_TOUCH&&logg("--- cancelling"),g_touch.state):TRACE_TOUCH&&logg("--- ignoring cancel")}function js_touchmove(e){for(var t,s=e.changedTouches,n=0;n<s.length;n++)t=s[n],g_touch.state==TSTATE_IN_TOUCH&&t.identifier==g_touch.id&&(g_touch.cum_pixels+=Math.abs(t.clientX-g_touch.lastx)+Math.abs(t.clientY-g_touch.lasty),g_touch.lastx=t.clientX,g_touch.lasty=t.clientY,25.4*g_touch.cum_pixels/SCREEN_DPI>=DRAG_THRESHOLD_MM?g_touch.state=TSTATE_IDLE:elapsed_raw-g_touch.origintime&&(k.do_pointer_event(EV_HOLD,elapsed,g_touch.originx,g_touch.originy,g_touch),g_touch.state=TSTATE_IN_HOLD))}function js_touchend(e){for(var t,s=e.changedTouches,n=0;n<s.length;n++)t=s[n],TRACE_TOUCH&&logg(`js_touchend ${t.identifier} client=${t.clientX.toFixed(1)},${t.clientY.toFixed(1)}`),g_touch.state!=TSTATE_IDLE&&t.identifier==g_touch.id&&(g_touch.state==TSTATE_IN_TOUCH&&(TRACE_TOUCH&&logg("--- touch converted to TAP"),k.do_pointer_event(EV_TAP,elapsed,g_touch.originx,g_touch.originy,g_touch),event.preventDefault(),event.stopPropagation()),g_touch.state=TSTATE_IDLE)}function js_mousedown(e){var t,s;if(!(e.button>=3)){var n=e.target;if(TRACE_CLICK){var _="";e.shiftKey&&(_+="SHIFT "),e.altKey&&(_+="ALT "),e.metaKey&&(_+="CMD "),e.ctrlKey&&(_+="CTRL"),TRACE_CLICK&&logg(str.conv("{n3} js_mousedown, name={} button={}, id={}, client=[{},{}], .scrollTop=={}, .scrY={} {}",elapsed_raw,n.localName,e.button,n.id,e.clientX,e.clientY,document.body.scrollTop,window.scrollY,_))}if("input"!=n.localName&&"select"!=n.localName&&"textarea"!=n.localName){var o=g_mouse[e.button];switch(o.state){case TSTATE_IDLE:TRACE_CLICK&&logg("--- now IN_TOUCH"),t=e.clientX,s=e.clientY,o.button=e.button,o.state=TSTATE_IN_TOUCH,o.origintime=elapsed_raw,o.originx=t,o.originy=s,o.lastx=t,o.lasty=s,o.cum_pixels=0,o.mod_shf=e.shiftKey,o.mod_alt=e.altKey,o.mod_cmd=e.metaKey,o.mod_ctl=e.ctrlKey;break;case TSTATE_AFTER_TOUCH:TRACE_CLICK&&logg("--- AFTER_TOUCH emit double tap"),k.do_pointer_event(EV_DOUBLE_TAP,elapsed,o.originx,o.originy,o),e.preventDefault(),e.stopPropagation();break;default:TRACE_CLICK&&logg("--- unexpected state:"+String(o.state))}}else TRACE_CLICK&&logg(`-- js_mousedown ignoring, local=${e.target.localName}`)}}function js_mouseup(e){if(e.button>=3)return;var t,s=g_mouse[e.button];TRACE_CLICK&&logg(str.conv("{n3} on_mouse_up, button={}, state={n}",elapsed_raw,e.button,s.state));let n=!0;if(clearTimeout(s.timer),s.state==TSTATE_IN_TOUCH)if(g_report_tap_double)s.state=TSTATE_AFTER_TOUCH,s.timer=setTimeout(js_mouse_timeout,DOUBLE_TAP_DELAY,s),TRACE_LOW&&logg("  start timer for double tap"),n=!1;else{switch(TRACE_LOW&&logg("  treating as EV_TAP"),s.button){case 0:t=EV_TAP;break;case 1:t=EV_MID_TAP;break;default:t=EV_ALT_TAP}k.do_pointer_event(t,elapsed,s.originx,s.originy,s)}else s.state==TSTATE_IN_DRAG&&k.do_pointer_event(EV_DRAG_END,elapsed,e.clientX,e.clientY,s);n&&(s.state=TSTATE_IDLE)}function js_mousemove(e){let t=e.target;if("input"==t.localName||"select"==t.localName||"textarea"==t.localName)return void(TRACE_MOVE&&logg(`--js_mousemove ignoring, local=${e.target.localName}`));if(null==k.g_root_block)return void(TRACE_MOVE&&logg("--js_mousemove ignoring, no root block"));if(e.button>=3)return;var s=g_mouse[e.button];let n;TRACE_MOVE&&logg(str.conv("at {n3} js_mousemove, mouse=[{},{}], state={}",elapsed_raw,e.clientX,e.clientY,s.state)),s.state==TSTATE_IN_TOUCH?(s.cum_pixels+=Math.abs(e.clientX-s.lastx)+Math.abs(e.clientY-s.lasty),s.lastx=e.clientX,s.lasty=e.clientY,n=25.4*s.cum_pixels/100,TRACE_MOVE&&logg(str.conv("  cum pixels={n} mm={n3} threshold={n}",s.cum_pixels,n,DRAG_THRESHOLD_MM)),n>=DRAG_THRESHOLD_MM&&(s.state=TSTATE_IN_DRAG,clearTimeout(s.timer),k.do_pointer_event(EV_DRAG_BEGIN,elapsed,s.originx,s.originy,s),k.do_pointer_event(EV_DRAG_MOVE,elapsed,e.clientX,e.clientY,s),e.preventDefault())):s.state==TSTATE_IDLE?g_report_hover&&(k.do_pointer_event(EV_HOVER,elapsed,e.clientX,e.clientY,s),e.preventDefault()):s.state==TSTATE_IN_DRAG&&(k.do_pointer_event(EV_DRAG_MOVE,elapsed,e.clientX,e.clientY,s),e.preventDefault())}function js_mouse_timeout(e,t){if(null!=t)switch(t.state){case TSTATE_IN_TOUCH:g_report_tap_hold?(TRACE_LOW&&logg("  touch timer complete, converting to TAP_HOLD"),k.do_pointer_event(EV_HOLD,elapsed,t.originx,t.originy,t),t.state=TSTATE_IN_HOLD):(TRACE_LOW&&logg("  touch timer complete, converting to TAP_SINGLE"),k.do_pointer_event(EV_TAP,elapsed,t.originx,t.originy,t),t.state=TSTATE_IDLE);break;case TSTATE_AFTER_TOUCH:TRACE_LOW&&logg("  touch timer complete, emit TAP_SINGLE"),k.do_pointer_event(EV_TAP,elapsed,t.originx,t.originy,t),t.state=TSTATE_IDLE;break;default:internal_err("  touch timer complete, unexpected state")}else TRACE_LOW&&logg("  mouse_timeout parm not set")}function js_keydown(e){var t=document.activeElement;if(null!=t){if("select"==t.localName||"textarea"==t.localName)return void(TRACE_KEYS&&logg(`--js_keydown passing to browser, active=${t.localName}`));if("input"==t.localName&&e.keyCode!=KEYCODE_ENTER)return void(TRACE_KEYS&&logg(`--js_keydown passing to browser input, active=${t.localName}`))}TRACE_KEYS&&logg(str.conv("at {n3} on_keydown, cc={}, keycode={}",elapsed_raw,e.charCode,e.keyCode));let s=e.keyCode;20==s||17==s||18==s||16==s||91==s||92==s?TRACE_KEYS&&logg("--ignoring shift key"):k.do_key_event(elapsed,e.key,s,e.shiftKey,e.altKey,e.metaKey,e.ctrlKey)&&(TRACE_KEYS&&logg("  -- absorbed key event"),e.preventDefault())}function on_enter_frame(e){clock_tick(),loom_process_events(),SKIP_ANIMATION||requestAnimationFrame(on_enter_frame)}function js_fill(e,t,s){return null!=s?s:null!=t?t:js_color_to_str(e)}export function new_block(e,t,s,n,_=null,o=FOR_SCREEN){let r=document.createElement("div"),a=t.left,i=t.top,u=t.left+t.width,c=t.top+t.height;return r.style.left=`${a.toFixed(1)}px`,r.style.top=`${i.toFixed(1)}px`,r.style.width=`${(u-a).toFixed(1)}px`,r.style.height=`${(c-i).toFixed(1)}px`,r.style.position="absolute",n==k.ROOT_BLABEL?(r.style.overflow="hidden",r.id=n):n.startsWith("$")?(r.style.overlow="scroll",r.id=n):r.id=n+"_"+g_next_bid.toString(),r.blabel=n,r.bid=g_next_bid++,r.bkind=s,r.bseq=0,r.locator=0,r.dest=o,null===e?(r.is_modal=!1,r.dpi=SCREEN_DPI):(r.is_modal=e.is_modal,r.dpi=e.dpi,e.appendChild(r)),r.nesting=0,r.drawer=_,r.usesz=[],r.is_measuring=!1,r.div=null,r.tbl=null,r.extra=new a_tree("std","$a_block.extra"),k.k_set_bounds(r,t),r};export let g_micro=[];export const LOGK_DELTA=2;export const LOGK_RENUM=4;export const LOGK_TOUCH=8;export const MARK_CLEAR_BEG=1048576;export const MARK_CLEAR_END=1048577;export const MARK_TRUNC_BEG=2097152;export const MARK_TRUNC_END=2097153;export const MARK_COPY_BEG=4194304;export const MARK_COPY_END=4194305;export const MARK_MERGE_BEG=8388608;export const MARK_MERGE_END=8388609;export const MARK_RENUM_BEG=16777216;export const MARK_RENUM_END=16777217;export const MARK_MOVE_BEG=33554432;export const MARK_MOVE_END=33554433;export const MARK_SWAP_BEG=67108864;export const MARK_SWAP_END=67108865;export const OPS_THAT_USE_PATH=LOGK_DELTA|LOGK_RENUM;export const OPS_THAT_ARE_PUBLISHED=LOGK_DELTA|LOGK_RENUM;export function a_micro(){this.when=U,this.module=null,this.where=0,this.kind=0,this.path=null,this.oldval=null,this.newval=null};export function next_rawx(){return g_micro.length};export function micro_add_marker(e){let t={};t.kind=e,g_micro.push(t)};export function pathx_to_hard(e){let t,s=new a_path(e.lev[0].node);for(t=1;t<=e.lastx;t++)s.key.push(e.lev[t].sub);return s};export function pathx_to_soft(e){var t,s=new a_path;for(s.base=e.lev[0].node.sub,t=1;t<=e.lastx;t++)s.key.push(e.lev[t].sub);return s};export function micro_add_delta(e,t,s,n,_,o){if(!CHECKS||0!=s&&null!=t||argument_err("log_delta requires where"),!(n.lev[0].node.eflags&NF_LOGGED))return;let r={};r.when=elapsed,r.module=t,r.where=s,r.kind=e,r.path=pathx_to_hard(n),r.oldval=_,r.newval=o;let a=g_micro.length;TRACE_MICRO&&logg(str.conv("micro[{}] when={}, kind={}, mod={}, linex={}, path={}, old={}, new={}",a,elapsed,e,t,s,r.path,_,o)),g_micro.push(r)};function add_major_step(e){let t=tree_next_hi(addr(runtime,F_major_steps));return TRACE_MAJOR&&logg(str.conv("add_major_step at {}, kind={}, rawx={}",t,e,g_micro.length)),setv(_M,0,runtime,F_major_steps,t,F_evkind,e),setv(_M,0,runtime,F_major_steps,t,F_when,elapsed),setv(_M,0,runtime,F_major_steps,t,F_hist_rawx,g_micro.length),setv(_M,0,runtime,F_major_stepx,t+1),t}export function add_major_callback(e){let t=add_major_step(EV_TIMER);TRACE_MAJOR&&logg(str.conv("add_major_callback at {}, func={}",t,e.func.name)),setv(_M,0,runtime,F_major_steps,t,F_callback,e.func)};export function add_major_event(e,t){let s=append_tree(null,0,e,addr(runtime,F_major_steps));if(TRACE_MAJOR){let n="null";null!=t&&(n=t.blabel),logg(str.conv("add_major_event[{}] evkind={}, absorber={}, rawx={}",s,getn(e,F_evkind),n,g_micro.length))}return setv(_M,0,runtime,F_major_steps,s,F_hist_rawx,g_micro.length),setv(_M,0,runtime,F_major_stepx,s+1),null!=t&&setv(_M,0,runtime,F_major_steps,s,F_hist_absorber,t.blabel),s};function is_simple_value(e){return"number"==typeof e||"string"==typeof e||e instanceof a_image||e instanceof a_sound}export function a_sys_gradient(){this.grad_seq=0,this.grad_obj=null};export function a_loom_element(){this.func=null,this.nreps=1,this.countx=0,this.last_seen=0,this.field_vec=[],this.parm_array=[]};export function Point(e,t){this.x=e,this.y=t};export function Rectangle(e,t,s,n){this.left=e,this.top=t,this.width=s,this.height=n};Object.defineProperty(Rectangle.prototype,"right",{get:function(){return this.left+this.width}}),Object.defineProperty(Rectangle.prototype,"bottom",{get:function(){return this.top+this.height}}),Rectangle.prototype.union=function(e){return new Rectangle(Math.min(this.left,e.left),Math.min(this.top,e.top),Math.max(this.width,e.width),Math.max(this.height,e.height))},Rectangle.prototype.intersection=function(e){let t,s,n,_;return new Rectangle(t=Math.max(this.left,e.left),s=Math.max(this.top,e.top),(n=Math.min(this.left+this.width,e.left+e.width))-t,(_=Math.min(this.top+this.height,e.top+e.height))-s)};export function Matrix(){internal_err("not yet")};export function Bitmap(){internal_err("not yet")};export function a_entry_field(){this.parm=0;debugger};export function a_div_slice(){this.box=null,this.id=U,this.backcolor=U,this.npasses=1,this.drawer=null};export function a_div_spec(e=null,t=!1,s=!1,n=!1){this.horz_slices=[],this.vert_slices=[],this.scrollh=s,this.scrollv=n,this.open=!0,this.grid_func=e,this.grid_tblr=t,this.ncols=0,this.nrows=0,this.content_h=0,this.content_v=0};export function a_unitxx(){this.terms=[]};function compare_unit_terms(e,t){return e.name<t.name?-1:e.name>t.name?1:0}function str_to_unitxx(e){let t,s=new a_unitxx;TRACE_UNITX&&logg("expand compact="+e),CHECKS&&""==e&&internal_err("unit string missing from measure");let n,_,o,r,a=e.split(",");for(n of a)r={},_=n.indexOf("^"),r.name=n.substring(0,_),(o=(t=n.substring(_+1)).indexOf("|"))<=0?(r.num=Math.floor(t.substring(0,o)),r.den=Math.floor(t.substring(o+1))):(r.num=Math.floor(t),r.den=1),s.terms.push(r);return s}a_unitxx.prototype.unitxx_to_str=function(){let e;if(this.terms.sort(compare_unit_terms),TRACE_UNITX)for(e of(logg("unitxx_to_str start, terms="),this.terms))logg("  term.name="+e.name+", "+String(e.num)+" / "+String(e.den));let t="",s=!0;for(e of this.terms)if(0!=e.num){for(;;){let t=!1;if(e.num%2==0&&e.den%2==0&&(e.num/=2,e.den/=2,t=!0),e.num%3==0&&e.den%3==0&&(e.num/=3,e.den/=3,t=!0),e.num%5==0&&e.den%5==0&&(e.num/=5,e.den/=5,t=!0),!t)break}s?s=!1:t+=",",t+=e.name+"^"+String(e.num),1!=e.den&&(t+="|"+String(e.den))}return TRACE_UNITX&&logg("unitxx_to_str end, unitss="+t),t},a_unitxx.prototype.find_unit_term=function(e){let t;for(t of this.terms)if(t.name==e)return t;return null},a_unitxx.prototype.add_unit_term=function(e,t=1){let s=this.find_unit_term(e.name);null==s?this.terms.push(e):(1!=e.den&&(s.num*=e.den,s.den*=e.den),s.num+=e.num*s.den*t)};export function ByteArray(e,t){this.arraybuf=new ArrayBuffer(e),this.view=new DataView(this.arraybuf,0),this.position=0,this.little=t!=BIG_END};function ArrayBuffer_to_ByteArray(e,t){return{arraybuf:e,view:new DataView(e,0),position:0,little:t!=BIG_END}}export function a_loop_step(){this.index=null,this.val=null,this.key=null,this.leaf=null,this.path=null};const METHOD_INFINITE=0,METHOD_RANGE=1,METHOD_ACROSS=2,METHOD_TOP_DOWN=3,METHOD_BOT_UP=4,METHOD_LIST=5,METHOD_RECURSIVE=6,METHOD_PASS2=7,STATE_EMIT=0,STATE_CHILDREN=1,STATE_SIBLINGS=2,KIND_INT=1,KIND_ENUM=2,KIND_STR=4,KIND_LINK=8,KIND_NUM=3,KIND_ALL=15,SIGNAL=-99;let g_sort_func;export function a_loop(e){this.count=0,this.kind=KIND_NUM,this.index=1,this.range_from=U,this.range_to=INFINITY,this.range_delta=1,this.limit=INFINITY,this.trap=!1,this.rev=!1,this.basis=null,this.recursive_field=U,this.sort_mode=0,this.sort_field=U,this.method=METHOD_INFINITE,this.done=!1,this.include_root=!1,this.parent_node=null,this.base_node=null,this.state=0,this.stack_ix=null;this.stack_node=null,this.stack_field=null,this.stx=0;for(let t in e)switch(t){case"across":e.across instanceof a_tree?this.basis=addr(e.across):e.across instanceof a_path?this.basis=e.across:argument_err("loop target must be a_path or a_tree"),this.method=METHOD_ACROSS;break;case"by":this.range_delta=e.by,is_numeric(this.range_delta)!=Y&&argument_err("bad 'delta' value"),this.range_delta<=0&&argument_err("delta must be positive");break;case"from":this.range_from=e.from,is_numeric(this.range_from)!=Y&&argument_err("bad from value"),this.method=METHOD_RANGE;break;case"bottom_up":e.bottom_up instanceof a_tree?this.basis=addr(e.bottom_up):e.bottom_up instanceof a_path?this.basis=e.bottom_up:argument_err("loop target must be a path or tree"),this.method=METHOD_BOT_UP;break;case"recursive":e.recursive instanceof a_tree?this.basis=addr(e.recursive):e.recursive instanceof a_path?this.basis=e.recursive:argument_err("loop target must be a path or tree"),this.method=METHOD_RECURSIVE;break;case"field":this.recursive_field=e.field;break;case"kind":this.kind=e.kind;break;case"top_down":e.top_down instanceof a_tree?this.basis=addr(e.top_down):e.top_down instanceof a_path?this.basis=e.top_down:argument_err("loop target must be a path or tree"),this.method=METHOD_TOP_DOWN;break;case"label":this.label=e.label;break;case"limit":if(this.limit=e.limit,e.limit==U||is_numeric(this.limit)!=Y)debugger;break;case"rev":this.rev=e.rev===Y;break;case"root":this.include_root=e.root;break;case"sort_mode":this.sort_mode=e.sort_mode;break;case"sort_field":this.sort_field=e.sort_field;break;case"sort_func":this.sort_func=e.sort_func;break;case"to_":this.range_to=e.to_,is_numeric(this.range_to)!=Y&&argument_err("bad 'to' value");break;case"trap":this.trap=e.trap===Y;break;default:argument_err("### bad property in options: "+t)}switch(this.method){case METHOD_RANGE:this.rev?this.index=this.range_to+this.range_delta:this.index=this.range_from-this.range_delta;break;case METHOD_ACROSS:this.parent_node=path_to_node(this.basis,!0),null==this.parent_node||null==this.parent_node.children?this.done=!0:(this.rev?this.elemx=this.parent_node.children.length:this.elemx=-1,this.path=addr_append(this.basis,999));break;case METHOD_TOP_DOWN:case METHOD_RECURSIVE:if(this.base_node=path_to_node(this.basis,!0),null==this.base_node)this.done=!0;else{if(this.include_root?this.state=STATE_EMIT:this.state=STATE_CHILDREN,this.stack_node=[this.base_node],this.method==METHOD_RECURSIVE){let e=path_to_node(addr(this.base_node,this.recursive_field));this.stack_field=[e]}this.stack_ix=[-999],this.stx=0,this.path=this.basis.clone()}break;case METHOD_BOT_UP:internal_err("method not yet imp")}0!=this.sort_mode&&(this.sort_list=[],this.build_loop_steps(),null==this.sort_func?this.sort_list.sort(default_sort_func):(g_sort_func=this.sort_func,this.sort_list.sort(custom_sort_func)),this.done=!1,this.method=METHOD_PASS2,this.count=0)};function get_leaf_value(e){return e instanceof a_path?e.clone_to_hard():e}function default_sort_func(e,t){return collate_open(e.key,t.key)}function custom_sort_func(e,t){return g_sort_func(e.key,t.key)}a_loop.prototype.update_pos=function(){let e,t;for(this.leaf=this.stack_node[this.stx],this.index=this.leaf.sub,this.val=get_leaf_value(this.leaf.val),t=this.basis.key.length-1,e=1;e<=this.stx;e++)t+=1,this.path.key[t]=this.stack_node[e-1].children[this.stack_ix[e]].sub;this.path.key.length=t+1},a_loop.prototype.next_topdown=function(){let e,t;for(;;){if(this.state==STATE_EMIT)return this.update_pos(),this.state=STATE_CHILDREN,!0;if(this.state!=STATE_CHILDREN||null==this.stack_node[this.stx].children){if(this.state=2,this.stx>0)if(e=this.stack_node[this.stx-1],this.rev){if((t=this.stack_ix[this.stx]-1)>=0){this.stack_ix[this.stx]=t,this.stack_node[this.stx]=e.children[t],this.state=STATE_EMIT;continue}}else if((t=this.stack_ix[this.stx]+1)<e.children.length){this.stack_ix[this.stx]=t,this.stack_node[this.stx]=e.children[t],this.state=STATE_EMIT;continue}if(this.stx-=1,this.stx<0)return this.done=!0,!1;this.state=2}else e=this.stack_node[this.stx],this.stx+=1,t=this.rev?e.children.length-1:0,this.stack_ix[this.stx]=t,this.stack_node[this.stx]=e.children[t],this.state=STATE_EMIT}return!1},a_loop.prototype.next_recursive=function(){let e,t,s;for(;;){if(this.state==STATE_EMIT){for(this.leaf=this.stack_node[this.stx],this.index=this.leaf.sub,this.val=U,this.path.key.length=this.basis.key.length,s=1;s<=this.stx;s++)this.path.key.push(this.recursive_field),this.path.key.push(this.stack_field[s].children[this.stack_ix[s]].sub);return this.state=STATE_CHILDREN,!0}if(this.state==STATE_CHILDREN){let e=path_to_node(addr(this.stack_node[this.stx],this.recursive_field));if(null!=e&&null!=e.children){this.stx+=1,t=this.rev?e.children.length-1:0,this.stack_ix[this.stx]=t,this.stack_node[this.stx]=e.children[t],this.stack_field[this.stx]=e,this.state=STATE_EMIT;continue}}if(this.stx>0)if(e=this.stack_field[this.stx],this.rev){if((t=this.stack_ix[this.stx]-1)>=0){this.stack_ix[this.stx]=t,this.stack_node[this.stx]=e.children[t],this.state=STATE_EMIT;continue}}else if((t=this.stack_ix[this.stx]+1)<e.children.length){this.stack_ix[this.stx]=t,this.stack_node[this.stx]=e.children[t],this.state=STATE_EMIT;continue}if(this.stx-=1,this.stx<0)return this.done=!0,!1;this.state=2}return!1},a_loop.prototype.next=function(){if(this.done)return!1;if(ge2(this.count,this.limit))return this.trap&&internal_err("Aborting because loop limit of "+String(this.limit)+" was reached"),this.done=!0,!1;switch(this.method){case METHOD_INFINITE:break;case METHOD_RANGE:if(this.rev){if(this.index-=this.range_delta,this.index<this.range_from)return this.done=!0,!1}else if(this.index+=this.range_delta,this.index>this.range_to)return this.done=!0,!1;break;case METHOD_ACROSS:if(this.rev){if(this.elemx-=1,this.elemx<0)return this.done=!0,!1}else{this.elemx+=1;let e=this.parent_node.children;if(null==e||this.elemx>=e.length)return this.done=!0,!1}this.leaf=this.parent_node.children[this.elemx],this.index=this.leaf.sub,this.val=get_leaf_value(this.leaf.val),this.path.key[this.path.key.length-1]=this.index;break;case METHOD_TOP_DOWN:if(!this.next_topdown())return this.done=!0,!1;break;case METHOD_BOT_UP:internal_err("not yet");break;case METHOD_RECURSIVE:if(!this.next_recursive())return this.done=!0,!1;break;case METHOD_PASS2:var e;if(this.count>=this.sort_list.length)return this.done=!0,!1;e=this.rev?this.sort_list[this.sort_list.length-1-this.count]:this.sort_list[this.count],this.index=e.index,this.val=get_leaf_value(e.val),this.leaf=e.leaf,this.path=e.path;break;default:internal_err("bad method")}return this.count++,!0},a_loop.prototype.build_loop_steps=function(){let e,t=0;for(;this.next();){switch((t+=1)>1e5&&internal_err("sanity check error: 100k sort item limit reached in loop."),(e={}).index=this.index,e.val=get_leaf_value(this.val),e.path=this.path.clone(),e.leaf=this.leaf,this.sort_mode){case 1:e.key=this.index;break;case 2:e.key=str.to_str(this.index);break;case 3:e.key=get_leaf_value(this.val);break;case 4:e.key=get_generic(this.path,this.sort_field);break;case 5:e.key=e.path;break;default:internal_err("bad sort mode")}this.sort_list.push(e)}};export function a_tree(e,t,s=0,n=null){this.children=null,this.val=U,this.eflags=EF_VAL_IS_U|s,this.seq=0,this.sub=0,this.label=t,0!=(s&NF_TOPLEVEL)&&(this.sub=str.str_hash_fnv(t+":"+e),TREES[this.sub]=this),null!=n&&merge_tree(e,0,n,addr(this))};export function a_dependency(){this.path=null,this.seq=0};export function a_loom_anim_curve(){this.phase=0,this.draw_end_time=0,this.hold_end_time=0};export function a_loom_anim_num(){this.paused=!1,this.pause_start=0};export function a_path(e){this.base=e,this.key=[]};a_path.prototype.clone=function(){let e=new a_path;return e.base=this.base,e.key=this.key.concat(),e},a_path.prototype.clone_to_soft=function(){var e=new a_path;return e.base=this.base.sub,e.key=this.key.concat(),e},a_path.prototype.clone_to_hard=function(){var e=new a_path;return e.base=TREES[this.base],void 0!=e.base&&null!=e.base||argument_err("A soft path should have a label in the base field"),e.key=this.key.concat(),e};export function a_pathh(){internal_err("not yet")};export function a_pathx(){let e;for(this.basepath=null,this.lastx=-1,this.lev=[],this.exists=!1,e=0;e<MAX_LEVELS;e++)this.lev[e]={}};export var PLACEHOLDER=new a_image("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAzUExURYmIlL/I18jT45KTn5+jsLG4xpaYpaiuu42OmcPO3brD0ra+zJueqqSotq2zwczY6ISDjoaU0+EAAAWMSURBVHjaYhCgAwAIIAZ6WAIQQHSxBCCA6GIJQADRxRKAAKKLJQABRBdLAAKILpYABBBdLAEIILpYAhBAdLEEIIDoYglAAJFsCQcvNzsHiXoAAohES9i4+EGAi40kXQABRJIlDNz8MMBFikaAACJJLSM/AjCSoBMggEixhIsfGTASrxEggBiwupgFm1IWflSAVREzJzOmIEAAMWANFSYsKgUY0SzB5hVmJmx6AQIIiyXsQAOwqOTgRwcc2OzAZjlAAGELLlastrBhWMKG3Q5MIwECCGvEY7WFnaAluOwQAAgg7KkLmy0ELcFphwBAAOFIwlhsIWQJbjsEAAIIVz7BtIUHf8TjsUMAIIBwZkYMWzBSFyexdggABBDuHI9hC3o+YUU2hhNfSQMQQHiKFXRb0HM8M1qphrs0AwggfGUXmi0MTCh2cBFthwBAADEQKhGRbOHFkbYI2SEAEEAMBMt2JoQSTqweIWiHAEAAMRCuQRD62bClX8J2CAAEEIMAKbYgakZ2EuwQAAggQpUWqhkcsLjnZCDBDgGAACJYM6KaAitbeEixQwAggAhXvyjmMHCixDpxdggABBARdTyKSSzI+ZBIOwQAAoiYhgSKWVyIWCfWDgGAACKqtQIyjQmaZpkR9SsHI5EtI4AAIq5JxMCIMIydiQObMD4AEEBYFXGwAQGqMiR1PDi1M7CxYTUPIICw1Prs0NKDixeLJAs3FxcXK7YmFws3OBMxcWO2kwECiAGzdYZcZaC1eljgmZEH3WVIRTRGOxkggBiwtTgQgImdAa3shwE+rJZjbycDBBADgWYiPycbjqIeEWTMGJq4UA0FCCAG/O1dEOBmQCu4oJ6EBiUDHxY9qJEGEEBolnBi0cDPBNGCbhgkwNiwakFpZAgABBCqJcz82AEXMxYHgAzi4MahAyWJAQQQqiV8/LgAsCTBEAOmKZzqkZsyAgABxICnm4OaYjAbd2yMuJWjhBdAAKFawo1bFx9mUHLwMOF2E7KxAAHEQDBxwbu7mMEFLiKxA15kYwECCK3wwe40ThZsWYgLUlxitwSlqAAIIAZC/QNQpDPg6TNizSb83CimAgQQegHAiT35YikN4KGOLRmj9joAAohA2QXLiJhyyK1kjAzJh2ooQAAxCOCzBbV8RJZD6yGxcOLMJEAAEEBYqgxWmFGMGBUKA6wcZsXQxwIPTPRqQEAAIICw1mRs7EDAg3UsiIEHJIW9PmVh5+Zm58UyBAAQQEQOe7AihQBSTcZCXB0PEEDEWcKKlLt4EekTGEdE2QIQQAxE2gFPlaBahQ2pYiDGFoAAYiDWDl4kDicxvVEkABBADETawYLSRWEhzRaAAGIgzQ5ozQXvOUBsITQmCRBADKTZwY6epcGNCKwjV0gAIIAYSLKDGbN6ZSDCFoAAYiBiZJMFS4MJHmDE2AIQQIR7v0h28GItAwnbAhBADCTYgVqlMRNvC0AAMRBvB1pbBn1EAo8tAAHEQLwd6HUzG9G2AAQQA9F2oDWF0UaJ8NoCEEAMRNuB0ZBgQlHPhccWgABiwDeqgmIHA4HhQfCYEvaJAoAAYsBjBzOBIVsWfPkWGQAEEAOxdmCxhF2ASFsAAoiBWDuIsASnLQABxECsHVgs4RUg0haAAGLAPvCPJZ0wEx5Gh9qC0VoBCCAGrFMYWNMiE2aDG6stmJUYQABhixMeTmacpT6eJhy07MFSUQIEEAkzQWijz0zEz9EBBBAp002ozXoe4jUCBBBJs3NItjCRYIcAQACRNs8I7yVykzSfCRBApM6Y8gArZCZWZtI0AQQQ6XO/HGwk6wEIILpMMAMEEF0sAQggulgCEEB0sQQggOhiCUAA0cUSgACiiyUAAUQXSwACiC6WAAQQXSwBCCC6WAIQQHSxBCDAAIlbTCvv7okVAAAAAElFTkSuQmCC","PLACEHOLDER",!0);export function a_image(e,t="",s=!1,n=0,_=0){if(this.tile_width=n,this.tile_height=_,null==e)this.sysobj=null;else{var o=document.createElement("img");o.url=e,s&&(o.onload=function callback_on_load(){TRACE_IMG&&logg(`...in preload finished for ${this.src.substr(0,70)}, natural=${this.naturalWidth} x ${this.naturalHeight}`);this.onload=null},o.src=e),o.alt=t,o.style.userSelect="none",o.style.webkitUserSelect="none",this.sysobj=o}};export function image_load(e,t){var s="";for(let e in t)switch(e){case"hint":s=t.hint;break;default:argument_err("bad option: "+e)}return new a_image(e,s)};export function a_meas(){this.mag=U,this.unit=U,this.family=U,this.unitss=null};a_meas.prototype.clone=function(){let e=new a_meas;return e.mag=this.mag,e.unit=this.unit,e.family=this.family,e.unitss=this.unitss,e};export function a_function(e="",t="",s=null,n=null,_=null){this.modname=e,this.name=t,this.code=s,this.tracker=n,this.hash=str.str_hash_fnv(t+":"+e),this.parms=_};export function a_gradient(e=null,t=null,s=0,n=0,_=null,o=null,r=null){this.grad_kind=e,this.grad_spread=t,this.grad_focus=s,this.grad_colors=o,this.grad_alphas=r,this.grad_ratios=_,this.grad_angle=n};export function a_sound(e){if(this.loopf=!1,this.notify=!1,this.id=0,this.pause_position=0,this.curx=0,this.numx=1,IS_NODE)this.audio=null;else{let t=new Audio(e);t.preload="auto",t.load(),this.audio=[t]}};export function new_changelist(...e){for(var t,s,n=new a_tree(_M,"$new_changelist"),_=e.length,o=0,r=1;o<_;)t=e[o++],s=e[o++],setv(_M,0,n,r,str.F_find_patt,t),setv(_M,0,n,r,str.F_repl_patt,s),r+=1;return null};function null_derive_func(){}export function solve_rectR(e){let t=null,s=U,n=U,_=U,o=U,r=U,a=U,i=U,u=U,c=U,l=U,p=U,d=U,g=U,m=U,E=U,h=U,x=U,f=1,b=U,R=U,A=!1,N=!1;for(let N in e)switch(N){case"basis":t=e.basis;break;case"bottom":u=e.bottom;break;case"cx":s=e.cx;break;case"cy":n=e.cy;break;case"dx":_=e.dx;break;case"dy":o=e.dy;break;case"height":l=e.height;break;case"inset":p=e.inset;break;case"inset_n":d=e.inset_n;break;case"inset_s":g=e.inset_s;break;case"inset_e":m=e.inset_e;break;case"inset_w":E=e.inset_w;break;case"inset_y":h=e.inset_y;break;case"inset_x":x=e.inset_x;break;case"left":r=e.left;break;case"pin":f=e.pin,CHECKS&&(f<1||f>9)&&argument_err("bad pin value");break;case"prop_x":b=e.prop_x;break;case"prop_y":R=e.prop_y;break;case"right":a=e.right;break;case"round":A=e.round;break;case"top":i=e.top;break;case"width":c=e.width;break;default:argument_err("### internal error, bad property in options: "+N)}if(null!=t&&(_!=U&&(t=new Rectangle(t.left+_,t.top,t.width,t.height)),o!=U&&(t=new Rectangle(t.left,t.top+o,t.width,t.height)),p!=U&&(t=new Rectangle(t.left+p,t.top+p,t.width-2*p,t.height-2*p)),h!=U&&(t=new Rectangle(t.left,t.top+h,t.width,t.height-2*h)),x!=U&&(t=new Rectangle(t.left+x,t.top,t.width-2*x,t.height)),d!=U&&(t=new Rectangle(t.left,t.top+d,t.width,t.height-d)),g!=U&&(t=new Rectangle(t.left,t.top,t.width,t.height-g)),m!=U&&(t=new Rectangle(t.left,t.top,t.width-m,t.height)),E!=U&&(t=new Rectangle(t.left+E,t.top,t.width-E,t.height))),null!=t){switch((f-1)%3){case 0:r=t.left;break;case 1:s=t.left+t.width/2;break;case 2:a=t.left+t.width}switch((f-1)/3>>0){case 0:i=t.top;break;case 1:n=t.top+t.height/2;break;case 2:u=t.top+t.height;break;default:argument_err("pin out of range")}b!=U&&R!=U&&(t.width*R>t.height*b?c=(l=t.height)*b/R:l=(c=t.width)*R/b)}return r!=U?c!=U||(a!=U?c=a-r:s!=U?c=2*(s-r):null!=t?c=t.width:N=!0):a!=U?c!=U?r=a-c:s!=U?r=a-(c=2*(a-s)):null!=t?r=a-(c=t.width):N=!0:s!=U?c!=U?r=s-c/2:null!=t?r=s-(c=t.width)/2:N=!0:N=!0,i!=U?l!=U||(u!=U?l=u-i:n!=U?l=2*(n-i):null!=t?l=t.height:N=!0):u!=U?l!=U?i=u-l:n!=U?i=u-(l=2*(u-n)):null!=t?i=u-(l=t.height):N=!0:n!=U?l!=U?i=n-l/2:null!=t?i=n-(l=t.height)/2:N=!0:N=!0,CHECKS&&N&&argument_err("insufficient info to determine rectangle"),p!=U&&(r+=p,i+=p,c-=p+p,l-=p+p),A&&(r=Math.round(r),i=Math.round(i),c=Math.round(c),l=Math.round(l)),new Rectangle(r,i,c,l)};export function load_code(e,t,s){let n,_,o=s.toString(16).toUpperCase();for(;o.length<8;)o="0"+o;n="/beads/bcode/"+e+("_"+o+".bcode");debugger;null===_&&(_=[]).push(e),g_code[t]=_};export function s(e,t,s=LANG_ENG){return t};export function is_enum_b(e){return e>=FIRST_ENUM&&e<=LAST_ENUM};export function is_err_enum_b(e){return Number.isNaN(e)||e>=FIRST_ENUM&&e<=LAST_ENUM};export function collate_num(e,t){let s,n;return(s=e===U?1:is_enum_b(e)?2:Number.isNaN(e)?3:0)<(n=t===U?1:is_enum_b(t)?2:Number.isNaN(t)?3:0)?(TRACE_COLLATE&&logg(str.conv("collate_num, a={}, b={}, category -1",e,t)),-1):s>n?(TRACE_COLLATE&&logg(str.conv("collate_num, a={}, b={}, category +1",e,t)),1):0===s?e<t?(TRACE_COLLATE&&logg(str.conv("collate_num, a={}, b={}, result=-1",e,t)),-1):e>t?(TRACE_COLLATE&&logg(str.conv("collate_num, a={}, b={}, result=+1",e,t)),1):(TRACE_COLLATE&&logg(str.conv("collate_num, a={}, b={}, result=0",e,t)),0):2===s?(TRACE_COLLATE&&logg(str.conv("collate_num, a={}, b={} enum",e,t)),collate_str(str.enum_to_str(e),str.enum_to_str(t))):(TRACE_COLLATE&&logg(str.conv("collate_num, a={}, b={}, other",e,t)),0)};export function collate_str(e,t){let s,n;if((s=e===U_STR?1:e===ERR_STR?2:0)<(n=t===U_STR?1:t===ERR_STR?2:0))return-1;if(s>n)return 1;if(0===s){if(e<t)return-1;if(e>t)return 1}return 0};export const AS3_NUM=1;export const AS3_STR=2;export const AS3_OTHER=99;export function as3_cat(e){return"number"==typeof e?AS3_NUM:"string"==typeof e?AS3_STR:AS3_OTHER};export function collate_open(e,t){let s=as3_cat(e),n=as3_cat(t);if(s<n)return-1;if(s>n)return 1;switch(s){case AS3_NUM:return collate_num(e,t);case AS3_STR:return collate_str(e,t)}return TRACE_COLLATE&&logg(str.conv("collate open, equal, a={}, b={}",e,t)),0};const TRACE_TASKS=!0;let q_tasks,q_taskx,q_loader,q_donef,q_progressf;const TASK_WAITING=0,TASK_BUSY=1,TASK_DONE=2,TASK_FAILED=3;export function a_qtask(e,t,s){this.folder=e,this.fname=t,this.addr=s,this.state=TASK_WAITING};export function a_loader_x(e,t,s,n,_,o){debugger};export function q_reset(){q_tasks=[]};export function q_add_pic(e,t,s){TRACE_TASKS&&logg(str.conv("## adding task with fnane={str}, path={path}",t,s));let n=new a_qtask(e,t,s);q_tasks.push(n)};export function q_start(e=null,t=null){TRACE_TASKS&&logg("## q_start, ntasks="+String(q_tasks.length)),q_donef=e,q_progressf=t,q_taskx=0,q_next_task()};function q_next_task(){let e,t=q_tasks.length;q_taskx<t?(TRACE_TASKS&&logg(str.conv("## task {int}/{int} running",q_taskx,t)),(e=q_tasks[q_taskx]).state=a_qtask.TASK_BUSY,q_loader=new a_loader_x(e.folder,e.fname,TYPE_BYTES,on_task_complete,Y),null!==q_progressf&&q_progressf(q_taskx,t)):(TRACE_TASKS&&logg("## q_tasks all done"),null!==q_donef&&q_donef())}function on_task_complete(e,t){e===Y?(TRACE_TASKS&&logg(str.conv("## task {int} okay",q_taskx)),q_tasks[q_taskx].state=a_qtask.TASK_DONE):(TRACE_TASKS&&logg(str.conv("## task {int} failed",q_taskx)),q_tasks[q_taskx].state=a_qtask.TASK_FAILED),q_taskx+=1,q_next_task()}export function is_invalid_sub(e){return"number"==typeof e?Number.isNaN(e)||e===U:"string"!=typeof e};export function set_val_rect(e,t,s,n){setv(e,t,s,F_left,n.left),setv(e,t,s,F_top,n.top),setv(e,t,s,F_width,n.width),setv(e,t,s,F_height,n.height)};function rect_intersect(e,t){if(e==ERR_TREE||t==ERR_TREE)return ERR_TREE;if(null==e)return t;if(null==t)return e;let s,n,_,o,r=getn(e,F_left),a=getn(e,F_top),i=getn(e,F_width),u=getn(e,F_height),c=getn(t,F_left),l=getn(t,F_top),p=getn(t,F_width),d=getn(t,F_height);if(is_err_enum(r)||is_err_enum(a)||is_err_enum(i)||is_err_enum(u)||is_err_enum(c)||is_err_enum(l)||is_err_enum(p)||is_err_enum(d))return ERR_TREE;if(r==U||a==U||i==U||u==U)return t;if(c==U||l==U||p==U||d==U)return e;let g=r+i,m=a+u,E=c+p,h=l+d;s=r>c?r:c,n=a>l?a:l,_=g<E?g:E,o=m<h?m:h;let x=new a_tree(_M,"$rect_intersect");return setv(_M,0,x,F_left,s),setv(_M,0,x,F_top,n),setv(_M,0,x,F_width,_-s),setv(_M,0,x,F_height,o-n),x}function rect_union(e,t){if(e==ERR_TREE||t==ERR_TREE)return ERR_TREE;if(null==e)return t;if(null==t)return e;let s,n,_,o,r=getn(e,F_left),a=getn(e,F_top),i=getn(e,F_width),u=getn(e,F_height),c=getn(t,F_left),l=getn(t,F_top),p=getn(t,F_width),d=getn(t,F_height);if(is_err_enum(r)||is_err_enum(a)||is_err_enum(i)||is_err_enum(u)||is_err_enum(c)||is_err_enum(l)||is_err_enum(p)||is_err_enum(d))return ERR_TREE;if(r==U||a==U||i==U||u==U)return t;if(c==U||l==U||p==U||d==U)return e;let g=r+i,m=a+u,E=c+p,h=l+d;s=r<c?r:c,n=a<l?a:l,_=g>E?g:E,o=m>h?m:h;let x=new a_tree(_M,"$rect_union");return setv(_M,0,x,F_left,s),setv(_M,0,x,F_top,n),setv(_M,0,x,F_width,_-s),setv(_M,0,x,F_height,o-n),x}export function rect_is_portrait(e){let t=getn(e,F_width),s=getn(e,F_height);return is_err_enum_b(t)||is_err_enum_b(s)?(CHECKS&&argument_err("bad rectangle"),ERR):t===U||s===U?U:t<s?Y:N};export function rect_is_landscape(e){let t=getn(e,F_width),s=getn(e,F_height);return is_err_enum_b(t)||is_err_enum_b(s)?(CHECKS&&argument_err("bad rectangle"),ERR):t===U||s===U?U:t>=s?Y:N};function rect_is_intersecting(e,t){if(e==ERR_TREE||t==ERR_TREE)return ERR;if(null==e||null==t)return U;let s=getn(e,F_left),n=getn(e,F_top),_=getn(e,F_width),o=getn(e,F_height),r=getn(t,F_left),a=getn(t,F_top),i=getn(t,F_width),u=getn(t,F_height);return is_err_enum(s)||is_err_enum(n)||is_err_enum(_)||is_err_enum(o)||is_err_enum(r)||is_err_enum(a)||is_err_enum(i)||is_err_enum(u)?ERR:s==U||n==U||_==U||o==U?U:r==U||a==U||i==U||u==U?U:s+_<=r||r+i<=s||n+o<=a||a+u<=n?N:Y}export function rect_is_inside(e,t){if(e==ERR_PATH)return ERR;if(null==e)return U;let s=U,n=U;for(let e in t)switch(e){case"x":s=t.x;break;case"y":n=t.y;break;case"xy":s=getn(t.xy,F_x),n=getn(t.xy,F_y);break;default:argument_err("bad option: "+e)}if(is_err_enum(s)||is_err_enum(n))return ERR;if(s==U||n==U)return U;let _=getn(e,F_left),o=getn(e,F_top),r=getn(e,F_width),a=getn(e,F_height);return s>=_&&n>=o&&s<_+r&&n<o+a?Y:N};export function rect_as_tree(e,t,s,n){let _=new a_tree("std","$rect_as_tree");return setv(_M,0,_,F_left,e),setv(_M,0,_,F_top,t),setv(_M,0,_,F_width,s),setv(_M,0,_,F_height,n),_};export function tree_to_rect(e){let t,s,n,_;return new Rectangle(t=getn(e,F_left),s=getn(e,F_top),n=getn(e,F_width),_=getn(e,F_height))};export function point_as_tree(e,t){let s=new a_tree("std","$point_as_tree");return setv(_M,0,s,F_x,e),setv(_M,0,s,F_y,t),s};export function SPTS(e){return e*SCREEN_DPI*ONE_72};export function int_abs(e){return e<0?-e:e};export function add_family(e,t,s=N){s===Y&&setv(_M,0,families,e,F_fam_nonlinear,Y),""!==t&&setv(_M,0,families,e,F_fam_dim,t)};export function add_unit(e,t,s,n=null,_=null){setv(_M,0,unit_to_family,t,e),1===s&&setv(_M,0,families,e,F_fam_base,t),null===_?setv(_M,0,families,e,F_fam_units,t,F_unit_factor,s):(setv(_M,0,families,e,F_fam_units,t,F_base_to_unit,n),setv(_M,0,families,e,F_fam_units,t,F_unit_to_base,_))};export function degree_to_radian(e){return e*Math.PI/180};export function radian_to_degree(e){return 180*e/Math.PI};export function xy_in_rect(e,t,s){return e-=s.left,t-=s.top,e>=0&&t>=0&&e<s.width&&t<s.height};export function tree_add(e,t,s,n){path_setv(e,t,n,add(path_getv(n,EF_VAL_IS_NUM),s))};export function tree_sub(e,t,s,n){path_setv(e,t,n,sub(path_getv(n,EF_VAL_IS_NUM),s))};export function tree_mul(e,t,s,n){path_setv(e,t,n,mul(path_getv(n,EF_VAL_IS_NUM),s))};export function tree_div(e,t,s,n){path_setv(e,t,n,div(path_getv(n,EF_VAL_IS_NUM),s))};export function tree_cat(e,t,s,n){path_setv(e,t,n,cat(path_getv(n,EF_VAL_IS_STR),s))};export function add(e,t){if("number"==typeof e&&"number"==typeof t)return is_err_enum_b(e)||is_err_enum_b(t)?(TRAP_ERR&&internal_err("bad arg"),ERR):e===U||t===U?U:e+t;if(e instanceof a_meas&&t instanceof a_meas&&e.unitss===t.unitss){let s=e.clone();return s.mag=e.mag+t.mag,s}return TRAP_ERR&&internal_err("bad arg"),ERR};export function sub(e,t){if("number"==typeof e&&"number"==typeof t)return is_err_enum_b(e)||is_err_enum_b(t)?(TRAP_ERR&&internal_err("bad arg"),ERR):e===U||t===U?U:e-t;if(e instanceof a_meas&&t instanceof a_meas&&e.unitss===t.unitss){let s=e.clone();return s.mag=e.mag-t.mag,s}return TRAP_ERR&&internal_err("bad arg"),ERR};export function mul(e,t){let s="number"==typeof e,n="number"==typeof t;if(s&&n)return 0===e||0===t?0:(e===Y?e=1:e===N&&(e=0),t===Y?t=1:t===N&&(t=0),is_err_enum_b(e)||is_err_enum_b(t)?(TRAP_ERR&&internal_err("bad arg"),ERR):e===U||t===U?U:e*t);let _,o=e instanceof a_meas,r=t instanceof a_meas;if(o&&r){(_=new a_meas).family=U,_.mag=e.mag*t.mag,_.unit=U;let s,n=str_to_unitxx(e.unitss),o=str_to_unitxx(t.unitss);for(s of o)n.add_unit_term(s,1);return _.unitss=n.unitxx_to_str(),_}return s&&r?is_err_enum_b(e)?(TRAP_ERR&&internal_err("bad arg"),ERR_MEAS):e===U?U:((_=t.clone()).mag=t.mag*e,_):o&&n?is_err_enum_b(t)?(TRAP_ERR&&internal_err("bad arg"),ERR):t===U?U:is_enum_b(t)?(TRAP_ERR&&internal_err("bad arg"),ERR_MEAS):((_=e.clone()).mag=e.mag*t,_):(TRAP_ERR&&internal_err("bad arg"),ERR)};export function div(e,t){let s="number"==typeof e,n="number"==typeof t;if(s&&n){if(0===e)return 0;if(is_err_enum_b(e)||is_err_enum_b(t))return TRAP_ERR&&internal_err("bad arg"),ERR;if(e===U||t===U)return U;let s;return s=e/t,Number.isNaN(s)?(TRAP_ERR&&internal_err("bad arg"),ERR):s}let _,o,r=e instanceof a_meas,a=t instanceof a_meas;if(r&&a){if((_=new a_meas).family=U,_.unit=U,0===e.mag)_.mag=0;else if(_.mag=e.mag/t.mag,Number.isNaN(_.mag))return ERR_MEAS;let s=str_to_unitxx(e.unitss),n=str_to_unitxx(t.unitss);for(o of n)s.add_unit_term(o,1);return _.unitss=s.unitxx_to_str(),_}if(s&&a){if(is_err_enum_b(e))return TRAP_ERR&&internal_err("bad arg"),ERR_MEAS;if(0===e)return 0;if(e===U)return U;if((_=new a_meas).family=U,_.unit=U,0===e)_.mag=0;else if(_.mag=e/t.mag,Number.isNaN(_.mag))return ERR_MEAS;let s=str_to_unitxx(t.unitss);for(o of s)o.num=-o.num;return _.unitss=s.unitxx_to_str(),_}return r&&n?is_err_enum_b(t)?(TRAP_ERR&&internal_err("bad arg"),ERR):t===U?U:((_=e.clone()).mag=e.mag/t,Number.isNaN(_.mag)?ERR_MEAS:_):(TRAP_ERR&&internal_err("bad arg"),ERR)};export function exp(e,t,s){return is_err_enum_b(e)||is_err_enum_b(t)||is_err_enum_b(s)?ERR:e==U||t==U||s==U?U:Math.pow(e,t/s)};export function cat(...e){var t="";for(let s of e){if(s==ERR_STR)return ERR_STR;null!=s&&""!=s&&(t+=s)}return t};export function negate(e){return is_err_enum_b(e)?(TRAP_ERR&&internal_err("bad arg"),ERR):e===U?U:-e};export function meas(e,t,s){let n,_,o=new a_meas;return o.family=s,o.unit=t,t!==U?(o.unitss=gets(families,s,F_fam_dim),(n=getn(families,s,F_fam_units,t,F_unit_factor))===U?(_=get_func(families,s,F_fam_units,t,F_unit_to_base),o.mag=_.code(e)):o.mag=1===n?e:mul(e,n)):o.mag=e,o};export function negate_meas(e){(void 0).mag=negate(e.mag),(void 0).family=e.family,(void 0).unit=e.unit,(void 0).unitss=e.unitss};export function mul_meas_n(e,t){let s=e.clone();return s.mag=mul(e.mag,t),s};export function not4(e){return e===Y?N:e===N?Y:e===U?U:ERR};export function or4(e,t){if(Number.isNaN(e)||Number.isNaN(t))return ERR;if(e==U||t==U)return U;if(e===Y){if(t===Y||t===N)return Y}else if(e===N){if(t===Y)return Y;if(t===N)return N}return ERR};export function and4(e,t){if(Number.isNaN(e)||Number.isNaN(t))return ERR;if(e==U||t==U)return U;if(e===Y){if(t===Y)return Y;if(t===N)return N}else if(e===N&&(t===Y||t===N))return N;return ERR};export function xor4(e,t){if(Number.isNaN(e)||Number.isNaN(t))return ERR;if(e==U||t==U)return U;if(e===Y){if(t===Y)return N;if(t===N)return Y}else if(e===N){if(t===Y)return Y;if(t===N)return N}return ERR};export function xor2(e,t){return e===Y&&t===N||e===N&&t===Y};export function val_type(e){if("number"==typeof e)return Number.isNaN(e)?TYPE_ERR:e==U?TYPE_U:is_enum_b(e)?TYPE_ENUM:TYPE_NUM;if("string"==typeof e)return e==ERR_STR?TYPE_ERR:TYPE_STR;if(e instanceof a_meas)return Number.isNaN(e.mag)?TYPE_ERR:e.mag==U?TYPE_U:TYPE_MEAS;if(e instanceof a_path)return TYPE_PTR;if(e instanceof a_tree)return TYPE_TREE;if(e instanceof a_image)return TYPE_IMAGE;if(e instanceof a_sound)return TYPE_SOUND;if(e instanceof a_function)return TYPE_FUNC;if(e instanceof ByteArray)return TYPE_BYTES;if(e instanceof Object)return TYPE_OBJECT;if(null==e)return TYPE_U;if(CHECKS)throw new Error("unknown type");return TYPE_U};export function lt4(e,t){let s=val_type(e),n=val_type(t);if(s==TYPE_ERR||n==TYPE_ERR)return ERR;if(s==TYPE_U||n==TYPE_U)return U;if(s!=n)return ERR;switch(s){case TYPE_NUM:return e<t?Y:N;case TYPE_MEAS:return Number.isNaN(e.mag)||Number.isNaN(t.mag)||e.unitss!=t.unitss?ERR:e.mag<t.mag?Y:N;case TYPE_STR:return e<t?Y:N;default:return ERR}};export function le4(e,t){let s=val_type(e),n=val_type(t);if(s==TYPE_ERR||n==TYPE_ERR)return ERR;if(s==TYPE_U||n==TYPE_U)return U;if(s!=n)return ERR;switch(s){case TYPE_NUM:return e<=t?Y:N;case TYPE_MEAS:return Number.isNaN(e.mag)||Number.isNaN(t.mag)||e.unitss!=t.unitss?ERR:e.mag<=t.mag?Y:N;case TYPE_STR:return e<=t?Y:N;default:return ERR}};export function ge4(e,t){let s=val_type(e),n=val_type(t);if(s==TYPE_ERR||n==TYPE_ERR)return ERR;if(s==TYPE_U||n==TYPE_U)return U;if(s!=n)return ERR;switch(s){case TYPE_NUM:return e>=t?Y:N;case TYPE_MEAS:return Number.isNaN(e.mag)||Number.isNaN(t.mag)||e.unitss!=t.unitss?ERR:e.mag>=t.mag?Y:N;case TYPE_STR:return e>=t?Y:N;default:return ERR}};export function gt4(e,t){let s=val_type(e),n=val_type(t);if(s==TYPE_ERR||n==TYPE_ERR)return ERR;if(s==TYPE_U||n==TYPE_U)return U;if(s!=n)return ERR;switch(s){case TYPE_NUM:return e>t?Y:N;case TYPE_MEAS:return Number.isNaN(e.mag)||Number.isNaN(t.mag)||e.unitss!=t.unitss?ERR:e.mag>t.mag?Y:N;case TYPE_STR:return e>t?Y:N;default:return ERR}};export function eq4(e,t){var s=val_type(e),n=val_type(t);switch(s){case TYPE_NUM:case TYPE_ENUM:return e==t?Y:N;case TYPE_MEAS:return Number.isNaN(e.mag)||Number.isNaN(t.mag)?ERR:e.unitss==t.unitss&&e.mag==t.mag?Y:N;case TYPE_STR:return e==t?Y:N;case TYPE_PTR:return is_path_eq(e,t)?Y:N;case TYPE_ERR:return n==TYPE_ERR?Y:N;case TYPE_U:return n==TYPE_U?Y:N;case TYPE_OBJECT:return e==t?Y:N;default:if(CHECKS)throw new Error("bad type");return ERR}};export function ne4(e,t){var s=val_type(e),n=val_type(t);switch(s){case TYPE_NUM:case TYPE_ENUM:return e==t?N:Y;case TYPE_MEAS:return Number.isNaN(e.mag)||Number.isNaN(t.mag)?ERR:e.unitss==t.unitss&&e.mag==t.mag?N:Y;case TYPE_STR:return e==t?N:Y;case TYPE_PTR:return is_path_eq(e,t)?N:Y;case TYPE_ERR:return n==TYPE_ERR?N:Y;case TYPE_U:return n==TYPE_U?N:Y;case TYPE_OBJECT:return e==t?N:Y;default:return ERR}};export function lt2(e,t){return lt4(e,t)==Y};export function le2(e,t){return le4(e,t)==Y};export function ge2(e,t){return ge4(e,t)==Y};export function gt2(e,t){return gt4(e,t)==Y};export function eq2(e,t){return eq4(e,t)==Y};export function ne2(e,t){return eq4(e,t)!=Y};export function args_to_path(e,t){let s,n,_,o,r,a=t[0],i=t.length-e;if(a instanceof a_path){if(s=a.clone(),1==i)return s;_=1}else a instanceof a_tree?(s=new a_path(a),_=1):argument_err("bad arg");for(n=_;n<i;n++)((o=t[n])==U||Number.isNaN(o))&&(s.key.push(o),argument_err("not allowed to use U or ERR as a subscript, path="+str.to_str(s))),o==FOL?0==s.key.length||(null!=(r=path_getv(s,EF_VAL_IS_PATH))&&r!=ERR_PATH||argument_err("indirecting on something that is not a pointer, path="+str.to_str(s)),s=r):s.key.push(o);return s};export function addr(e,...t){let s,n,_,o,r=t.length;if(e instanceof a_path){if(s=e.clone(),0==r)return s}else e instanceof a_tree?s=new a_path(e):argument_err("bad arg");for(n=0;n<r;n++)((_=t[n])==U||Number.isNaN(_))&&argument_err("not allowed to use U or ERR as a subscript"),_==FOL?0==s.key.length||(null!=(o=path_getv(s,EF_VAL_IS_PATH))&&o!=ERR_PATH||argument_err("indirecting on something that is not a pointer"),s=o):s.key.push(_);return s};export function pathh(e,...t){let s,n,_;for(s=new a_pathh(str.str_hash_fnv(e)),_=0,n=0;n<t.length;n++)s.key[_]=t[n],_+=1;return s};export function addr_append(e,t,...s){let n=new a_path;n.base=e.base,n.key=e.key.concat(),n.key.push(t);for(let e=0;e<s.length;e++)n.key.push(s[e]);return n};export function addr_head(e,t){let s;return 0===t?e:((s=e.clone()).key.length=s.key.length-t,s)};export function addr_tail(e,t){let s=e.key.length-1-t;return s>=0?e.key[s]:(CHECKS&&argument_err("gone off the head of the path"),U)};export function alloc_derived(e,...t){let s,n,_,o;for(o=(n=path_create_pathx(_=args_to_path(1,t))).lev.length-1,(s=n.lev[o].elem).derivef=t[t.length-1],s.eflags|=EF_DIRTY_OR_DERIVED,g_currseq+=1,TRACE_SEQ&&logg(str.conv("+SEQ {} in alloc_derived {}",g_currseq,_));o>=0;)n.lev[o].node.seq=g_currseq,o-=1};export function exists(...e){let t=path_to_pathx(args_to_path(0,e));return null!==t&&t.exists};export function tog(e){return e=e==Y?N:e==N||e==U?Y:ERR};export function toggle(e,t,...s){let n=path_create_pathx(args_to_path(0,s)),_=leaf_getv(n,EF_VAL_IS_NUM);_=_==Y?N:_==N||_==U?Y:ERR,TRACE_LOG&&0!==t&&logg(">> toggle"),setv_x(e,t,n,_)};export function touch(e,t,s){if(null!=s&&0!=(s.base.eflags&NF_STATEFUL)){var n=path_to_node(s);if(null!=n){if(TRACE_SETVAL&&"$"!=s.base.sub.substr(0,1)&&logg(str.conv("  touch {}",s)),0!==t){var _=path_to_pathx(s);micro_add_delta(a_micro.LOGK_TOUCH,e,t,_,null,null)}n.seq=++g_currseq,TRACE_SEQ&&logg(str.conv("+SEQ {} in touch, path={}",g_currseq,s))}}};export function inc(e,t,...s){let n=path_create_pathx(args_to_path(0,s)),_=leaf_getv(n,EF_VAL_IS_NUM);_=_==U?1:add(_,1),TRACE_LOG&&0!==t&&logg(">> inc"),setv_x(e,t,n,_)};export function dec(e,t,...s){let n=path_create_pathx(args_to_path(0,s)),_=leaf_getv(n,EF_VAL_IS_NUM);_=_==U?-1:sub(_,1),TRACE_LOG&&0!==t&&logg(">> dec"),setv_x(e,t,n,_)};export function tree_lit(e,t,...s){let n,_,o,r=new a_tree("std","$tree_lit"),a=addr(r),i=s.length;for(n=0;n<i;)_=s[n],n+=1,_===POP?a.key.pop():_==VAL||_==VNP?(o=s[n],n+=1,o instanceof a_tree?merge_tree(e,t,o,a):o!=U&&path_setv(e,t,a,o),_==VAL&&a.key.pop()):a.key.push(_);return r};export function merge_lit(e,t,s,...n){let _,o,r,a,i=n.length;for(s instanceof a_path?_=s.clone():s instanceof a_tree?_=addr(s):argument_err("expected a_tree, or a_path"),o=0;o<i;){if(void 0==(r=n[o]))debugger;if(o+=1,r===POP)_.key.pop();else if(r==VAL||r==VNP){if(void 0==(a=n[o]))debugger;o+=1,a instanceof a_tree?merge_tree(e,t,a,_):a!=U&&path_setv(e,t,_,a),r==VAL&&_.key.pop()}else _.key.push(r)}};export function table_litP(...e){return new a_path(table_lit.apply(null,e))};export function table_lit(...e){let t,s,n,_,o,r=new a_tree("std","$table_lit"),a=e.length,i=[];for(t=0;s=e[t],t+=1,s!==VAL;)i.push(s);for(_=0,o=1;t<a;)n=e[t],t+=1,n===VAL?(o+=1,_=0):(setv(_M,0,r,o,i[_],n),_+=1);return r};export function pathx_to_path(e){let t,s=new a_path(e.lev[0].node);for(t=1;t<=e.lastx;t++)s.key.push(e.lev[t].sub);return s};export function path_to_pathx(e){let t,s,n,_=new a_pathx,o=_.lev[0],r=0;for(s of(_.basepath=e,o.node=e.base,o.sub=U,o.subx=-1,e.key)){if(TRAP_BAD_SUBSCRIPTS&&s===U&&internal_err("bad subscript"),n=find_subscript(s,o.node,0==(e.base.eflags&NF_UNSORTED)),!g_subscript_found)return _;r+=1,(t=_.lev[r]).sub=s,t.subx=n,t.node=o.node.children[n],o=t}return _.lastx=r,_.exists=!0,_};export function find_subscript(e,t,s){let n,_,o,r,a;if(g_subscript_found=!1,null===t.children)return 0;if(0===(_=t.children.length))return 0;if(s){for(r=0,a=_-1;r<=a;){if(TRACE_SEARCH&&logg(str.conv("binary search, lo={}, hi={}, totn={}",r,a,_)),o=(r+a)/2>>0,(n=t.children[o].sub)===e)return g_subscript_found=!0,TRACE_SEARCH&&logg(str.conv("..found, i={}",o)),o;e<n?a=o-1:r=o+1}e>t.children[o].sub&&(o+=1)}else{for(TRACE_SEARCH&&logg(str.conv("linear search, totn={}",_)),o=0;o<_;o++)if(t.children[o].sub===e)return g_subscript_found=!0,TRACE_SEARCH&&logg(str.conv("..found, i={}",o)),o;o=_}return TRACE_SEARCH&&logg(str.conv("..not found, i={}",o)),o};export function path_create_pathx(e){let t,s,n,_=new a_pathx,o=_.lev[0],r=0,a=!1,i=e.base;for(s of(_.basepath=e,o.node=i,o.sub=U,o.subx=-1,e.key))n=find_subscript(s,o.node,0==(i.eflags&NF_UNSORTED)),g_subscript_found||(null===o.node.children&&(o.node.children=[]),o.node.children.splice(n,0,new a_tree("std")),o.node.children[n].sub=s,o.node.seq=g_currseq+1,a=!0),r+=1,(t=_.lev[r]).sub=s,t.subx=n,t.node=o.node.children[n],o=t;return a&&i.eflags&NF_STATEFUL&&(g_currseq+=1,TRACE_SEQ&&logg(str.conv("+SEQ {} in path_create_pathx {}",g_currseq,e))),_.lastx=r,_.exists=!0,_};export function path_to_node(e,t=!1){if(!(e instanceof a_path))debugger;var s,n=path_to_pathx(e);return s=null!==n&&n.exists?n.lev[n.lastx].node:null,t&&null!=k.g_curr_block&&e.base.eflags&NF_STATEFUL&&add_path_dependency(e,s),s};export function node_get_type(e){switch(e.eflags&EF_MASK_TYPE){case EF_VAL_IS_U:return TYPE_U;case EF_VAL_IS_ERR:return TYPE_ERR;case EF_VAL_IS_NUM:return e.val===Y||e.val===N?TYPE_YESNO:TYPE_NUM;case EF_VAL_IS_STR:return TYPE_STR;case EF_VAL_IS_IMAGE:return TYPE_IMAGE;case EF_VAL_IS_FUNC:return TYPE_FUNC;case EF_VAL_IS_PATH:return TYPE_PTR;case EF_VAL_IS_MEAS:return TYPE_MEAS;case EF_VAL_IS_SOUND:return TYPE_SOUND;case EF_VAL_IS_BYTES:return TYPE_BYTES;case EF_VAL_IS_COLOR:return TYPE_COLOR;case EF_VAL_IS_DATE:return TYPE_DATE;case EF_VAL_IS_OBJECT:return TYPE_OBJECT;default:internal_err("bad leaf type")}return TYPE_ERR};function U_of_type(e){return 0===e||e&TYPES_WHERE_U_NUM?U:null}function ERR_of_type(e){switch(e){case EF_VAL_IS_NUM:return ERR;case EF_VAL_IS_STR:return ERR_STR;case EF_VAL_IS_IMAGE:return ERR_IMAGE;case EF_VAL_IS_FUNC:return ERR_FUNC;case EF_VAL_IS_PATH:return ERR_PATH;case EF_VAL_IS_MEAS:return ERR_MEAS;case EF_VAL_IS_SOUND:return ERR_SOUND;case EF_VAL_IS_GRAD:return ERR_GRAD;case EF_VAL_IS_BITS:return ERR_BITS;case EF_VAL_IS_BYTES:return ERR_BYTES;case EF_VAL_IS_COLOR:return ERR_COLOR;case EF_VAL_IS_DATE:return ERR_DATE;default:internal_err("bad type")}}export function get_generic(...e){return leaf_getv(path_to_pathx(args_to_path(0,e)),0)};export function getn(...e){return leaf_getv(path_to_pathx(args_to_path(0,e)),EF_VAL_IS_NUM)};export function gets(...e){return leaf_getv(path_to_pathx(args_to_path(0,e)),EF_VAL_IS_STR)};export function get_ptr(...e){return leaf_getv(path_to_pathx(args_to_path(0,e)),EF_VAL_IS_PATH)};export function get_image(...e){return leaf_getv(path_to_pathx(args_to_path(0,e)),EF_VAL_IS_IMAGE)};export function get_meas(...e){return leaf_getv(path_to_pathx(args_to_path(0,e)),EF_VAL_IS_MEAS)};export function get_func(...e){return leaf_getv(path_to_pathx(args_to_path(0,e)),EF_VAL_IS_FUNC)};export function get_sound(...e){return leaf_getv(path_to_pathx(args_to_path(0,e)),EF_VAL_IS_SOUND)};export function get_object(...e){return leaf_getv(path_to_pathx(args_to_path(0,e)),EF_VAL_IS_OBJECT)};export function path_getv(e,t){return leaf_getv(path_to_pathx(e),t)};export function add_path_dependency(e,t){let s=new a_dependency;s.path=e.clone(),s.seq=null!=t?t.seq:0,TRACE_IMPLIED&&logg(str.conv("--adding pathx add_path_dependency: {path} of seq {} in {}",s.path,s.seq,k.g_curr_block.blabel)),k.g_curr_block.usesz.push(s)};export function add_pathx_dependency(e){let t=new a_dependency;t.path=e.basepath.clone(),e.exists?t.seq=e.lev[e.lastx].node.seq:t.seq=0,TRACE_IMPLIED&&logg(str.conv("--adding pathx dependency: {path} of seq {} in {}",t.path,t.seq,k.g_curr_block.blabel)),k.g_curr_block.usesz.push(t)};export function add_node_dependency(e){let t=new a_dependency;t.path=addr(e),t.seq=e.seq,TRACE_IMPLIED&&logg(str.conv("--adding node dependency: {path} of seq {} in {}",t.path,t.seq,k.g_curr_block.blabel)),k.g_curr_block.usesz.push(t)};export function leaf_getv(e,t,s=!0){if(null===e)return U_of_type(t);if(null!=k.g_curr_block&&s&&e.basepath.base.eflags&NF_STATEFUL&&add_pathx_dependency(e),!e.exists)return U_of_type(t);let n=e.lev[e.lastx].node;return(EF_DIRTY_OR_DERIVED&n.eflags)===EF_DIRTY_OR_DERIVED&&(internal_err("not yet"),n.eflags&=~EF_IS_DIRTY),0==t||0!=(n.eflags&t)?0!=(n.eflags&EF_VAL_IS_PATH)?n.val.clone_to_hard():n.val:0!=(n.eflags&EF_VAL_IS_U)?U_of_type(t):0!=(n.eflags&EF_VAL_IS_ERR)?ERR_of_type(t):(TRAP_TYPE_MISMATCH&&internal_err("type mismatch on get"),ERR_of_type(t))};export function setv(e,t,...s){path_setv(e,t,args_to_path(1,s),s[s.length-1])};export function path_setv(e,t,s,n){var _;if(TRACE_LOG&&0!==t&&logg(str.conv(">> path_setv {}={}",s,n)),n==U){if(null===(_=path_to_pathx(s))||!_.exists)return;setv_x(e,t,_,U),_.lastx>0&&null==_.lev[_.lastx].node.children&&orphan_upwards(_)}else setv_x(e,t,_=path_create_pathx(s),n)};function setv_x(e,t,s,n){let _=!1,o=s.lev[s.lastx].node,r=o.val,a=o.eflags,i=val_type(n),u=s.basepath.base.eflags&NF_STATEFUL&&t>=0;switch(i){case TYPE_U:0==(a&EF_VAL_IS_U)&&(_=!0,o.val=U,o.eflags=a&EF_CLEAR_TYPE|EF_VAL_IS_U);break;case TYPE_ERR:0==(a&EF_VAL_IS_ERR)&&(_=!0,o.val=ERR,o.eflags=a&EF_CLEAR_TYPE|EF_VAL_IS_ERR);break;case TYPE_NUM:case TYPE_ENUM:0!=(a&EF_VAL_IS_NUM)&&r===n||(o.val=n,o.eflags=a&EF_CLEAR_TYPE|EF_VAL_IS_NUM,_=!0);break;case TYPE_STR:0!=(a&EF_VAL_IS_STR)&&r===n||(o.val=n,o.eflags=a&EF_CLEAR_TYPE|EF_VAL_IS_STR,_=!0);break;case TYPE_PTR:0!=(a&EF_VAL_IS_PATH)&&is_path_eq2(r,n)||(n.base instanceof a_tree?o.val=n.clone_to_soft():o.val=n,o.eflags=a&EF_CLEAR_TYPE|EF_VAL_IS_PATH,_=!0);break;case TYPE_MEAS:0!=(a&EF_VAL_IS_MEAS)&&is_meas_eq(r,n)||(_=!0,o.val=n,o.eflags=a&EF_CLEAR_TYPE|EF_VAL_IS_MEAS);break;case TYPE_IMAGE:0!=(a&EF_VAL_IS_STR)&&r===n||(_=!0,o.val=n,o.eflags=a&EF_CLEAR_TYPE|EF_VAL_IS_IMAGE);break;case TYPE_FUNC:0!=(a&EF_VAL_IS_FUNC)&&r===n||(_=!0,o.val=n,o.eflags=a&EF_CLEAR_TYPE|EF_VAL_IS_FUNC);break;case TYPE_SOUND:0!=(a&EF_VAL_IS_SOUND)&&r===n||(_=!0,o.val=n,o.eflags=a&EF_CLEAR_TYPE|EF_VAL_IS_SOUND);break;case TYPE_OBJECT:0!=(a&EF_VAL_IS_OBJECT)&&r===n||(_=!0,o.val=n,o.eflags=a&EF_CLEAR_TYPE|EF_VAL_IS_OBJECT);break;default:throw new Error("bad type")}let c=s.basepath.base;return TRACE_SETVAL&&u&&"$"!=c.sub.substr(0,1)&&logg(_?str.conv("  setval {}={}, was {}",s,n,r):str.conv("  setval {}={}, unchanged",s,r)),_&&u&&(t>0&&micro_add_delta(LOGK_DELTA,e,t,s,r,n),g_currseq+=1,TRACE_SEQ&&logg(str.conv("+SEQ {} in setv, path={}",g_currseq,s)),o.seq=g_currseq,o.markf!==NULL_FUNC&&o.markf(s)),_}export function append_val(e,t,s,n){let _=tree_next_hi(n,!1);return setv(e,t,n,_,s),_};export function prepend_val(e,t,s,n){let _=tree_next_lo(n,!1);return setv(e,t,n,_,s),_};export function insert_val(e,t,s,n){let _=path_to_pathx(n);if(null!=_)if(_.exists&&0!==_.lastx&&is_numeric(_.lev[_.lastx].sub)===Y){let o,r,a=_.lev[_.lastx].subx,i=_.lev[_.lastx].sub,u=count_consec(_.lev[_.lastx-1].node,a),c=n.clone(),l=n.clone(),p=c.key.length-1;for(;u>0;)o=i+u,c.key[p]=o-1,l.key[p]=o,path_setv(e,t,l,r=get_generic(c)),u--;setv_x(e,t,_,s)}else setv(e,t,n,s)};function is_path_in_path(e,t){if(e.base!=t.base)return!1;let s=t.key.length,n=e.key.length;if(s<=n)return!1;for(let s=0;s<n;s++)if(e.key[s]!=t.key[s])return!1;return!0}export function append_tree(e,t,s,n){let _=tree_next_hi(n,!1);return merge_tree(e,t,s,addr_append(n,_)),_};export function prepend_tree(e,t,s,n){let _=tree_next_lo(n,!1);return merge_tree(e,t,s,addr_append(n,_)),_};export function merge_tree(e,t,s,n){let _;if(s instanceof a_path?_=s:s instanceof a_tree?_=addr(s):argument_err("bad arg"),is_path_eq(_,n))return;let o,r,a=path_to_pathx(_);if(null===a||!a.exists)return;let i=_.base.eflags&NF_STATEFUL&&t>0;i&&micro_add_marker(MARK_MERGE_BEG),(is_path_in_path(_,n)||is_path_in_path(n,_))&&(r=addr(o=new a_tree("std","$merge_tree")),merge_tree(_M,0,_,r),a=path_to_pathx(r)),merge_x(e,t,a,path_create_pathx(n),0),i&&micro_add_marker(MARK_MERGE_END)};export function copy_tree(e,t,s,n){let _;if(s instanceof a_path?_=s:s instanceof a_tree?_=addr(s):argument_err("bad arg"),is_path_eq(_,n))return;let o,r,a=path_to_pathx(_);if(null===a||!a.exists)return;let i=_.base.eflags&NF_STATEFUL&&t>0;i&&micro_add_marker(MARK_COPY_BEG),(is_path_in_path(_,n)||is_path_in_path(n,_))&&(merge_tree(e,t,_,r=addr(o=new a_tree("std","$copy_tree"))),a=path_to_pathx(r));let u=path_to_pathx(n);u.exists?(trunc_x(e,t,u),merge_x(e,t,a,u=path_create_pathx(n),0)):merge_x(e,t,a,u=path_create_pathx(n),0),i&&micro_add_marker(MARK_COPY_END)};export function move_tree(e,t,s,n){let _;if(s instanceof a_path?_=s:s instanceof a_tree?_=addr(s):argument_err("bad arg"),is_path_eq(_,n))return;let o,r,a,i=path_to_pathx(_);if(null===i||!i.exists)return;let u=(_.base.eflags&NF_STATEFUL||n.base.eflags&NF_STATEFUL)&&t>0;u&&micro_add_marker(MARK_MOVE_BEG),is_path_in_path(_,n)||is_path_in_path(n,_)?(merge_tree(e,t,_,a=addr(r=new a_tree("std","$move_tree"))),trunc_x(e,t,i),o=path_create_pathx(n),merge_x(e,t,path_to_pathx(a),o,0)):(merge_x(e,t,i,o=path_create_pathx(n),0),trunc_x(e,t,i)),u&&micro_add_marker(MARK_MOVE_END)};export function swap_tree(e,t,s,n){if(is_path_eq(s,n))return;let _,o,r,a;if(is_path_in_path(s,n)||is_path_in_path(n,s))return void(TRAP_ERR&&internal_err("cannot swap overlapping trees"));if(o=path_to_pathx(s),r=path_to_pathx(n),!o.exists&&!r.exists)return;if(null===o||null===r)return void(TRAP_ERR&&internal_err("bad swap"));a=path_to_pathx(addr(_=new a_tree("std","$swap_tree")));let i=(NF_STATEFUL&s.base.eflags||NF_STATEFUL&n.base.eflags)&&t>0;i&&micro_add_marker(MARK_SWAP_BEG),merge_x(e,t,o,a,0),trunc_x(e,t,o),merge_x(e,t,r,o=path_create_pathx(s),0),trunc_x(e,t,r),merge_x(e,t,a,r=path_create_pathx(n),0),i&&micro_add_marker(MARK_SWAP_END),_=null,a=null};export function insert_tree(e,t,s,n){let _=path_to_pathx(n);if(TRACE_INSERT&&logg(str.conv(">> insert_tree, src={}, dest={}, exists={}",s,n,_.exists)),_.exists&&0!==_.lastx&&is_numeric(_.lev[_.lastx].sub)===Y){let o,r=_.lev[_.lastx].subx,a=_.lev[_.lastx].sub,i=count_consec(_.lev[_.lastx-1].node,r),u=n.clone(),c=n.clone(),l=u.key.length-1;for(;i>0;)o=a+i,u.key[l]=o-1,c.key[l]=o,TRACE_INSERT&&logg(str.conv("  ncon={}, sub={}, src={}, dst={}",i,o,u,c)),copy_tree(e,t,u,c),i--;copy_tree(e,t,s,n)}else merge_tree(e,t,s,n)};export function remove_tree(e,t,s){internal_err("not yet updated");let n=path_to_pathx(s);if(null===n)return;let _=n.lev[n.lastx],o=_.sub;if(0===n.lastx||is_numeric(o)!==Y)return;TRACE_LOG&&0!==t&&logg(str.conv(">> remove_tree, path={}",s));let r=_.subx,a=count_consec(_.node,r);a>1&&shift_x(e,t,n,r+1,o,a-1)};export function clear_tree(e,t,s){let n=path_to_pathx(s);if(null===n||!n.exists)return;TRACE_LOG&&0!==t&&logg(str.conv(">> clear_tree, path={}",s));let _=NF_STATEFUL&s.base.eflags&&t>0;_&&micro_add_marker(MARK_CLEAR_BEG),trunc_x(e,t,n),_&&micro_add_marker(MARK_CLEAR_END)};export function trunc_tree(e,t,s){let n=path_to_pathx(s);if(null===n||!n.exists)return;TRACE_LOG&&0!==t&&logg(str.conv(">> trunc_tree, path={}",s));let _=NF_STATEFUL&s.base.eflags&&t>0;_&&micro_add_marker(MARK_TRUNC_BEG),trunc_x(e,t,n,!1),_&&micro_add_marker(MARK_TRUNC_END)};function trunc_x(e,t,s,n=!0){let _=s.lev[0].node.eflags&NF_STATEFUL,o=t>0&&_,r=s.lev[s.lastx].node;if(o){let _=s.lastx;trunc_log(e,t,s,0,n),s.lastx=_}n&&(r.val=U),r.val==U&&s.lastx>0?orphan_upwards(s):r.children=null}function trunc_log(e,t,s,n,_){let o=s.lev[s.lastx].node;if(n>0||_){let n=o.val;n!=U&&(TRACE_LOG&&logg(str.conv("  atomic trunc {pathx} was {}",s,n)),micro_add_delta(LOGK_DELTA,e,t,s,n,U))}if(null!=o.children){let _;s.lastx+=1;let r=s.lev[s.lastx];for(_ of o.children)r.sub=_.sub,r.node=_,trunc_log(e,t,s,n+1,!0);s.lastx-=1}}function orphan_upwards(e){let t;for(e.lastx-=1;e.lastx>0&&!((t=e.lev[e.lastx].node).val!=U||t.children.length>1);)e.lastx-=1;t=e.lev[e.lastx].node;let s=e.lev[e.lastx+1].subx;TRACE_LOG&&logg(str.conv(" -- orphan upwards, finished at level={}, subx={}",e.lastx,s)),t.children.splice(s,1),0==t.children.length&&(t.children=null)}function merge_x(e,t,s,n,_){let o,r,a,i,u,c,l,p,d=s.lev[s.lastx].node,g=n.lev[n.lastx].node;if((p=leaf_getv(s,0))!=U&&setv_x(e,t,n,p),null!==d.children){for(s.lastx+=1,n.lastx+=1,c=s.lev[s.lastx],l=n.lev[n.lastx],null===g.children&&(g.children=[]),o=d.children.length,r=0;r<o;r++)i=d.children[r].sub,c.node=d.children[r],c.subx=r,c.sub=i,a=find_subscript(c.sub,g,0==(n.lev[0].node.eflags&NF_UNSORTED)),g_subscript_found?l.node=g.children[a]:((u=new a_tree("std","$merge_x")).sub=i,g.children.splice(a,0,u),l.node=u),l.subx=a,l.sub=i,merge_x(e,t,s,n,_+1);s.lastx-=1,n.lastx-=1}}export function renum_tree(e,t,s){let n=path_to_pathx(s);null!==n&&n.exists&&renum_x(e,t,n)};export function renum_x(e,t,s){let n,_=s.lev[s.lastx].node;if(null===_.children)return;let o,r=0,a=1,i=_.children.length;for(;!(r>=i)&&is_numeric(n=_.children[r].sub)===Y;)n===a?(r+=1,a+=1):(shift_x(e,t,s,r,a,o=count_consec(_,r)),r+=o,a+=o)};export function shift_x(e,t,s,n,_,o){let r,a=s.lev[s.lastx-1].node;if(0!=(s.lev[0].node.eflags&NF_STATEFUL)){let e=s.lev[s.lastx].sub;TRACE_LOG&&logg(str.conv("  atomic shift path={} from subscript {} to {} n:{}",s,e,_,o)),TRACE_LOG&&logg("logging of shift_x not yet imp")}for(r=0;r<o;r++)a.children[n].sub=_,n+=1,_+=1};function count_consec(e,t){let s=e.children[t].sub;if(is_numeric(s)!==Y)return 1;let n=s+1,_=t+1,o=1,r=e.children.length;for(;!(_>=r)&&e.children[_].sub===n;)o+=1,_+=1,n+=1;return o}export function is_path_eq(e,t){let s;if(null===e)return null==t;if(null===t)return!1;if(!CHECKS||e.base instanceof a_tree&&t.base instanceof a_tree||internal_err("only hard paths"),e.base!=t.base)return!1;if(e.key.length!==t.key.length)return!1;for(s=0;s<e.key.length;s++)if(e.key[s]!==t.key[s])return!1;return!0};export function is_path_eq2(e,t){let s,n,_;if(null===e)return null==t;if(null===t)return!1;if(e.key.length!==t.key.length)return!1;if(n=e.base instanceof a_tree?e.base.sub:e.base,_=t.base instanceof a_tree?t.base.sub:t.base,!CHECKS||0!=n&&0!=_||internal_err("ptr to local tree not permitted"),n!==_)return!1;for(s=0;s<e.key.length;s++)if(e.key[s]!==t.key[s])return!1;return!0};function is_meas_eq(e,t){let s,n;return e instanceof a_meas&&t instanceof a_meas&&(n=t,(s=e).mag===n.mag&&s.unitss===n.unitss)}export function mark_all_instances(e){TRACE_IMPLIED&&logg(str.conv("mark_all_instances, deferring all instances of {n}",e)),k.g_fields_to_mark.indexOf(e)<0&&(k.g_fields_to_mark.push(e),TRACE_IMPLIED&&logg(str.conv("  not yet in dirty array, adding {n}",e)))};export const WHERE_LOOM=1<<30;export let g_loom=[];let g_block_animations_otime,g_block_animations=[],g_num_animations=[],g_loom_next_id=1e4;export function loom_next_id(){return++g_loom_next_id};export function loom_find_id(e){let t,s;for(s=g_loom.length,t=0;t<s;t++)if(g_loom[t].id===e)return t;return-1};export function alloc_loom_elem(e){let t,s=new a_loom_element,n=U,_=U,o=U,r=U,a=1,i=U,u=U,c=!1,l=U,p=U,d=U,g=U,m=!0;for(let t in e)switch(t){case"delay":(r=e.delay.mag)<0&&(r=0);break;case"duration":i=e.duration;break;case"fadeout":d=e.fadeout;break;case"group":_=e.group;break;case"hold":g=e.hold;break;case"id":p=e.id;break;case"interval":i=e.interval.mag;break;case"interval_mon":u=e.interval_mon.mag;break;case"is_alternate":c=e.is_alternate==Y;break;case"is_dilated":m=e.is_dilated==Y;break;case"pre":n=e.pre;break;case"rate":i=1/e.rate;break;case"reps":a=e.reps;break;case"speed":l=e.speed;break;case"time":is_numeric(e.time)===Y?o=e.time:CHECKS&&argument_err("a specified time must be numeric");break;case"color":case"thick":case"cap":case"opacity":break;default:argument_err("internal error, bad property in options: "+t)}return a>1&&i==U&&argument_err("when repetitions is greater than 1, you must specify an interval or rate"),is_numeric(i)===Y&&i<.01&&argument_err("cannot use repeat intervals less than 10 msec"),s.is_relative=!1,t=m?now:now_raw,CHECKS&&r!==U&&o!==U&&argument_err("cannot specify both absolute time and delay from now"),n!=U?(r==U&&(r=0),o=r):r!=U?(o=t+r,s.is_relative=!0):o!=U||(o=t),p==U&&(p=loom_next_id()),s.prereq=n,s.group=_,s.id=p,s.time=o,s.nreps=a,s.countx=0,s.interval=i,s.interval_mon=u,s.fadeout_duration=d,s.hold_duration=g,s.last_seen=0,s.alternate=c,s.speed=l,s.is_dilated=m,s};function loom_dump1(e){let t,s,n;if(s=str.conv("  loom[{int}]: ",e),n=g_loom[e],s+=str.conv("pre={n}, id={n}, time={n}, kind={n}, rel={bool}",n.prereq,n.id,n.time,n.evkind,n.is_relative),n.evkind===EV_TIMER){for(s+=", parms=[",t=0;t<n.parm_array.length;t++)0!==t&&(s+=", "),s+=str.conv("{}",n.parm_array[t]);s+="]"}logg(s)}function loom_release_id(e){let t,s;for(TRACE_LOOM&&logg(str.conv("  loom_release_id id={n}",e)),t=0;t<g_loom.length;t++)(s=g_loom[t]).prereq===e&&(CHECKS&&is_numeric(s.time)!==Y&&internal_err("loom time not numeric"),s.time+=now,TRACE_LOOM&&logg(str.conv("  dependency at {int} cleared, new time {n3}",t,s.time)),s.prereq=U,s.is_relative=!0)}export function loom_clearx(e){loom_release_id(g_loom[e].id),g_loom.splice(e,1)};export function call_deferred_func(e){e.group!=IDE_GROUP&&add_major_callback(e),e.func.code.apply(null,e.parm_array)};export function block_animation_enter(){g_block_animations.length=0};export function block_animation_leave(){let e;for(e of g_block_animations)g_overlay.appendChild(e.block),e.block.x=e.startx,e.block.y=e.starty;g_block_animations_otime=now};export function loom_animate_block(e,t,s,n,_,o,r){let a={},i=k.local_to_global_p(e,new Point(0,0)),u=k.local_to_global_p(t,new Point(s,n));return a.id=++g_loom_next_id,a.block=e,a.oparent=e.parent,a.duration=_,a.parm=0,a.startx=i.x,a.starty=i.y,a.stopx=u.x,a.stopy=u.y,a.curvefunc=o,a.funcparm=r,g_block_animations.push(a),TRACE_ANIMATION&&logg(str.conv("animation add, id={n}",a.id)),a.id};function find_num_animation(e){let t;for(t=0;t<g_num_animations.length;t++)if(e===g_num_animations[t].id)return t;return-1}function abort_animate_num(e,t,s=N){s===Y&&path_setv(_M,WHERE_LOOM,t.valpath,t.endval),path_setv(_M,WHERE_LOOM,t.busypath,N),loom_release_id(t.id),g_num_animations.splice(e,1)}function pause_start(e){e.paused=!0,e.pause_start=now,TRACE_ANIMATION&&logg(str.conv("pause_start, time={}",e.pause_start))}function pause_end(e){e.paused=!1,e.starttime+=now-e.pause_start,TRACE_ANIMATION&&logg(str.conv("pause_end, new start={}",e.starttime))}export function loom_animate_num_ctrl(e,t){let s,n,_=U,o=U,r=U,a=U,i=U;for(let e in t)switch(e){case"abort":_=t.abort;break;case"finish":o=t.finish;break;case"pause":r=t.pause;break;case"resume":a=t.resume;break;case"toggle":i=t.toggle;break;default:argument_err("internal error, bad property in options: "+e)}(s=find_num_animation(e))>=0?(n=g_num_animations[s],r===Y?n.paused||pause_start(n):a===Y?n.paused&&pause_end(n):i===Y?n.paused?pause_end(n):pause_start(n):o===Y?abort_animate_num(s,n,Y):_===Y&&abort_animate_num(s,n,N)):CHECKS&&argument_err("not found")};function solve_unit_bezier(e,t,s,n,_,o){const r=!1;var a=3*s,i=3*(_-s)-a,u=1-a-i,c=3*n,l=3*(o-n)-c,p=1-c-l;function sampleCurveX(e){return((u*e+i)*e+a)*e}return function sampleCurveY(e){return((p*e+l)*e+c)*e}(function solveCurveX(e,t){var s,n,_,o,c,l,p;for(_=e,l=0;l<8;l++){if(o=sampleCurveX(_)-e,r&&logg(str.conv("inside SolveCurvex,iteration {int}, x={n,3}, err={n,6}, eps={n,3}",l,e,Math.abs(o),t)),Math.abs(o)<t)return _;if(c=(3*u*(p=_)+2*i)*p+a,Math.abs(c)<1e-6)break;_-=o/c}if(n=1,(_=e)<(s=0))return s;if(_>n)return n;for(;s<n;){if(o=sampleCurveX(_),Math.abs(o-e)<t)return _;e>o?s=_:n=_,_=.5*(n-s)+s}return _}(e,t))}export function loom_process_events(){let e,t,s,n,_,o,r,a,i,u,c,l=!1;if(n=now,TRACE_LOOM&&g_loom.length>0&&logg(str.conv("loom_process_events, now={n3}, loom.n={}",n,g_loom.length)),g_block_animations.length>0){for(TRACE_ANIMATION&&logg(str.conv("block animation loop len={}, now={n3}...",g_block_animations.length,now)),s=0;s<g_block_animations.length;)r=g_block_animations[s],_=100*(now-g_block_animations_otime)/r.duration,TRACE_ANIMATION&&logg(str.conv("animation running otime={n3}, percent={n}, start=({},{}), stop=({},{}), parm={}",g_block_animations_otime,_,r.startx,r.starty,r.stopx,r.stopy,r.funcparm)),r.curvefunc(r.block,_,r.startx,r.starty,r.stopx,r.stopy,r.funcparm),_>=100?(loom_release_id(r.id),r.oparent.appendChild(r.block),g_block_animations.splice(s,1),TRACE_ANIMATION&&logg(str.conv("..animation {int} finished, after delete, len={int}",s,g_block_animations.length))):s+=1;if(g_block_animations.length>0)return void(TRACE_ANIMATION&&logg("..end animations, still running"));TRACE_ANIMATION&&logg("..all animations finished")}for(s=0;s<g_num_animations.length;)n=(a=g_num_animations[s]).is_dilated?now:now_raw,a.paused?s+=1:(o=n-a.starttime,TRACE_ANIMATION&&logg(str.conv("val animation ax={}, elapsed={n3}, duration={}",s,o,a.duration)),o>=a.duration?(path_setv(_M,WHERE_LOOM,a.busypath,N),path_setv(_M,WHERE_LOOM,a.valpath,a.endval),loom_release_id(a.id),g_num_animations.splice(s,1),TRACE_ANIMATION&&logg(str.conv("..num_animation {int} finished, after delete, len={int}",s,g_num_animations.length))):(a.bez_x1===U?i=interpolate(o,0,a.duration,a.startval,a.endval,{clamp:Y}):(u=solve_unit_bezier(o/a.duration,.001,a.bez_x1,a.bez_y1,a.bez_x2,a.bez_y2),TRACE_ANIMATION&&logg(str.conv("..bez, X={n,3}, Y={n,3}",o/a.duration,u)),i=interpolate(u,0,1,a.startval,a.endval,{})),TRACE_ANIMATION&&logg(str.conv("  setval, va_elapsed={}, newval={n,1}",o,i)),path_setv(_M,WHERE_LOOM,a.valpath,i),s+=1));for(t=0;t<g_loom.length;)if(c=!1,n=(e=g_loom[t]).is_dilated?now:now_raw,TRACE_SPRITE&&logg(str.conv("loom_process_events[{int}], currtime={n3}, id={n}, pre={n}, elem.time={n3}",t,n,e.id,e.prereq,e.time)),e.prereq===U)if(n<e.time)TRACE_LOOM&&logg(str.conv("  loom: waiting for time, elem.time={n3}, currtime={n3}",e.time,n)),t+=1;else{switch(e.evkind){case EV_TIMER:e.countx+=1,TRACE_LOOM&&logg("  loom: calling deferred function"),call_deferred_func(e),e.interval_mon!=U&&getn(runtime,F_monitor_active)==Y?e.time=n+e.interval_mon:e.time=n+e.interval,e.is_relative=!0;break;case EV_ANIM_CURVE:c=do_anim_curve(e,n);break;case EV_ANIM_BLOCK:case EV_ANIM_VAL:throw new Error("not yet");case EV_NOP:c=!0;break;default:throw new Error("unexpected event kind")}e.last_seen=n,TRACE_LOOM&&logg(str.conv("  loom: event was fired, count={n}, nreps={n}",e.countx,e.nreps)),c||e.countx>=e.nreps?(TRACE_LOOM&&logg("  loom: event used up"),loom_clearx(t)):t+=1,TRACE_LOOM&&logg("loom: about to call trickle"),k.trickle(0),l=!0}else TRACE_LOOM&&logg("  loom: waiting for a prereq"),t+=1;l||k.trickle(0)};function do_anim_curve(e,t){let s,n,_=!1,o=e.extra;switch(o.phase){case 0:(n=(s=t-e.time)/e.interval)>1&&(n=1),TRACE_CURVE&&logg(str.conv("curve drawing, now={}, t1={n3}, elapsed={}",t,n,s)),o.shape.graphics.clear();debugger;n>=1&&(o.draw_end_time=now,o.phase=1,TRACE_CURVE&&logg("  --advancing to hold phase"),0==e.hold_duration&&(o.hold_end_time=t,o.phase=2));break;case 1:e.hold_duration==INFINITY?(_=!0,TRACE_CURVE&&logg("curve holding forever, remove from loom")):(s=t-o.draw_end_time,TRACE_CURVE&&logg(str.conv("curve holding, duration={n1}, elapsed={}",e.hold_duration,s)),s>=e.hold_duration&&(o.hold_end_time=t,o.phase=2,TRACE_CURVE&&logg("--advancing to fadeout phase")));break;case 2:s=t-o.hold_end_time;var r=1-elapsed/e.fadeout_duration;TRACE_CURVE&&logg(str.conv("curve fadeout, elapsed={}, opacity={n3}",s,r)),r<.05?(o.shape.parent.removeChild(o.shape),_=!0,TRACE_CURVE&&logg("  --fadeout finished, removing from screen")):(o.shape.alpha=r,TRACE_CURVE&&logg("  --fadeout updating opacity"));break;default:throw new Error("bad phase")}return _}function fallback_drawer(e){draw_rect(e,{fill:MAGENTA})}function get_os_version(e){var t,s="",n=e.indexOf("OS X");if(n>0){for(;"x)"!=(t=e.charAt(n))&&""!=t;)"_"==t&&(t="."),s+=t,n+=1;return s}if((n=e.indexOf("(Win"))>0){for(n+=1;";"!=(t=e.charAt(n))&&")"!=t&&""!=t;)s+=t,n+=1;return s}return e.substring(0,12)}var is_rtl=!1;export function rtl_init(){if(is_rtl)return TRACE_INIT&&logg("--- ignoring second rtl init"),void(null!=aaaa.main_drawer&&(monitored_draw_F=aaaa.main_drawer));is_rtl=!0,TRACE_INIT&&logg("--- rtl_init a"),zap_clock(),add_family(Y_Angle,"angle^1"),add_family(Y_Area,"len^2"),add_family(Y_Energy,"len^2,mass^1,time^-2"),add_family(Y_Force,"len^1,mass^1,time^-2"),add_family(Y_Frequency,"time^-1"),add_family(Y_Length,"len^1"),add_family(Y_Mass,"mass^1"),add_family(Y_Power,"len^2,mass^1,time^-3"),add_family(Y_Pressure,"len^2,mass^1,time^-3"),add_family(Y_Scalar,""),add_family(Y_Speed,"len^1,time^-1"),add_family(Y_Temperature,"temp^1|1"),add_family(Y_Time,"time^1"),add_family(Y_Volume,"len^3"),add_unit(Y_Angle,N_radian,1),add_unit(Y_Angle,N_deg,.017453292519943295),add_unit(Y_Angle,N_gradian,.015707963267948967);add_unit(Y_Angle,N_revs,6.283185307179586),add_unit(Y_Area,N_sq_m,1),add_unit(Y_Area,N_acre,4046.8564300507887),add_unit(Y_Area,N_hectare,1e4),add_unit(Y_Area,N_sq_cm,1e-4),add_unit(Y_Area,N_sq_ft,.09290303999749462),add_unit(Y_Area,N_sq_in,.0006451600000025807),add_unit(Y_Area,N_sq_mi,2589988.110285327),add_unit(Y_Area,N_sq_mm,1e-6),add_unit(Y_Area,N_sq_yd,.8361273600007553),add_unit(Y_Energy,N_joule,1),add_unit(Y_Energy,N_BTU,1055.0558529687669),add_unit(Y_Energy,N_calorie,4.183999932386561),add_unit(Y_Energy,N_ev,1.602177330024137e-19),add_unit(Y_Energy,N_gigajoule,1e9),add_unit(Y_Energy,N_hp_hr,2684519.537686219),add_unit(Y_Energy,N_kw_hr,3599999.9971200004),add_unit(Y_Energy,N_therm_us,105480400),add_unit(Y_Energy,N_therm_ec,105506e3),add_unit(Y_Force,N_newton,1);add_unit(Y_Force,N_lbf,4.448221618990737),add_unit(Y_Frequency,N_hz,1),add_unit(Y_Frequency,N_rpm,.016666666666666666),add_unit(Y_Length,N_m,1),add_unit(Y_Length,N_angstrom,1e-11),add_unit(Y_Length,N_cm,.01),add_unit(Y_Length,N_dm,.1),add_unit(Y_Length,N_foot,.30479999999999996),add_unit(Y_Length,N_inch,.0254),add_unit(Y_Length,N_km,1e3),add_unit(Y_Length,N_mile,1609.3439999999998),add_unit(Y_Length,N_mm,.001),add_unit(Y_Length,N_nautmile,1852),add_unit(Y_Length,N_nm,1e-10),add_unit(Y_Length,N_um,1e-6),add_unit(Y_Length,N_yard,.9143999999999999),add_unit(Y_Mass,N_kg,1),add_unit(Y_Mass,N_grain,6479890999975407e-20),add_unit(Y_Mass,N_gram,.001),add_unit(Y_Mass,N_ounce,.02834952316484755);add_unit(Y_Mass,N_pound,.4535923703803783),add_unit(Y_Mass,N_slug,14.593903),add_unit(Y_Mass,N_ton,907.1847407607567),add_unit(Y_Mass,N_tonne,1e3),add_unit(Y_Mass,N_troy_ounce,.031103476769649887),add_unit(Y_Mass,N_troy_pound,.3732417216026466),add_unit(Y_Power,N_watt,1),add_unit(Y_Power,N_gigawatt,1e9),add_unit(Y_Power,N_hp,745.6998713570781),add_unit(Y_Power,N_kilowatt,1e3),add_unit(Y_Power,N_megawatt,1e6),add_unit(Y_Power,N_milliwatt,.001),add_unit(Y_Pressure,N_pascal,1),add_unit(Y_Pressure,N_bar,1e5),add_unit(Y_Pressure,N_psi,6894.7572798677575),add_unit(Y_Pressure,N_torr,133.32236836846923),add_unit(Y_Scalar,N_each,1),add_unit(Y_Scalar,N_dozen,12),add_unit(Y_Scalar,N_gross,144),add_unit(Y_Speed,N_m_per_sec,1);add_unit(Y_Speed,N_ft_per_min,.0050799999922784),add_unit(Y_Speed,N_ft_per_sec,.304799999536704),add_unit(Y_Speed,N_km_per_hr,.2777777777777778),add_unit(Y_Speed,N_m_per_min,.016666666666666666),add_unit(Y_Speed,N_mi_per_hr,.4470400004105615),add_unit(Y_Temperature,N_degK,1),add_unit(Y_Temperature,N_degC,U,new a_function("std","conv_degK_to_degC",conv_degK_to_degC),new a_function("std","conv_degC_to_degK",conv_degC_to_degK)),add_unit(Y_Temperature,N_degF,U,new a_function("std","conv_degK_to_degF",conv_degK_to_degF),new a_function("std","conv_degF_to_degK",conv_degF_to_degK)),add_unit(Y_Time,N_sec,1),add_unit(Y_Time,N_day,86400),add_unit(Y_Time,N_hour,3600),add_unit(Y_Time,N_microsec,1e-6),add_unit(Y_Time,N_millisec,.001),add_unit(Y_Time,N_minute,60),add_unit(Y_Time,N_month,223200),add_unit(Y_Time,N_nanosec,1e-9),add_unit(Y_Time,N_picosec,1e-12),add_unit(Y_Time,N_week,604800),add_unit(Y_Time,N_year,2678400),add_unit(Y_Volume,N_l,1);add_unit(Y_Volume,N_cu_ft,28.316579357213648),add_unit(Y_Volume,N_cu_yd,764.5552200007645),add_unit(Y_Volume,N_cup,.23658823637296003),add_unit(Y_Volume,N_gal,3.785411789132032),add_unit(Y_Volume,N_ml,.001),add_unit(Y_Volume,N_oz,.029573529564111873),add_unit(Y_Volume,N_pint,.47317647274592006),add_unit(Y_Volume,N_quart,.94635294549184),add_unit(Y_Volume,N_tbsp,.014786764780962696),add_unit(Y_Volume,N_tsp,.004928921598877499),ERR_TREE=new a_tree("std","ERR_TREE",0),str.str_add_meta(),loom_history=new a_tree("std","$loom_history",NF_STATEFUL),runtime=new a_tree("std","$runtime",NF_STATEFUL),debug_runtime=new a_tree(_M,"$debug_runtime",0),js_set_screen_size(),setv(_M,0,runtime,F_app_version,"1");var e=get_os_version(navigator.appVersion);setv(_M,0,runtime,F_os_version,e);var t=js_to_langx(navigator.language);setv(_M,0,runtime,F_os_language,t),setv(_M,0,runtime,F_ui_language,t),setv(_M,0,runtime,F_os_kind,OS_WEB);let s=CPU_INTEL;if(-1!=navigator.userAgent.indexOf("ARM")&&(s=CPU_ARM),setv(_M,0,runtime,F_cpu_kind,s),setv(_M,0,runtime,F_full_screen,N),setv(_M,0,runtime,F_hardware_id,g_hardware_id),setv(_M,0,runtime,F_touch_kind,TOUCH_NONE),setv(_M,0,runtime,F_os_modal,0),TRACE_MAJOR&&logg("emitting major[1] EV_INIT"),setv(_M,0,runtime,F_major_steps,1,F_evkind,EV_INIT),setv(_M,0,runtime,F_major_steps,1,F_hist_rawx,0),setv(_M,0,runtime,F_major_stepx,2),IS_NODE){setInterval(node_tick,1e3/10)}else{k.k_init(),window.addEventListener("keydown",js_keydown),window.addEventListener("mousedown",js_mousedown),window.addEventListener("mouseup",js_mouseup),window.addEventListener("mousemove",js_mousemove),window.addEventListener("touchstart",js_touchstart),window.addEventListener("touchmove",js_touchmove),window.addEventListener("touchend",js_touchend),window.addEventListener("touchcancel",js_touchcancel),window.oncontextmenu=(e=>(e.preventDefault(),!1)),window.addEventListener("resize",js_resize);requestAnimationFrame(on_enter_frame)}TRACE_INIT&&logg("--- rtl_init z")};